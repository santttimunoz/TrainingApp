<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xml:lang="en" lang="en" xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
    <meta http-equiv="Content-Style-Type" content="text/css" />
    <!-- MOTW-DISABLED saved from url=(0014)about:internet -->
    <title>Overview of Archiving Integration</title>
    <link rel="StyleSheet" href="css/archiving-integration.css" type="text/css" media="all" />
    <link rel="StyleSheet" href="css/webworks.css" type="text/css" media="all" />
    <link rel="StyleSheet" href="css/css-guidewire-extra.css" type="text/css" media="all" />
    <script type="text/javascript" language="JavaScript1.2" src="wwhdata/common/context.js"></script>
    <script type="text/javascript" language="JavaScript1.2" src="wwhdata/common/towwhdir.js"></script>
    <script type="text/javascript" language="JavaScript1.2" src="wwhdata/common/wwhpagef.js"></script>
    <script type="text/javascript" language="JavaScript1.2">
      <!--
        var  WebWorksRootPath = "";
      // -->
    </script>
    <script type="text/javascript" language="JavaScript1.2">
      <!--
        // Set reference to top level help frame
        //
        var  WWHFrame = WWHGetWWHFrame("", true);
      // -->
    </script>
    <script type="text/javascript" language="JavaScript1.2" src="scripts/expand.js"></script>
    <!-- THE FOLLOWING IS A GUIDEWIRE STYLE DEFINITION FOR THE LINK TO THIS FEATURE -->
    <link rel="StyleSheet" href="css/css-guidewire-extra.css" type="text/css" media="all" />
    <!-- THE FOLLOWING IS A GUIDEWIRE GSCRIPT FUNCTION FOR THE LINK TO THIS FEATURE -->
    <script type="text/javascript">
function guidewire_selectall()
{
var text_val=eval("document.linktothisurlform.urlfield");
text_val.focus();
text_val.select();
}
</script>
  </head>
  <body onLoad="WWHUpdate();" onUnload="WWHUnload();" onKeyDown="WWHHandleKeyDown((document.all||document.getElementById||document.layers)?event:null);" onKeyPress="WWHHandleKeyPress((document.all||document.getElementById||document.layers)?event:null);" onKeyUp="WWHHandleKeyUp((document.all||document.getElementById||document.layers)?event:null);">
    <!-- THE FOLLOWING IS A GUIDEWIRE DIV FOR THE 'LINK TO THIS' FEATURE -->
    <div id="linkToThisPage" class="popup" style="display: none;">
      <div class="popupTitle">Link Directly to This Page 
           <a href="#" onclick="var thePopup = getElementById('linkToThisPage');thePopup.style.display='none';return false;"><img class="popupClosebox" src="wwhelp/wwhimpl/common/images/close.gif" /></a></div>
      <div style="padding:6px;">
        <div class="popupText" id="linkToThisPageBookmark">An error has occurred if you see this messsage.</div>
        <form name="linktothisurlform" method="post" action="" style="width:275px;margin:0px">
          <input type="text" class="popupURLText" id="linkToThisPageURL" name="urlfield" rows="1" cols="55" onClick="guidewire_selectall();" onFocus="guidewire_selectall();"></input>
        </form>
      </div>
    </div>
    <br />
    <div class="WebWorks_Breadcrumbs" style="text-align: left;">
      <span>PolicyCenter Integration Guide</span> : 
    <span class="WebWorks_Breadcrumbs" style="text-align: left;"><a class="WebWorks_Breadcrumb_Link" href="p-claims.html#1454238">Other Integration Topics</a> : <a class="WebWorks_Breadcrumb_Link" href="archiving-integration.38.1.html#1454238">Archiving Integration</a> : Overview of Archiving Integration</span></div>
    <hr align="left" />
    <blockquote>
      <h3 class="H1_-_Heading_1"><a name="1454238">Overview of Archiving Integration</a></h3>
      <div class="B_-_Body"><a name="2198309"> </a>PolicyCenter supports archiving policy terms. The application generates XML documents for the data. You can choose how to store the XML documents in an external system. Store the data as files, as database binary large objects, or documents in a document storage system.</div>
      <div class="B_-_Body"><a name="2198310">From the user perspective, PolicyCenter archives or retrieves a </a><span class="e_-_emphasis">policy term</span>. A policy term is the <span class="e_-_emphasis">logical&nbsp;unit&nbsp;of&nbsp;archiving.</span></div>
      <div class="B_-_Body"><a name="2198311">PolicyCenter does not store a policy term as a single XML document. Instead, PolicyCenter serializes and stores one XML document for every </a><span class="cv_-_computer_voice">PolicyPeriod</span> graph in the policy term. A <span class="cv_-_computer_voice">PolicyPeriod</span> graph means one <span class="cv_-_computer_voice">PolicyPeriod</span> object and its subobjects. The <span class="cv_-_computer_voice">PolicyPeriod</span> graph is the <span class="e_-_emphasis">physical&nbsp;unit&nbsp;of&nbsp;archiving</span>. PolicyCenter archives each <span class="cv_-_computer_voice">PolicyPeriod</span> graph in the term sequentially in an internally-defined order. PolicyCenter stops archiving that term if there are any errors with any <span class="cv_-_computer_voice">PolicyPeriod</span>.</div>
      <div class="B_-_Body"><a name="2198312">After archiving, PolicyCenter deletes most </a><span class="cv_-_computer_voice">PolicyPeriod</span> subobjects. However, PolicyCenter retains the <span class="cv_-_computer_voice">PolicyPeriod</span> entity instance and its associated entity instances of type <span class="cv_-_computer_voice">EffectiveDatedFields</span> and <span class="cv_-_computer_voice">Document</span>. Additionally, in certain circumstances certain other objects are retained:</div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><a name="2198313">PolicyCenter deletes </a><span class="cv_-_computer_voice">Note</span> objects associated with the job of the archived policy period and only if it has no associated activity. </div>
            </td>
          </tr>
        </table>
      </div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><a name="2198314">PolicyCenter deletes </a><span class="cv_-_computer_voice">UWIssueHistory</span> objects if and only if it is an auto-approved issue</div>
            </td>
          </tr>
        </table>
      </div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><a name="2198315">PolicyCenter deletes </a><span class="cv_-_computer_voice">FormTextData</span> objects only with the last remaining <span class="cv_-_computer_voice">PolicyPeriod</span> to archive in that term. In other words, it is always deleted, but in the last database transaction along with the last remaining archived <span class="cv_-_computer_voice">PolicyPeriod</span> in the term.</div>
            </td>
          </tr>
        </table>
      </div>
      <div class="B_-_Body"><a name="2198316">PolicyCenter documentation refers to a </a><span class="cv_-_computer_voice">PolicyPeriod </span>object as the <span class="e_-_emphasis">root info object</span> for that archived data. The name root info object refers to the <span class="cv_-_computer_voice">RootInfo</span> interface, which the <span class="cv_-_computer_voice">PolicyPeriod</span> entity type implements. Some archiving APIs use the <span class="cv_-_computer_voice">RootInfo</span> interface as a method argument or return type. For PolicyCenter, when you see <span class="cv_-_computer_voice">RootInfo</span>, this refers to a <span class="cv_-_computer_voice">PolicyPeriod</span> instance.</div>
      <div class="B_-_Body"><a name="2198317">After archiving, PolicyCenter makes the </a><span class="cv_-_computer_voice">PolicyPeriod</span> data effectively immutable while that period is archived. However, within one policy term, at any given instant, it is possible that one or more periods are archived but not all. From the user interface standpoint, PolicyCenter considers a given policy term archived if one or more of the periods in the term is archived, even if not all are archived. </div>
      <div class="B_-_Body"><a name="2198318">If the plugin throws exceptions, the application sets the </a><span class="cv_-_computer_voice">PolicyPeriod.ExcludedFromArchive</span> Boolean property to <span class="cv_-_computer_voice">true</span> and sets the <span class="cv_-_computer_voice">PolicyPeriod.ExcludeReason</span> to a description <span class="cv_-_computer_voice">String</span>. Check your logs for errors. If you have a coding problem that sets this property, use the <span class="ui_-_UI_element">Archive Info</span> page to reset the <span class="cv_-_computer_voice">PolicyPeriod.ExcludedFromArchive</span> flag to false.</div>
      <div class="B_-_Body"><a name="2198323">There are two archiving-related plugin interfaces in PolicyCenter. Both implementations are in the </a><span class="cv_-_computer_voice">gw.plugin.archive.impl</span> package. The following table summarizes the role of each interface:</div>
      <div class="T_-_Table"><a name="2198349">&nbsp;</a></div>
      <table class="withHeading" style="text-align: left" border="0" cellpadding="10" cellspacing="0" summary="">
        <caption></caption>
        <tr>
          <td style="border-bottom-color: #000000; border-bottom-style: solid; border-bottom-width: 0.5pt; border-top-color: #000000; border-top-style: solid; border-top-width: 0.5pt; padding-bottom: 4pt; padding-left: 2pt; padding-right: 8pt; padding-top: 0pt; vertical-align: bottom">
            <div class="TH_-_Table_Heading"><a name="2198326">Plugin&nbsp;interface</a></div>
          </td>
          <td style="border-bottom-color: #000000; border-bottom-style: solid; border-bottom-width: 0.5pt; border-top-color: #000000; border-top-style: solid; border-top-width: 0.5pt; padding-bottom: 4pt; padding-left: 2pt; padding-right: 8pt; padding-top: 0pt; vertical-align: bottom">
            <div class="TH_-_Table_Heading"><a name="2198328">Purpose</a></div>
          </td>
          <td style="border-bottom-color: #000000; border-bottom-style: solid; border-bottom-width: 0.5pt; border-top-color: #000000; border-top-style: solid; border-top-width: 0.5pt; padding-bottom: 4pt; padding-left: 2pt; padding-right: 8pt; padding-top: 0pt; vertical-align: bottom">
            <div class="TH_-_Table_Heading"><a name="2198330">Demonstration implementation&nbsp;class</a></div>
          </td>
        </tr>
        <tr>
          <td style="border-bottom-color: #c0d1d1; border-bottom-style: solid; border-bottom-width: 0.15pt; border-top-color: #000000; border-top-style: solid; border-top-width: 0.5pt; padding-bottom: 4pt; padding-left: 2pt; padding-right: 8pt; padding-top: 0pt; vertical-align: top">
            <div class="TT_-_Table_Text" style="color: #000000; font-family: &quot;Lucida Sans Typewriter&quot;; font-style: normal; font-variant: normal; font-weight: normal; margin-top: 3.0pt; text-transform: none; vertical-align: baseline"><span class="cvt_-_computer_voice_table"><a name="2198332">gw.plugin.archiving.IArchiveSource</a></span></div>
          </td>
          <td style="border-bottom-color: #c0d1d1; border-bottom-style: solid; border-bottom-width: 0.15pt; border-top-color: #000000; border-top-style: solid; border-top-width: 0.5pt; padding-bottom: 4pt; padding-left: 2pt; padding-right: 8pt; padding-top: 0pt; vertical-align: top">
            <div class="TT_-_Table_Text"><a name="2198334">Storing and retrieving a serialized XML document that represents one </a><span class="cvt_-_computer_voice_table">PolicyPeriod</span> graph. For more information, see <a href="javascript:WWHClickedPopup('integration', 'archiving-integration.38.2.html#2083107', '');" title="Overview of Archiving Integration">“Archive Source Plugin”</a>.</div>
          </td>
          <td style="border-bottom-color: #c0d1d1; border-bottom-style: solid; border-bottom-width: 0.15pt; border-top-color: #000000; border-top-style: solid; border-top-width: 0.5pt; padding-bottom: 4pt; padding-left: 2pt; padding-right: 8pt; padding-top: 0pt; vertical-align: top">
            <div class="TT_-_Table_Text" style="color: #000000; font-family: &quot;Lucida Sans Typewriter&quot;; font-style: normal; font-variant: normal; font-weight: normal; margin-top: 3.0pt; text-transform: none; vertical-align: baseline"><span class="cvt_-_computer_voice_table"><a name="2198339">PCArchivingRecordingPlugin</a></span></div>
          </td>
        </tr>
        <tr>
          <td style="border-bottom-color: #000000; border-bottom-style: solid; border-bottom-width: 0.5pt; border-top-color: #c0d1d1; border-top-style: solid; border-top-width: 0.15pt; padding-bottom: 4pt; padding-left: 2pt; padding-right: 8pt; padding-top: 0pt; vertical-align: top">
            <div class="TT_-_Table_Text" style="color: #000000; font-family: &quot;Lucida Sans Typewriter&quot;; font-style: normal; font-variant: normal; font-weight: normal; margin-top: 3.0pt; text-transform: none; vertical-align: baseline"><span class="cvt_-_computer_voice_table"><a name="2198341">gw.plugin.archive.IPCArchivingPlugin</a></span></div>
          </td>
          <td style="border-bottom-color: #000000; border-bottom-style: solid; border-bottom-width: 0.5pt; border-top-color: #c0d1d1; border-top-style: solid; border-top-width: 0.15pt; padding-bottom: 4pt; padding-left: 2pt; padding-right: 8pt; padding-top: 0pt; vertical-align: top">
            <div class="TT_-_Table_Text"><a name="2198343">Determines when to archive a policy term. See </a><a href="javascript:WWHClickedPopup('integration', 'archiving-integration.38.2.html#2198439', '');" title="Overview of Archiving Integration">“Archiving Eligibility Plugin”</a></div>
          </td>
          <td style="border-bottom-color: #000000; border-bottom-style: solid; border-bottom-width: 0.5pt; border-top-color: #c0d1d1; border-top-style: solid; border-top-width: 0.15pt; padding-bottom: 4pt; padding-left: 2pt; padding-right: 8pt; padding-top: 0pt; vertical-align: top">
            <div class="TT_-_Table_Text" style="color: #000000; font-family: &quot;Lucida Sans Typewriter&quot;; font-style: normal; font-variant: normal; font-weight: normal; margin-top: 3.0pt; text-transform: none; vertical-align: baseline"><span class="cvt_-_computer_voice_table"><a name="2198348">PCArchivingPlugin</a></span></div>
          </td>
        </tr>
      </table>
      <h4 class="H2_-_Heading_2"><a name="2064804">Archiving Integration and Archiving Eligibility Flow</a></h4>
      <div class="B_-_Body"><a name="2060419">The high-level integration flow for archival storage:</a></div>
      <div class="LS_-_List_Start_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="LS_-_List_Start_inner" style="width: 15pt; white-space: nowrap">
                <span class="ri_-_run_in_header">	1.	</span>
              </div>
            </td>
            <td width="100%">
              <div class="LS_-_List_Start_inner"><a name="2060565">The PolicyCenter archiving batch process runs.</a></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="LI_-_List_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="LI_-_List_Item_inner" style="width: 15pt; white-space: nowrap">
                <span class="ri_-_run_in_header">	2.	</span>
              </div>
            </td>
            <td width="100%">
              <div class="LI_-_List_Item_inner"><a name="2198354">PolicyCenter determines the set of </a><span class="cv_-_computer_voice">PolicyPeriod</span> objects that need archiving. To determine what <span class="cv_-_computer_voice">PolicyPeriod</span> objects to skip, PolicyCenter uses the following properties:</div>
            </td>
          </tr>
        </table>
      </div>
      <div class="BI2_-_Bullet_Item_002c_Level_2_outer" style="margin-left: 67pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="BI2_-_Bullet_Item_002c_Level_2_inner" style="width: 15pt; white-space: nowrap">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI2_-_Bullet_Item_002c_Level_2_inner"><span class="cv_-_computer_voice"><a name="2198356">PolicyTerm.NextArchiveCheckDate</a></span> - a date that determines the earliest archive eligibility. PolicyCenter populates this property from calling the policy eligibility plugin. <a href="javascript:WWHClickedPopup('integration', 'archiving-integration.38.2.html#2198439', '');" title="Overview of Archiving Integration">“Archiving Eligibility Plugin”</a>.</div>
            </td>
          </tr>
        </table>
      </div>
      <div class="BI2_-_Bullet_Item_002c_Level_2_outer" style="margin-left: 67pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="BI2_-_Bullet_Item_002c_Level_2_inner" style="width: 15pt; white-space: nowrap">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI2_-_Bullet_Item_002c_Level_2_inner"><span class="cv_-_computer_voice"><a name="2198361">PolicyPeriod.ExcludedFromArchive</a></span> - a Boolean flag that if set to <span class="cv_-_computer_voice">true</span> prevents ClaimCenter from even attempting to archive the claim. If the value is <span class="cv_-_computer_voice">true</span>, ClaimCenter skips the claim and does not run the archiving rule set for this claim again until this flag is reset to <span class="cv_-_computer_voice">false</span>. For an excluded claim, the <span class="cv_-_computer_voice">ClaimInfo.ExcludedReason</span> property contains a <span class="cv_-_computer_voice">String</span> that describes the reason for the exclusion.</div>
            </td>
          </tr>
        </table>
      </div>
      <div class="LI_-_List_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="LI_-_List_Item_inner" style="width: 15pt; white-space: nowrap">
                <span class="ri_-_run_in_header">	3.	</span>
              </div>
            </td>
            <td width="100%">
              <div class="LI_-_List_Item_inner"><a name="2198362">PolicyCenter performs the following steps iteratively for each unarchived policy period in the term. PolicyCenter chooses the next policy period in an order defined by an internal algorithm. Only one policy period in a term archives at any one time. If a policy period fails archiving, the rest of the policy periods in that term remain unprocessed until an administrator fixes the problem. For problems, the application sets the </a><span class="cv_-_computer_voice">PolicyPeriod.ExcludedFromArchive</span> Boolean property to <span class="cv_-_computer_voice">true</span> and sets the <span class="cv_-_computer_voice">PolicyPeriod.ExcludeReason</span> to a description <span class="cv_-_computer_voice">String</span>.</div>
            </td>
          </tr>
        </table>
      </div>
      <div class="LI_-_List_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="LI_-_List_Item_inner" style="width: 15pt; white-space: nowrap">
                <span class="ri_-_run_in_header">	4.	</span>
              </div>
            </td>
            <td width="100%">
              <div class="LI_-_List_Item_inner"><a name="2198393">PolicyCenter encodes each </a><span class="cv_-_computer_voice">PolicyPeriod</span> graph into an in-memory XML representation.</div>
            </td>
          </tr>
        </table>
      </div>
      <div class="LI_-_List_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="LI_-_List_Item_inner" style="width: 15pt; white-space: nowrap">
                <span class="ri_-_run_in_header">	5.	</span>
              </div>
            </td>
            <td width="100%">
              <div class="LI_-_List_Item_inner"><a name="2121843">PolicyCenter serializes each XML document.</a></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="LI_-_List_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="LI_-_List_Item_inner" style="width: 15pt; white-space: nowrap">
                <span class="ri_-_run_in_header">	6.	</span>
              </div>
            </td>
            <td width="100%">
              <div class="LI_-_List_Item_inner"><a name="2060794">PolicyCenter calls a customer-written archive source plugin to store the data.</a></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="LI_-_List_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="LI_-_List_Item_inner" style="width: 15pt; white-space: nowrap">
                <span class="ri_-_run_in_header">	7.	</span>
              </div>
            </td>
            <td width="100%">
              <div class="LI_-_List_Item_inner"><a name="2060833">The archive source plugin sends archive data to an external system. You implement this plugin to connect to your own archive source.</a></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="LI_-_List_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="LI_-_List_Item_inner" style="width: 15pt; white-space: nowrap">
                <span class="ri_-_run_in_header">	8.	</span>
              </div>
            </td>
            <td width="100%">
              <div class="LI_-_List_Item_inner"><a name="2198398">After archiving, PolicyCenter deletes most </a><span class="cv_-_computer_voice">PolicyPeriod</span> subobjects. However, PolicyCenter retains the <span class="cv_-_computer_voice">PolicyPeriod</span> entity instance and its associated entity instances of type <span class="cv_-_computer_voice">EffectiveDatedFields</span> and <span class="cv_-_computer_voice">Document</span>. Additionally, in certain circumstances certain other objects are retained, see <a href="javascript:WWHClickedPopup('integration', 'archiving-integration.38.2.html#1454238', '');" title="Overview of Archiving Integration">“Overview of Archiving Integration”</a> for details.</div>
            </td>
          </tr>
        </table>
      </div>
      <div class="B_-_Body"><a name="2061026">The high-level integration flow for archiving retrieval:</a></div>
      <div class="LS_-_List_Start_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="LS_-_List_Start_inner" style="width: 15pt; white-space: nowrap">
                <span class="ri_-_run_in_header">	1.	</span>
              </div>
            </td>
            <td width="100%">
              <div class="LS_-_List_Start_inner"><a name="2198406">The user identifies a policy term to retrieve.</a></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="LI_-_List_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="LI_-_List_Item_inner" style="width: 15pt; white-space: nowrap">
                <span class="ri_-_run_in_header">	2.	</span>
              </div>
            </td>
            <td width="100%">
              <div class="LI_-_List_Item_inner"><a name="2198407">In a work queue, PolicyCenter finds the associated </a><span class="cv_-_computer_voice">PolicyPeriod</span> objects for the policy term. The following steps happen iteratively for each policy period in the term, in an order defined by internal code. Only one policy period is retrieved at one time. If retrieval fails, PolicyCenter creates an activity for all requestors.</div>
            </td>
          </tr>
        </table>
      </div>
      <div class="LI_-_List_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="LI_-_List_Item_inner" style="width: 15pt; white-space: nowrap">
                <span class="ri_-_run_in_header">	3.	</span>
              </div>
            </td>
            <td width="100%">
              <div class="LI_-_List_Item_inner"><a name="2115072">PolicyCenter tells the archiving storage plugin to retrieve the XML format archive data from the external archive.</a></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="LI_-_List_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="LI_-_List_Item_inner" style="width: 15pt; white-space: nowrap">
                <span class="ri_-_run_in_header">	4.	</span>
              </div>
            </td>
            <td width="100%">
              <div class="LI_-_List_Item_inner"><a name="2115076">PolicyCenter de-serializes the XML data into an in-memory representation of the stored XML. </a></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="LI_-_List_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="LI_-_List_Item_inner" style="width: 15pt; white-space: nowrap">
                <span class="ri_-_run_in_header">	5.	</span>
              </div>
            </td>
            <td width="100%">
              <div class="LI_-_List_Item_inner"><a name="2037372">If the archive data is from an earlier data model of PolicyCenter, PolicyCenter next runs upgrade steps on the object. This includes built-in upgrade triggers as well as customer-written upgrade steps that extend built-in upgrade steps. For example, the customer upgrade steps might upgrade data in data model extension properties. For more information, see </a><a href="javascript:WWHClickedPopup('integration', 'archiving-integration.38.7.html#2127102', '');" title="Upgrading the Data Model of Retrieved Data">“Upgrading the Data Model of Retrieved Data”</a></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="LI_-_List_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="LI_-_List_Item_inner" style="width: 15pt; white-space: nowrap">
                <span class="ri_-_run_in_header">	6.	</span>
              </div>
            </td>
            <td width="100%">
              <div class="LI_-_List_Item_inner"><a name="2037669">PolicyCenter converts the temporary object into a real entity, upgrades the data model if necessary, and finally persists it to the database.</a></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="LI_-_List_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="LI_-_List_Item_inner" style="width: 15pt; white-space: nowrap">
                <span class="ri_-_run_in_header">	7.	</span>
              </div>
            </td>
            <td width="100%">
              <div class="LI_-_List_Item_inner"><a name="2198412">PolicyCenter adds activities to notify retrieval requestors of the success. There may be more than one requestor to retrieve one policy term.</a></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="B_-_Body"><a name="2129745">The following diagram summarizes the elements of this system.</a></div>
      <div class="F_-_Figure"><a name="2198420"><img class="Default" src="images/PCArchivingIntegrationFlow-NOTRealVisio.png" style="display: inline; float: none; left: 0.0; top: 0.0" alt="" /></a></div>
      <h4 class="H2_-_Heading_2"><a name="2083107">Archive Source Plugin</a></h4>
      <div class="B_-_Body"><a name="2038671">Customers using archiving must implement the </a><span class="cv_-_computer_voice">IArchiveSource</span> plugin interface. The responsibility of this plugin is storage and retrieval of archive data from the backing store. The backing store typically is on a different physical computer. The backing store could be anything.</div>
      <div class="B_-_Body"><a name="2066246">Common choices for a backing store include:</a></div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><a name="2038672">Files on a remote file system</a></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><a name="2038673">A document management system document</a></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><a name="2038674">A database row containing a large binary object</a></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="BKN_-_Body_002c_Keep_Next"><a name="2198428">PolicyCenter includes a demonstration implementation of this interface: </a><span class="cv_-_computer_voice">gw.plugin.archive.impl.PCArchivingRecordingPlugin</span>. This implementation writes archive data as files to the server’s local file system.</div>
      <div class="B_-_Body"><a name="2066362">The superclass of the built-in plugin implementation is the base class </a><span class="cv_-_computer_voice">gw.plugin.archiving.ArchiveSource</span>.</div>
      <div class="NI_-_Note_Important">
        <span class="n_-_note">IMPORTANT   </span><a name="2066363">Guidewire provides an archive source plugin implementation for demonstration purposes only. Do not use this in a production system. Implement your own archiving plugin that stores data on an external system.</a></div>
      <div class="B_-_Body"><a name="2038936">To store archive data, PolicyCenter calls the plugin’s </a><span class="cv_-_computer_voice">store</span> method synchronously, waiting for it to complete or fail. </div>
      <div class="B_-_Body"><a name="2038937">To retrieve archive data, PolicyCenter calls the plugin’s </a><span class="cv_-_computer_voice">retrieve</span> method. The only argument the <span class="cv_-_computer_voice">retrieve</span> method gets is a root info object, which is an instance of an entity type that implements the <span class="cv_-_computer_voice">RootInfo</span> interface. A root info object encapsulates a summary of one archived object. The root info object remains in the database after archiving most of the data.</div>
      <div class="B_-_Body"><a name="2198433">In PolicyCenter, the root info object always is a </a><span class="cv_-_computer_voice">PolicyPeriod</span> object. In the APIs or the documentation where you see the interface type <span class="cv_-_computer_voice">RootInfo</span>, this refers to <span class="cv_-_computer_voice">PolicyPeriod</span>. Your plugin implementation must store enough reference information into the <span class="cv_-_computer_voice">PolicyPeriod</span> object and its associated <span class="cv_-_computer_voice">EffectiveDatedFields</span> object to determine how to retrieve any archived document from its backing store.</div>
      <div class="H3_-_Heading_3_outer" style="margin-left: 36pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <h5 class="H3_-_Heading_3_inner" style="width: 18pt; white-space: nowrap"></h5>
            </td>
            <td width="100%">
              <h5 class="H3_-_Heading_3_inner"><a name="2038701">Archive Source Plugin Methods and Archive Transactions</a></h5>
            </td>
          </tr>
        </table>
      </div>
      <div class="B_-_Body"><a name="2038923">It is important to understand that PolicyCenter calls some archive source plugin methods inside an archive transaction and other methods outside a transaction. The behavior varies by plugin method. Be careful to understand any changes to database data outside the transaction, especially with respect to any error conditions.</a></div>
      <div class="B_-_Body"><a name="2038924">For example, PolicyCenter always calls the plugin method </a><span class="cv_-_computer_voice">storeFinally</span> outside the main database transaction for the storage request. If the storage request fails, all PolicyCenter data changes never commit to the database. However, any changes you make during the call to <span class="cv_-_computer_voice">storeFinally</span> do persist to the database. For details, see <a href="javascript:WWHClickedPopup('integration', 'archiving-integration.38.3.html#2038964', '');" title="Archiving Storage Integration Detailed Flow">“Archive Source Plugin Storage Methods”</a>.</div>
      <div class="NW_-_Note_Warning">
        <span class="w_-_warning">WARNING  </span><a name="2040231">Be extremely careful that you understand potential failure conditions and the relationship between each archive method and associated database transactions.</a></div>
      <div class="B_-_Body"><a name="2040121">For details for each plugin method, refer to reference information grouped by purpose of the methods:</a></div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><a href="javascript:WWHClickedPopup('integration', 'archiving-integration.38.3.html#2038964', '');" title="Archiving Storage Integration Detailed Flow" name="2040186">“Archive Source Plugin Storage Methods”</a></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><a href="javascript:WWHClickedPopup('integration', 'archiving-integration.38.4.html#2057627', '');" title="Archive Retrieval Integration Detailed Flow" name="2040201">“Archive Source Plugin Retrieve Methods”</a></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><a href="javascript:WWHClickedPopup('integration', 'archiving-integration.38.5.html#2038421', '');" title="Archive Source Plugin Utility Methods" name="2067067">“Archive Source Plugin Utility Methods”</a></div>
            </td>
          </tr>
        </table>
      </div>
      <h4 class="H2_-_Heading_2"><a name="2198439">Archiving Eligibility Plugin</a></h4>
      <div class="B_-_Body"><a name="2198440">The </a><span class="cv_-_computer_voice">IPCArchivingPlugin</span> plugin interface determines only when to archive a policy term. There are additional built-in algorithms for determining eligibility of archiving. For example, if the term has open jobs, no policy periods will be archived on that term. However, the <span class="cv_-_computer_voice">IPCArchivingPlugin</span> plugin implementation gives you an opportunity to set the archiving date even later than the built-in logic.</div>
      <div class="B_-_Body"><a name="2198441">There is a built-in demonstration implementation called </a><span class="cv_-_computer_voice">PCArchivingPlugin</span>. </div>
      <div class="B_-_Body"><a name="2198442">There is only one method in this plugin interface. Implement the </a><span class="cv_-_computer_voice">getArchiveDate</span> method, which takes a <span class="cv_-_computer_voice">PolicyTerm</span> object. This method must calculate the earliest date that PolicyCenter can archive this policy term. The method must return the date as a <span class="cv_-_computer_voice">Date</span> object, trimmed to represent midnight.</div>
      <div class="B_-_Body"><a name="2198443">The demonstration implementation checks for open claims and returns the maximum date of the set of the following:</a></div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><a name="2198444">all the claim dates for open claims</a></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><a name="2198445">today</a></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="B_-_Body"><a name="2198446">For more implementation details of the default behavior, see the following:</a></div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><a name="2198447">the demonstration implementation class </a><span class="cv_-_computer_voice">PCArchivingPlugin</span> </div>
            </td>
          </tr>
        </table>
      </div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><a href="javascript:WWHClickedPopup('config', 'archiving.44.05.html#2503254', '');" title="Selecting Policy Terms for Archive Eligibility" name="2198451">“Selecting Policy Terms for Archive Eligibility” in the </a><span class="bt_-_book_title"><a href="javascript:WWHClickedPopup('config', 'archiving.44.05.html#2503254', '');" title="Selecting Policy Terms for Archive Eligibility">Configuration Guide</a></span></div>
            </td>
          </tr>
        </table>
      </div>
      <h4 class="H2_-_Heading_2"><a name="2198452">Archiving Web Services in PolicyCenter</a></h4>
      <div class="B_-_Body"><a name="2198453">To manipulate archiving from external systems, call the </a><span class="cv_-_computer_voice">IArchiveAPI</span> web service. This web service is WS-I compliant. For example, check if a policy term is archived, or suspend a policy from further archiving. For more information, see <a href="javascript:WWHClickedPopup('integration', 'webservices-policy.10.18.html#3512952', '');" title="Archiving Web Services">“Archiving Web Services”</a>.</div>
      <h4 class="H2_-_Heading_2"><a name="2157445">Set Encryption Plugin for Encrypted Properties in Archived Objects</a></h4>
      <div class="B_-_Body"><a name="2157462">The </a><span class="cv_-_computer_voice">config.xml</span> configuration parameter <span class="cv_-_computer_voice">DefaultXmlExportIEncryptionId</span> specifies the unique encryption ID of an encryption plugin. </div>
      <div class="B_-_Body"><a name="2157447">If archiving is enabled, the application uses that encryption plugin to encrypt any encrypted fields during XML serialization. For more about encryption unique IDs, see </a><a href="javascript:WWHClickedPopup('integration', 'encryption.18.2.html#2359408', '');" title="Encryption Integration Overview">“Writing Your Encryption Plugin”</a>.</div>
      <div class="NW_-_Note_Warning">
        <span class="w_-_warning">WARNING  </span><a name="2157451">To avoid accidentally archiving encrypted properties as unencrypted data, be sure to set the parameter </a><span class="cv_-_computer_voice">DefaultXmlExportIEncryptionId</span>.</div>
      <script type="text/javascript" language="JavaScript1.2">
        <!--
          // Clear related topics
          //
          WWHClearRelatedTopics();

          document.writeln(WWHRelatedTopicsInlineHTML());
        // -->
      </script>
    </blockquote>
    <script type="text/javascript" language="JavaScript1.2">
      <!--
        document.write(WWHRelatedTopicsDivTag() + WWHPopupDivTag() + WWHALinksDivTag());
      // -->
    </script>
  </body>
</html>