<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xml:lang="en" lang="en" xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
    <meta http-equiv="Content-Style-Type" content="text/css" />
    <!-- MOTW-DISABLED saved from url=(0014)about:internet -->
    <title>Renewal Plugin</title>
    <link rel="StyleSheet" href="css/plugins-policy.css" type="text/css" media="all" />
    <link rel="StyleSheet" href="css/webworks.css" type="text/css" media="all" />
    <link rel="StyleSheet" href="css/css-guidewire-extra.css" type="text/css" media="all" />
    <script type="text/javascript" language="JavaScript1.2" src="wwhdata/common/context.js"></script>
    <script type="text/javascript" language="JavaScript1.2" src="wwhdata/common/towwhdir.js"></script>
    <script type="text/javascript" language="JavaScript1.2" src="wwhdata/common/wwhpagef.js"></script>
    <script type="text/javascript" language="JavaScript1.2">
      <!--
        var  WebWorksRootPath = "";
      // -->
    </script>
    <script type="text/javascript" language="JavaScript1.2">
      <!--
        // Set reference to top level help frame
        //
        var  WWHFrame = WWHGetWWHFrame("", true);
      // -->
    </script>
    <script type="text/javascript" language="JavaScript1.2" src="scripts/expand.js"></script>
    <!-- THE FOLLOWING IS A GUIDEWIRE STYLE DEFINITION FOR THE LINK TO THIS FEATURE -->
    <link rel="StyleSheet" href="css/css-guidewire-extra.css" type="text/css" media="all" />
    <!-- THE FOLLOWING IS A GUIDEWIRE GSCRIPT FUNCTION FOR THE LINK TO THIS FEATURE -->
    <script type="text/javascript">
function guidewire_selectall()
{
var text_val=eval("document.linktothisurlform.urlfield");
text_val.focus();
text_val.select();
}
</script>
  </head>
  <body onLoad="WWHUpdate();" onUnload="WWHUnload();" onKeyDown="WWHHandleKeyDown((document.all||document.getElementById||document.layers)?event:null);" onKeyPress="WWHHandleKeyPress((document.all||document.getElementById||document.layers)?event:null);" onKeyUp="WWHHandleKeyUp((document.all||document.getElementById||document.layers)?event:null);">
    <!-- THE FOLLOWING IS A GUIDEWIRE DIV FOR THE 'LINK TO THIS' FEATURE -->
    <div id="linkToThisPage" class="popup" style="display: none;">
      <div class="popupTitle">Link Directly to This Page 
           <a href="#" onclick="var thePopup = getElementById('linkToThisPage');thePopup.style.display='none';return false;"><img class="popupClosebox" src="wwhelp/wwhimpl/common/images/close.gif" /></a></div>
      <div style="padding:6px;">
        <div class="popupText" id="linkToThisPageBookmark">An error has occurred if you see this messsage.</div>
        <form name="linktothisurlform" method="post" action="" style="width:275px;margin:0px">
          <input type="text" class="popupURLText" id="linkToThisPageURL" name="urlfield" rows="1" cols="55" onClick="guidewire_selectall();" onFocus="guidewire_selectall();"></input>
        </form>
      </div>
    </div>
    <br />
    <div class="WebWorks_Breadcrumbs" style="text-align: left;">
      <span>PolicyCenter Integration Guide</span> : 
    <span class="WebWorks_Breadcrumbs" style="text-align: left;"><a class="WebWorks_Breadcrumb_Link" href="p-plugins.html#2400468">Plugins</a> : <a class="WebWorks_Breadcrumb_Link" href="plugins-policy.13.01.html#2400468">Account and Policy Plugins</a> : Renewal Plugin</span></div>
    <hr align="left" />
    <blockquote>
      <h3 class="H1_-_Heading_1"><a name="2400468">Renewal Plugin</a></h3>
      <div class="B_-_Body"><a name="2400692">To customize how PolicyCenter handles renewals, implement </a><span class="cv_-_computer_voice">IPolicyRenewalPlugin</span>. For example, this plugin determines when to start a <span class="cv_-_computer_voice">Renewal</span> job for a <span class="cv_-_computer_voice">PolicyPeriod</span>. However, note that this plugin does not actually create the <span class="cv_-_computer_voice">Renewal</span> job itself. Instead, the work queue called <span class="cv_-_computer_voice">PolicyRenewalStart</span> actually starts the renewal job. A work queue is like a built-in batch process except that it automatically parallelizes the work across a PolicyCenter cluster. The renewal work queue looks for policy renewals to start. By default, this process runs daily at 1:00 AM. For more information about work queues, see:</div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><a href="javascript:WWHClickedPopup('admin', 'batch.11.03.html#2165671', '');" title="Work Queues" name="2406550">“Work Queues” in the </a><span class="bt_-_book_title"><a href="javascript:WWHClickedPopup('admin', 'batch.11.03.html#2165671', '');" title="Work Queues">System Administration Guide</a></span></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><a href="javascript:WWHClickedPopup('admin', 'batch.11.06.html#2166105', '');" title="Scheduling Work Queue Writers and Batch Processes" name="2406573">“Scheduling Work Queue Writers and Batch Processes” in the </a><span class="bt_-_book_title"><a href="javascript:WWHClickedPopup('admin', 'batch.11.06.html#2166105', '');" title="Scheduling Work Queue Writers and Batch Processes">System Administration Guide</a></span></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><a href="javascript:WWHClickedPopup('admin', 'batch.11.06.html#2166105', '');" title="Scheduling Work Queue Writers and Batch Processes" name="2406588">“Scheduling Work Queue Writers and Batch Processes” in the </a><span class="bt_-_book_title"><a href="javascript:WWHClickedPopup('admin', 'batch.11.06.html#2166105', '');" title="Scheduling Work Queue Writers and Batch Processes">System Administration Guide</a></span></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="B_-_Body"><a name="2408280">The most important method in the </a><span class="cv_-_computer_voice">IPolicyRenewalPlugin</span> plugin interface is the <span class="cv_-_computer_voice">shouldStartRenewal</span> method. It determines whether to start the renewal job, as previously mentioned. Its only argument is a policy period and returns <span class="cv_-_computer_voice">true</span> if and only if the policy period is ready for a new renewal.</div>
      <div class="B_-_Body"><a name="2408089">The built-in implementation evaluates the date that the renewal normally starts. To do this it calls another method on the plugin called </a><span class="cv_-_computer_voice">getRenewalStartDate</span>. If you write your own version of this plugin, refer to the built-in implementation and copy the code from the <span class="cv_-_computer_voice">getRenewalStartDate</span> method if appropriate. </div>
      <div class="NI_-_Note_Important">
        <span class="n_-_note">IMPORTANT   </span><a name="2407969">If you write your own version of this plugin, refer to the built-in implementation class </a><span class="cv_-_computer_voice">gw.plugin.job.impl.PolicyRenewalPlugin</span>. Copy the <span class="cv_-_computer_voice">getRenewalStartDate</span> method as appropriate.</div>
      <div class="B_-_Body"><a name="2407970">For the built-in implementation:</a></div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><a name="2407977">If there are open conflicting jobs on the policy, it prevents renewal until the user handles these issues. </a></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><a name="2407992">If there are no conflicting jobs, this method returns true if </a><span class="cv_-_computer_voice">getRenewalStartDate()</span> returns a date in the past. </div>
            </td>
          </tr>
        </table>
      </div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><a name="2408001">If there are conflicting jobs, this method returns true if </a><span class="cv_-_computer_voice">getRenewalStartDate()</span> returns a date less than three days in the past. </div>
            </td>
          </tr>
        </table>
      </div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><a name="2408008">All other cases return </a><span class="cv_-_computer_voice">false</span>.</div>
            </td>
          </tr>
        </table>
      </div>
      <h6 class="HS_-_Head_Sub"><a name="2403785">Get Renewal Start Date</a></h6>
      <div class="B_-_Body"><a name="2408119">The other method you must implement in this plugin is the </a><span class="cv_-_computer_voice">getRenewalStartDate</span> method. This method must determine the date on or after which to start a renewal job for a given <span class="cv_-_computer_voice">PolicyPeriod</span>. In contrast to the <span class="cv_-_computer_voice">shouldStartRenewal</span> method, the <span class="cv_-_computer_voice">getRenewalStartDate</span> method is primarily used for display purposes. It is also useful for testing purposes. Within this plugin, only the <span class="cv_-_computer_voice">shouldStartRenewal</span> method determines authoritatively whether the policy is ready for renewal. </div>
      <div class="B_-_Body"><a name="2404171">The built-in implementation evaluates the given </a><span class="cv_-_computer_voice">PolicyPeriod</span> to determine the earliest date that PolicyCenter creates a renewal job for this policy period. This implementation gets a notification date for the <span class="cv_-_computer_voice">PolicyPeriod</span> from the currently-registered implementation of the <span class="cv_-_computer_voice">INotificationPlugin</span>. The built-in implementation then adds further lead time based on the product and period end date of the policy period. It always truncates the date to midnight on that date. In other words it removes the time-of-day part of that date. This happens because it forces any programmatic date comparison of the date that this plugin returns to always be a day (not time) comparison.</div>
      <h6 class="HS_-_Head_Sub"><a name="2408108">Get Automated Renewal User</a></h6>
      <div class="B_-_Body"><a name="2408132">Your plugin must be able to get the PolicyCenter user to associate the renewal policy period. Implement the </a><span class="cv_-_computer_voice">getAutomatedRenewalUser</span> method, which takes a <span class="cv_-_computer_voice">PolicyPeriod</span> and returns a <span class="cv_-_computer_voice">User</span>.</div>
      <div class="B_-_Body"><a name="2408167">The built-in behavior finds and returns the PolicyCenter user with the credential </a><span class="cv_-_computer_voice">renewal_daemon</span>.</div>
      <h6 class="HS_-_Head_Sub"><a name="2408159">Determine Whether to Use Renewal Offers</a></h6>
      <div class="B_-_Body"><a name="2408359">Your plugin must be able to determine whether this is the kind of policy period appropriate for the PolicyCenter renewal offer flow. The built-in behavior checks if the current job type for this policy period is </a><span class="cv_-_computer_voice">Renewal</span> and also is a business auto product. You can customize this logic for each product to use all one flow, or a mix of flows depending on the product or other custom logic.</div>
      <div class="N_-_Note">
        <span class="n_-_note">Note: </span><a name="2408342">This topic discusses </a><span class="e_-_emphasis">renewal offers</span>. There is important documentation about how renewal offers work in the billing integration documentation in the subtopic <a href="javascript:WWHClickedPopup('integration', 'billing-pc.31.11.html#3425962', '');" title="Billing Implications of Renewals or Rewrites">“Billing Implications of Renewals or Rewrites”</a>.</div>
      <script type="text/javascript" language="JavaScript1.2">
        <!--
          // Clear related topics
          //
          WWHClearRelatedTopics();

          document.writeln(WWHRelatedTopicsInlineHTML());
        // -->
      </script>
    </blockquote>
    <script type="text/javascript" language="JavaScript1.2">
      <!--
        document.write(WWHRelatedTopicsDivTag() + WWHPopupDivTag() + WWHALinksDivTag());
      // -->
    </script>
  </body>
</html>