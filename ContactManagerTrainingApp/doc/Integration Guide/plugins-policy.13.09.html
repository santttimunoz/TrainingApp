<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xml:lang="en" lang="en" xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
    <meta http-equiv="Content-Style-Type" content="text/css" />
    <!-- MOTW-DISABLED saved from url=(0014)about:internet -->
    <title>Location Plugin</title>
    <link rel="StyleSheet" href="css/plugins-policy.css" type="text/css" media="all" />
    <link rel="StyleSheet" href="css/webworks.css" type="text/css" media="all" />
    <link rel="StyleSheet" href="css/css-guidewire-extra.css" type="text/css" media="all" />
    <script type="text/javascript" language="JavaScript1.2" src="wwhdata/common/context.js"></script>
    <script type="text/javascript" language="JavaScript1.2" src="wwhdata/common/towwhdir.js"></script>
    <script type="text/javascript" language="JavaScript1.2" src="wwhdata/common/wwhpagef.js"></script>
    <script type="text/javascript" language="JavaScript1.2">
      <!--
        var  WebWorksRootPath = "";
      // -->
    </script>
    <script type="text/javascript" language="JavaScript1.2">
      <!--
        // Set reference to top level help frame
        //
        var  WWHFrame = WWHGetWWHFrame("", true);
      // -->
    </script>
    <script type="text/javascript" language="JavaScript1.2" src="scripts/expand.js"></script>
    <!-- THE FOLLOWING IS A GUIDEWIRE STYLE DEFINITION FOR THE LINK TO THIS FEATURE -->
    <link rel="StyleSheet" href="css/css-guidewire-extra.css" type="text/css" media="all" />
    <!-- THE FOLLOWING IS A GUIDEWIRE GSCRIPT FUNCTION FOR THE LINK TO THIS FEATURE -->
    <script type="text/javascript">
function guidewire_selectall()
{
var text_val=eval("document.linktothisurlform.urlfield");
text_val.focus();
text_val.select();
}
</script>
  </head>
  <body onLoad="WWHUpdate();" onUnload="WWHUnload();" onKeyDown="WWHHandleKeyDown((document.all||document.getElementById||document.layers)?event:null);" onKeyPress="WWHHandleKeyPress((document.all||document.getElementById||document.layers)?event:null);" onKeyUp="WWHHandleKeyUp((document.all||document.getElementById||document.layers)?event:null);">
    <!-- THE FOLLOWING IS A GUIDEWIRE DIV FOR THE 'LINK TO THIS' FEATURE -->
    <div id="linkToThisPage" class="popup" style="display: none;">
      <div class="popupTitle">Link Directly to This Page 
           <a href="#" onclick="var thePopup = getElementById('linkToThisPage');thePopup.style.display='none';return false;"><img class="popupClosebox" src="wwhelp/wwhimpl/common/images/close.gif" /></a></div>
      <div style="padding:6px;">
        <div class="popupText" id="linkToThisPageBookmark">An error has occurred if you see this messsage.</div>
        <form name="linktothisurlform" method="post" action="" style="width:275px;margin:0px">
          <input type="text" class="popupURLText" id="linkToThisPageURL" name="urlfield" rows="1" cols="55" onClick="guidewire_selectall();" onFocus="guidewire_selectall();"></input>
        </form>
      </div>
    </div>
    <br />
    <div class="WebWorks_Breadcrumbs" style="text-align: left;">
      <span>PolicyCenter Integration Guide</span> : 
    <span class="WebWorks_Breadcrumbs" style="text-align: left;"><a class="WebWorks_Breadcrumb_Link" href="p-plugins.html#2380684">Plugins</a> : <a class="WebWorks_Breadcrumb_Link" href="plugins-policy.13.01.html#2380684">Account and Policy Plugins</a> : Location Plugin</span></div>
    <hr align="left" />
    <blockquote>
      <h3 class="H1_-_Heading_1"><a name="2380684">Location Plugin</a></h3>
      <div class="B_-_Body"><a name="2380754">You can customize how PolicyCenter treats account locations and policy locations using the location plugin (</a><span class="cv_-_computer_voice">AccountLocationPlugin</span>). The built-in implementation of this plugin is <span class="cv_-_computer_voice">AccountLocationPluginImpl</span>.</div>
      <div class="B_-_Body"><a name="2380766">The basic tasks you can customize are:</a></div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><a name="2382242">Customize how two location records are compared to see if they represent the same location or two different locations. </a></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><a name="2382250">Customize how to copy your data model extension properties during cloning of a location entity.</a></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="B_-_Body"><a name="2391052">If you want to add custom code after creating a primary location or before deleting a location, modify each policy line’s methods called </a><span class="cv_-_computer_voice">onPrimaryLocationCreation</span> and <span class="cv_-_computer_voice">preLocationDelete</span>. Similarly, to define whether a location is safe to delete, modify each policy line’s <span class="cv_-_computer_voice">canSafelyDeleteLocation</span> method.</div>
      <h6 class="HS_-_Head_Sub"><a name="2443401">See also</a></h6>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><a href="javascript:WWHClickedPopup('productmodel', 'lob-locations.21.2.html#1093538', '');" title="Methods to Remove a Location from a Policy Line" name="2443415">“Methods to Remove a Location from a Policy Line” in the </a><span class="bt_-_book_title"><a href="javascript:WWHClickedPopup('productmodel', 'lob-locations.21.2.html#1093538', '');" title="Methods to Remove a Location from a Policy Line">Product Model Guide</a></span></div>
            </td>
          </tr>
        </table>
      </div>
      <h4 class="H2_-_Heading_2"><a name="2382260">Comparing Locations</a></h4>
      <div class="B_-_Body"><a name="2382266">Your </a><span class="cv_-_computer_voice">areAccountLocationsEquivalent</span> method must return <span class="cv_-_computer_voice">true</span> if two <span class="cv_-_computer_voice">AccountLocation</span> entities passed as parameters are effectively equal. </div>
      <div class="B_-_Body"><a name="2382267">The behavior in the built-in implementation returns </a><span class="cv_-_computer_voice">true</span> if and only if the following properties match: <span class="cv_-_computer_voice">AddressLine1</span>, <span class="cv_-_computer_voice">AddressLine2</span>, <span class="cv_-_computer_voice">AddressLine3</span>, <span class="cv_-_computer_voice">City</span>, <span class="cv_-_computer_voice">State</span>, and <span class="cv_-_computer_voice">PostalCode</span>.</div>
      <div class="B_-_Body"><a name="2382287">If you have data model extension properties on your locations that are important in the comparison, customize this logic as needed. </a></div>
      <h4 class="H2_-_Heading_2"><a name="2382731">Customizing Location Cloning</a></h4>
      <div class="B_-_Body"><a name="2382732">If you have data model extension properties or arrays on an </a><span class="cv_-_computer_voice">AccountLocation</span> or one of its subtypes, copy them if an account location entity clones to another account location. Implement this plugin’s <span class="cv_-_computer_voice">cloneExtensions</span> method to copy these properties, including any foreign keys or array information. The built-in implementation does nothing.</div>
      <div class="B_-_Body"><a name="2382733">It is critical that you not make any changes to the related </a><span class="cv_-_computer_voice">PolicyPeriod</span> entities, <span class="cv_-_computer_voice">Account</span> entities, or any other entity within this method. PolicyCenter calls this method while binding a <span class="cv_-_computer_voice">PolicyPeriod</span> entity. If you modify any entity other than the new location contact, the policy could become out of sync and create serious problems later on.</div>
      <div class="NW_-_Note_Warning">
        <span class="w_-_warning">WARNING  </span><a name="2382734">Only copy your data model extensions from the old account contact to the new one and do nothing else in this method. In particular, this method must not make changes to a related </a><span class="cv_-_computer_voice">PolicyPeriod</span>, <span class="cv_-_computer_voice">Account</span>, or other entity or else serious problems can occur.</div>
      <div class="B_-_Body"><a name="2568974">The method signature is:</a></div>
      <PRE class="CF_-_Code_First_Line"><a name="2568977">override function cloneExtensions(oldLocation: AccountLocation, newLocation: AccountLocation){</a></PRE>
      <PRE class="CL_-_Code_Last_Line"><a name="2568984">}</a></PRE>
      <script type="text/javascript" language="JavaScript1.2">
        <!--
          // Clear related topics
          //
          WWHClearRelatedTopics();

          document.writeln(WWHRelatedTopicsInlineHTML());
        // -->
      </script>
    </blockquote>
    <script type="text/javascript" language="JavaScript1.2">
      <!--
        document.write(WWHRelatedTopicsDivTag() + WWHPopupDivTag() + WWHALinksDivTag());
      // -->
    </script>
  </body>
</html>