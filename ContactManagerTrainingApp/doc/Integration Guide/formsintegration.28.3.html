<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xml:lang="en" lang="en" xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
    <meta http-equiv="Content-Style-Type" content="text/css" />
    <!-- MOTW-DISABLED saved from url=(0014)about:internet -->
    <title>Forms Inferences Classes</title>
    <link rel="StyleSheet" href="css/formsintegration.css" type="text/css" media="all" />
    <link rel="StyleSheet" href="css/webworks.css" type="text/css" media="all" />
    <link rel="StyleSheet" href="css/css-guidewire-extra.css" type="text/css" media="all" />
    <script type="text/javascript" language="JavaScript1.2" src="wwhdata/common/context.js"></script>
    <script type="text/javascript" language="JavaScript1.2" src="wwhdata/common/towwhdir.js"></script>
    <script type="text/javascript" language="JavaScript1.2" src="wwhdata/common/wwhpagef.js"></script>
    <script type="text/javascript" language="JavaScript1.2">
      <!--
        var  WebWorksRootPath = "";
      // -->
    </script>
    <script type="text/javascript" language="JavaScript1.2">
      <!--
        // Set reference to top level help frame
        //
        var  WWHFrame = WWHGetWWHFrame("", true);
      // -->
    </script>
    <script type="text/javascript" language="JavaScript1.2" src="scripts/expand.js"></script>
    <!-- THE FOLLOWING IS A GUIDEWIRE STYLE DEFINITION FOR THE LINK TO THIS FEATURE -->
    <link rel="StyleSheet" href="css/css-guidewire-extra.css" type="text/css" media="all" />
    <!-- THE FOLLOWING IS A GUIDEWIRE GSCRIPT FUNCTION FOR THE LINK TO THIS FEATURE -->
    <script type="text/javascript">
function guidewire_selectall()
{
var text_val=eval("document.linktothisurlform.urlfield");
text_val.focus();
text_val.select();
}
</script>
  </head>
  <body onLoad="WWHUpdate();" onUnload="WWHUnload();" onKeyDown="WWHHandleKeyDown((document.all||document.getElementById||document.layers)?event:null);" onKeyPress="WWHHandleKeyPress((document.all||document.getElementById||document.layers)?event:null);" onKeyUp="WWHHandleKeyUp((document.all||document.getElementById||document.layers)?event:null);">
    <!-- THE FOLLOWING IS A GUIDEWIRE DIV FOR THE 'LINK TO THIS' FEATURE -->
    <div id="linkToThisPage" class="popup" style="display: none;">
      <div class="popupTitle">Link Directly to This Page 
           <a href="#" onclick="var thePopup = getElementById('linkToThisPage');thePopup.style.display='none';return false;"><img class="popupClosebox" src="wwhelp/wwhimpl/common/images/close.gif" /></a></div>
      <div style="padding:6px;">
        <div class="popupText" id="linkToThisPageBookmark">An error has occurred if you see this messsage.</div>
        <form name="linktothisurlform" method="post" action="" style="width:275px;margin:0px">
          <input type="text" class="popupURLText" id="linkToThisPageURL" name="urlfield" rows="1" cols="55" onClick="guidewire_selectall();" onFocus="guidewire_selectall();"></input>
        </form>
      </div>
    </div>
    <br />
    <div class="WebWorks_Breadcrumbs" style="text-align: left;">
      <span>PolicyCenter Integration Guide</span> : 
    <span class="WebWorks_Breadcrumbs" style="text-align: left;"><a class="WebWorks_Breadcrumb_Link" href="p-forms.html#2709917">Policy-related Integrations</a> : <a class="WebWorks_Breadcrumb_Link" href="formsintegration.28.1.html#2709917">Forms Integration</a> : Forms Inferences Classes</span></div>
    <hr align="left" />
    <blockquote>
      <h3 class="H1_-_Heading_1"><a name="2709917">Forms Inferences Classes</a></h3>
      <div class="B_-_Body"><a name="2702905">You configure basic forms settings in Studio by creating and editing a </a><span class="cv_-_computer_voice">FormPattern</span> in the <span class="ui_-_UI_element">Forms</span> tab in a policy line window. As part of that editor, you provide the fully-qualified class name of a Gosu class that extends the abstract class <span class="cv_-_computer_voice">FormData</span>. Your class must generate data that describes the variable data of the form. This data must not include boilerplate text. Such classes are known as <span class="e_-_emphasis">forms inference classes</span>. </div>
      <div class="B_-_Body"><a name="2715009">You can subclass </a><span class="cv_-_computer_voice">FormData</span> directly for each form, or create your own subclasses of <span class="cv_-_computer_voice">FormData</span> that provide common behaviors or data. For example, PolicyCenter includes a class called <span class="cv_-_computer_voice">PAFormData</span> that defines some common behaviors for the built-in personal auto forms. Individual forms extend <span class="cv_-_computer_voice">PAFormData</span> instead of <span class="cv_-_computer_voice">FormData</span>.</div>
      <div class="B_-_Body"><a name="2715013">After a job finishes, PolicyCenter triggers forms inference and then raises a messaging event. You can catch the messaging event in your Event Fired Rules to generate messages to the external forms printing system. For example, the submission job process contains code like the following:</a></div>
      <PRE class="CF_-_Code_First_Line"><a name="2713541">FormInferenceEngine.Instance.inferPreBindForms(_branch)</a></PRE>
      <PRE class="CL_-_Code_Last_Line"><a name="2713542">_branch.addEvent("IssueSubmission")</a></PRE>
      <h6 class="HS_-_Head_Sub"><a name="2740277">See also</a></h6>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><a href="javascript:WWHClickedPopup('integration', 'formsintegration.28.3.html#2710573', '');" title="Forms Inferences Classes" name="2713533">“Creating Inference Data and XML”</a></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><a href="javascript:WWHClickedPopup('integration', 'formsintegration.28.4.html#2711561', '');" title="Forms Messaging" name="2740809">“Forms Messaging”</a></div>
            </td>
          </tr>
        </table>
      </div>
      <h4 class="H2_-_Heading_2"><a name="2710573">Creating Inference Data and XML</a></h4>
      <div class="B_-_Body"><a name="2710360">There are two main steps to creating the inference data in your subclass of </a><span class="cv_-_computer_voice">FormData</span>:</div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><a name="2710361">Create inference data, which can be any Gosu data that you store in private properties in the </a><span class="cv_-_computer_voice">FormData</span> instance. This is used later by other methods in your inference class.</div>
            </td>
          </tr>
        </table>
      </div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><a name="2710375">Create XML data from inference data using the inference data that your class generated previously. Use </a><span class="cv_-_computer_voice">XmlNode</span> objects in Gosu to generate the XML-formatted data. </div>
            </td>
          </tr>
        </table>
      </div>
      <h6 class="HS_-_Head_Sub"><a name="2741098">See also</a></h6>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><a name="2741034">For more information about using </a><span class="cv_-_computer_voice">XmlNode</span> objects, see <a href="javascript:WWHClickedPopup('gosu', 'xml.21.01.html#1470967', '');" title="Gosu and XML">“Gosu and XML” in the </a><span class="bt_-_book_title"><a href="javascript:WWHClickedPopup('gosu', 'xml.21.01.html#1470967', '');" title="Gosu and XML">Gosu Reference Guide</a></span>.</div>
            </td>
          </tr>
        </table>
      </div>
      <div class="H3_-_Heading_3_outer" style="margin-left: 36pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <h5 class="H3_-_Heading_3_inner" style="width: 18pt; white-space: nowrap"></h5>
            </td>
            <td width="100%">
              <h5 class="H3_-_Heading_3_inner"><a name="2710461">Inference Data</a></h5>
            </td>
          </tr>
        </table>
      </div>
      <div class="B_-_Body"><a name="2710243">The important method for creating inference data is </a><span class="cv_-_computer_voice">populateInferenceData</span>, called by the forms inference engine to populate this instance with the appropriate data from the policy graph. This method is called immediately after the instance of the <span class="cv_-_computer_voice">FormData</span> is created.</div>
      <div class="B_-_Body"><a name="2711301">One parameter to the method is an </a><span class="e_-_emphasis">inference context object</span> (<span class="cv_-_computer_voice">FormInferenceContext</span>). An inference context object contains important information, such as:</div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><a name="2715024">The </a><span class="cv_-_computer_voice">PolicyPeriod</span>, in the <span class="cv_-_computer_voice">Period</span> property of the context object</div>
            </td>
          </tr>
        </table>
      </div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><a name="2715032">The set of forms in the group, in the </a><span class="cv_-_computer_voice">Patterns</span> property of the context object</div>
            </td>
          </tr>
        </table>
      </div>
      <div class="B_-_Body"><a name="2712553">The other parameter is a set of available states that contains all states in which this form was found to be available. If a state-specific form is available that replaces the national version of a form, for a national form those states automatically do not appear in the set. This auto-filtering feature by jurisdiction based on group code settings in the product model is called </a><span class="e_-_emphasis">jurisdictional replacement</span>.</div>
      <div class="B_-_Body"><a name="2712555">The recommend approach for implementing this is to generate and then store inference data in a private variable so it can be read by other methods in your class. For example, a built-in personal auto form can create towing labor coverage data like the following in its </a><span class="cv_-_computer_voice">populateInferenceData</span> method:</div>
      <PRE class="CM_-_Code_Middle_Line"><a name="2710337">var towingInfoSet = mapVehicles(context, \ v -&gt; v.PATowingLaborCovExists, \ v -&gt; createTowingInfo(v))</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2710332">&nbsp;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2710488">_towingInfo = towingInfoSet.toList().sortBy(\ info -&gt; info.Vin)</a></PRE>
      <div class="B_-_Body"><a name="2710489">In the preceding example, </a><span class="cv_-_computer_voice">mapVehicles</span> uses a <span class="cv_-_computer_voice">mapVehicles</span> method implemented in <span class="cv_-_computer_voice">PAFormData.</span> It uses the helper method <span class="cv_-_computer_voice">mapArrayToSet</span>. The result of <span class="cv_-_computer_voice">mapVehicles</span> is a <span class="cv_-_computer_voice">Map</span> object mapping vehicles to towing information data created by another helper method. Finally, the result is converted to a list (<span class="cv_-_computer_voice">java.util.List</span>) and sorted by the vehicle identification number.</div>
      <div class="N_-_Note">
        <span class="n_-_note">Note: </span><a name="2711470">The final result is a list (not an </a><span class="cv_-_computer_voice">XMLNode</span> nor a XML-formatted text). You must store it in a private variable that you define in your own <span class="cv_-_computer_voice">FormData</span> subclass. </div>
      <h6 class="HS_-_Head_Sub"><a name="2740583">See also</a></h6>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><a name="2740596">For more information about </a><span class="cv_-_computer_voice">mapArrayToSet</span>, see <a href="javascript:WWHClickedPopup('integration', 'formsintegration.28.3.html#2710189', '');" title="Forms Inferences Classes">“Form Data Helper Functions”</a>.</div>
            </td>
          </tr>
        </table>
      </div>
      <div class="H3_-_Heading_3_outer" style="margin-left: 36pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <h5 class="H3_-_Heading_3_inner" style="width: 18pt; white-space: nowrap"></h5>
            </td>
            <td width="100%">
              <h5 class="H3_-_Heading_3_inner"><a name="2710490">XML of Inference Data</a></h5>
            </td>
          </tr>
        </table>
      </div>
      <div class="B_-_Body"><a name="2715674">The important method for exporting the inference data is the </a><span class="cv_-_computer_voice">addDataToContentNodeForExport</span> method. Your method must take your inference data stored in private variables and add child XML nodes to the <span class="cv_-_computer_voice">XMLNode</span> that is provided as a parameter.</div>
      <div class="B_-_Body"><a name="2711521">For example, the same built-in personal auto form described earlier uses the following code to generate XML data from that list in the </a><span class="cv_-_computer_voice">_towingInfo</span> variable:</div>
      <PRE class="CF_-_Code_First_Line"><a name="2710418">override function addDataToContentNodeForExport(contentNode: XMLNode) : void</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2710353">  {</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2710354">    var node = createScheduleNode("Vehicles", "Vehicle", </a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2714771">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;_towingInfo.map(\info -&gt; info.Vin + " - " + info.Premium))</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2710355">    contentNode.Children.add(node)</a></PRE>
      <PRE class="CL_-_Code_Last_Line"><a name="2710356">  }</a></PRE>
      <div class="B_-_Body"><a name="2711001">The XML output of your inference exports to text and persists to the database with the form. This persisted version of the XML data has a special purpose. It determines whether a change to a policy triggers printing of a new form. </a></div>
      <div class="B_-_Body"><a name="2711087">The XML data contains only the data that changes and is unique to this policy on the form. If the policy changes but your forms inference class generates the same XML for it, by definition the form did not change. If the XML exported is different after a policy change or if it is newly available, PolicyCenter knows that this is a new form. See </a><a href="javascript:WWHClickedPopup('integration', 'formsintegration.28.3.html#2741199', '');" title="Forms Inferences Classes">“Determining Whether to Add or Reprint a Form”</a>.</div>
      <div class="B_-_Body"><a name="2712584">In addition to the </a><span class="cv_-_computer_voice">PolicyPeriod.Forms</span> property that contains all forms for the policy, PolicyCenter tracks new forms specially from the complete list of forms in the <span class="cv_-_computer_voice">PolicyPeriod.NewlyAddedForms</span> property. Some of these forms may be new forms and some may be forms to reprint because of recent policy changes.</div>
      <div class="B_-_Body"><a name="2712585">You might need one form to be duplicated for a series of items, such as separate duplicate forms for each vehicle rather than one form that lists all vehicles. See </a><a href="javascript:WWHClickedPopup('integration', 'formsintegration.28.3.html#2714505', '');" title="Forms Inferences Classes">“Handling Multiple Instances of One Form”</a> for important information on this topic.</div>
      <div class="B_-_Body"><a name="2712852">Because PolicyCenter uses the XML output to determine whether forms need to be reprinted, in general your XML contains only the critical variable data for this form. Be careful not to include extra data that might falsely tell PolicyCenter that this form must be reprinted. However, in some cases you might want to include XML data that might be useful metadata for your message to the external system but not to compare forms for changes. </a></div>
      <div class="B_-_Body"><a name="2713499">You can omit certain nodes or information in the node by adding special attributes to the XML nodes. Additionally, the </a><span class="cv_-_computer_voice">FormData</span> data class has methods on it you can use to conveniently add these attributes to an existing <span class="cv_-_computer_voice">XMLNode</span>. If you call the methods, they return the original node back to make it easier to wrap or chain method calls to multiple methods or other APIs.</div>
      <div class="B_-_Body"><a name="2713474">For example, you can store data in attributes and use important codes or IDs for comparisons. You can, however, ignore attributes such as class code descriptions that can change without requiring forms to be reprinted. Use the </a><span class="cv_-_computer_voice">ignoreAttributes</span> attribute for this feature.</div>
      <div class="B_-_Body"><a name="2713475">Alternatively, if you package your data as text content on a child node, set child nodes for package names to </a><span class="cv_-_computer_voice">ignoreAll</span> so PolicyCenter ignores them during comparison.</div>
      <div class="B_-_Body"><a name="2713433">The following table lists the purpose, the attribute on an </a><span class="cv_-_computer_voice">XMLNode</span> that you can set to have this behavior, and the method name you can use to add this attribute.</div>
      <div class="T_-_Table"><a name="2712890">&nbsp;</a></div>
      <table class="withHeading" style="text-align: left" border="0" cellpadding="10" cellspacing="0" summary="">
        <caption></caption>
        <tr>
          <td style="border-bottom-color: #000000; border-bottom-style: solid; border-bottom-width: 0.5pt; border-top-color: #000000; border-top-style: solid; border-top-width: 0.5pt; padding-bottom: 4pt; padding-left: 2pt; padding-right: 8pt; padding-top: 0pt; vertical-align: bottom">
            <div class="TH_-_Table_Heading"><a name="2713131">Attribute name and method name</a></div>
          </td>
          <td style="border-bottom-color: #000000; border-bottom-style: solid; border-bottom-width: 0.5pt; border-top-color: #000000; border-top-style: solid; border-top-width: 0.5pt; padding-bottom: 4pt; padding-left: 2pt; padding-right: 8pt; padding-top: 0pt; vertical-align: bottom">
            <div class="TH_-_Table_Heading"><a name="2713133">Description</a></div>
          </td>
        </tr>
        <tr>
          <td style="border-bottom-color: #c0d1d1; border-bottom-style: solid; border-bottom-width: 0.15pt; border-top-color: #000000; border-top-style: solid; border-top-width: 0.5pt; padding-bottom: 4pt; padding-left: 2pt; padding-right: 8pt; padding-top: 0pt; vertical-align: top">
            <div class="TT_-_Table_Text" style="color: #000000; font-family: &quot;Lucida Sans Typewriter&quot;; font-style: normal; font-variant: normal; font-weight: normal; margin-top: 3.0pt; text-transform: none; vertical-align: baseline"><span class="cvt_-_computer_voice_table"><a name="2713135">ignoreAll</a></span></div>
          </td>
          <td style="border-bottom-color: #c0d1d1; border-bottom-style: solid; border-bottom-width: 0.15pt; border-top-color: #000000; border-top-style: solid; border-top-width: 0.5pt; padding-bottom: 4pt; padding-left: 2pt; padding-right: 8pt; padding-top: 0pt; vertical-align: top">
            <div class="TT_-_Table_Text"><a name="2713137">Indicates a node to ignore during comparison. If comparing children of two XML nodes, PolicyCenter strips out and ignores all child nodes if its </a><span class="cvt_-_computer_voice_table">ignoreAll</span> attribute has the value <span class="cvt_-_computer_voice_table">"true"</span>.</div>
          </td>
        </tr>
        <tr>
          <td style="border-bottom-color: #c0d1d1; border-bottom-style: solid; border-bottom-width: 0.15pt; border-top-color: #c0d1d1; border-top-style: solid; border-top-width: 0.15pt; padding-bottom: 4pt; padding-left: 2pt; padding-right: 8pt; padding-top: 0pt; vertical-align: top">
            <div class="TT_-_Table_Text" style="color: #000000; font-family: &quot;Lucida Sans Typewriter&quot;; font-style: normal; font-variant: normal; font-weight: normal; margin-top: 3.0pt; text-transform: none; vertical-align: baseline"><span class="cvt_-_computer_voice_table"><a name="2713139">ignoreAttributes</a></span></div>
          </td>
          <td style="border-bottom-color: #c0d1d1; border-bottom-style: solid; border-bottom-width: 0.15pt; border-top-color: #c0d1d1; border-top-style: solid; border-top-width: 0.15pt; padding-bottom: 4pt; padding-left: 2pt; padding-right: 8pt; padding-top: 0pt; vertical-align: top">
            <div class="TT_-_Table_Text"><a name="2713141">Indicates that a node with a list of attributes to ignore during comparison. For the method version of </a><span class="cvt_-_computer_voice_table">ignoreAttributes</span>, the attributes are an array of <span class="cvt_-_computer_voice_table">String</span> values. For the attribute <span class="cvt_-_computer_voice_table">ignoreAttributes</span> directly on the <span class="cvt_-_computer_voice_table">XMLNode</span>, the attribute value must be a comma-delimited list of attribute names. You must not include space characters between the values before nor after the commas.</div>
          </td>
        </tr>
        <tr>
          <td style="border-bottom-color: #c0d1d1; border-bottom-style: solid; border-bottom-width: 0.15pt; border-top-color: #c0d1d1; border-top-style: solid; border-top-width: 0.15pt; padding-bottom: 4pt; padding-left: 2pt; padding-right: 8pt; padding-top: 0pt; vertical-align: top">
            <div class="TT_-_Table_Text" style="color: #000000; font-family: &quot;Lucida Sans Typewriter&quot;; font-style: normal; font-variant: normal; font-weight: normal; margin-top: 3.0pt; text-transform: none; vertical-align: baseline"><span class="cvt_-_computer_voice_table"><a name="2713143">ignoreAllAttributes</a></span></div>
          </td>
          <td style="border-bottom-color: #c0d1d1; border-bottom-style: solid; border-bottom-width: 0.15pt; border-top-color: #c0d1d1; border-top-style: solid; border-top-width: 0.15pt; padding-bottom: 4pt; padding-left: 2pt; padding-right: 8pt; padding-top: 0pt; vertical-align: top">
            <div class="TT_-_Table_Text"><a name="2713191">Indicates to ignore all attributes on a node during comparison. Set this attribute value to </a><span class="cvt_-_computer_voice_table">"true"</span> for this behavior.</div>
          </td>
        </tr>
        <tr>
          <td style="border-bottom-color: #c0d1d1; border-bottom-style: solid; border-bottom-width: 0.15pt; border-top-color: #c0d1d1; border-top-style: solid; border-top-width: 0.15pt; padding-bottom: 4pt; padding-left: 2pt; padding-right: 8pt; padding-top: 0pt; vertical-align: top">
            <div class="TT_-_Table_Text" style="color: #000000; font-family: &quot;Lucida Sans Typewriter&quot;; font-style: normal; font-variant: normal; font-weight: normal; margin-top: 3.0pt; text-transform: none; vertical-align: baseline"><span class="cvt_-_computer_voice_table"><a name="2713147">ignoreText</a></span></div>
          </td>
          <td style="border-bottom-color: #c0d1d1; border-bottom-style: solid; border-bottom-width: 0.15pt; border-top-color: #c0d1d1; border-top-style: solid; border-top-width: 0.15pt; padding-bottom: 4pt; padding-left: 2pt; padding-right: 8pt; padding-top: 0pt; vertical-align: top">
            <div class="TT_-_Table_Text"><a name="2713277">Indicates to ignore the text of a node during comparison. Set this attribute value to </a><span class="cvt_-_computer_voice_table">"true"</span> for this behavior.</div>
          </td>
        </tr>
        <tr>
          <td style="border-bottom-color: #000000; border-bottom-style: solid; border-bottom-width: 0.5pt; border-top-color: #c0d1d1; border-top-style: solid; border-top-width: 0.15pt; padding-bottom: 4pt; padding-left: 2pt; padding-right: 8pt; padding-top: 0pt; vertical-align: top">
            <div class="TT_-_Table_Text" style="color: #000000; font-family: &quot;Lucida Sans Typewriter&quot;; font-style: normal; font-variant: normal; font-weight: normal; margin-top: 3.0pt; text-transform: none; vertical-align: baseline"><span class="cvt_-_computer_voice_table"><a name="2713151">ignoreChildren</a></span></div>
          </td>
          <td style="border-bottom-color: #000000; border-bottom-style: solid; border-bottom-width: 0.5pt; border-top-color: #c0d1d1; border-top-style: solid; border-top-width: 0.15pt; padding-bottom: 4pt; padding-left: 2pt; padding-right: 8pt; padding-top: 0pt; vertical-align: top">
            <div class="TT_-_Table_Text"><a name="2713153">Indicates to ignore the children of a node during comparison. Set this attribute value to </a><span class="cvt_-_computer_voice_table">"true"</span> for this behavior.</div>
          </td>
        </tr>
      </table>
      <div class="B_-_Body"><a name="2712628">The most important attributes and methods are </a><span class="cv_-_computer_voice">ignoreAll</span> and <span class="cv_-_computer_voice">ignoreAttributes</span>. The other methods exist primarily for completeness.</div>
      <h6 class="HS_-_Head_Sub"><a name="2741193">See also</a></h6>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><a name="2741210">For more information about using </a><span class="cv_-_computer_voice">XmlNode</span> objects, see <a href="javascript:WWHClickedPopup('gosu', 'xml.21.01.html#1470967', '');" title="Gosu and XML">“Gosu and XML” in the </a><span class="bt_-_book_title"><a href="javascript:WWHClickedPopup('gosu', 'xml.21.01.html#1470967', '');" title="Gosu and XML">Gosu Reference Guide</a></span>.</div>
            </td>
          </tr>
        </table>
      </div>
      <h4 class="H2_-_Heading_2"><a name="2741199">Determining Whether to Add or Reprint a Form</a></h4>
      <div class="B_-_Body"><a name="2712591">The important method for creating inference data is the </a><span class="cv_-_computer_voice">FormData</span> property accessor function <span class="cv_-_computer_voice">ShouldBeAdded</span>. The application calls this only after your <span class="cv_-_computer_voice">FormData</span> object creates inference data. It must return <span class="cv_-_computer_voice">true</span> if the form is part of the policy, or <span class="cv_-_computer_voice">false</span> if the form is irrelevant to the policy with the current policy data. Returning <span class="cv_-_computer_voice">true</span> from this method does not guarantee PolicyCenter adds the form. This is affected by other properties such as the processing type specified in the <span class="cv_-_computer_voice">FormPattern</span> in Studio, the group code, and whether the XML data changes and triggers reprinting.</div>
      <div class="B_-_Body"><a name="2710732">PolicyCenter only calls this after your </a><span class="cv_-_computer_voice">FormData</span> object creates inference data. A simple way of implementing this method is to check whether your inference data in your private variable is non-empty.</div>
      <div class="B_-_Body"><a name="2710733">For example, for the example inference class earlier in this section, you could use code such as:</a></div>
      <PRE class="CF_-_Code_First_Line"><a name="2710734">  override property get ShouldBeAdded() : boolean</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2710735">  {</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2710736">    return !_towingInfo.Empty</a></PRE>
      <PRE class="CL_-_Code_Last_Line"><a name="2710737">  }</a></PRE>
      <div class="B_-_Body"><a name="2711454">In other words, this returns </a><span class="cv_-_computer_voice">true</span> only if the private variable for inference data contains a non-empty list.</div>
      <h4 class="H2_-_Heading_2"><a name="2710189">Form Data Helper Functions</a></h4>
      <div class="B_-_Body"><a name="2710747">The </a><span class="cv_-_computer_voice">FormData</span> class that you extend your class from includes some helper methods for common tasks:</div>
      <div class="T_-_Table"><a name="2710754">&nbsp;</a></div>
      <table class="withHeading" style="text-align: left" border="0" cellpadding="10" cellspacing="0" summary="">
        <caption></caption>
        <tr>
          <td style="border-bottom-color: #000000; border-bottom-style: solid; border-bottom-width: 0.5pt; border-top-color: #000000; border-top-style: solid; border-top-width: 0.5pt; padding-bottom: 4pt; padding-left: 2pt; padding-right: 8pt; padding-top: 0pt; vertical-align: bottom">
            <div class="TH_-_Table_Heading"><a name="2710832">Method</a></div>
          </td>
          <td style="border-bottom-color: #000000; border-bottom-style: solid; border-bottom-width: 0.5pt; border-top-color: #000000; border-top-style: solid; border-top-width: 0.5pt; padding-bottom: 4pt; padding-left: 2pt; padding-right: 8pt; padding-top: 0pt; vertical-align: bottom">
            <div class="TH_-_Table_Heading"><a name="2710834">Description</a></div>
          </td>
        </tr>
        <tr>
          <td style="border-bottom-color: #c0d1d1; border-bottom-style: solid; border-bottom-width: 0.15pt; border-top-color: #000000; border-top-style: solid; border-top-width: 0.5pt; padding-bottom: 4pt; padding-left: 2pt; padding-right: 8pt; padding-top: 0pt; vertical-align: top">
            <div class="TT_-_Table_Text" style="color: #000000; font-family: &quot;Lucida Sans Typewriter&quot;; font-style: normal; font-variant: normal; font-weight: normal; margin-top: 3.0pt; text-transform: none; vertical-align: baseline"><span class="cvt_-_computer_voice_table"><a name="2710836">createTextNode</a></span></div>
          </td>
          <td style="border-bottom-color: #c0d1d1; border-bottom-style: solid; border-bottom-width: 0.15pt; border-top-color: #000000; border-top-style: solid; border-top-width: 0.5pt; padding-bottom: 4pt; padding-left: 2pt; padding-right: 8pt; padding-top: 0pt; vertical-align: top">
            <div class="TT_-_Table_Text"><a name="2710838">Creates an XML node with the specified name and text content</a></div>
          </td>
        </tr>
        <tr>
          <td style="border-bottom-color: #c0d1d1; border-bottom-style: solid; border-bottom-width: 0.15pt; border-top-color: #c0d1d1; border-top-style: solid; border-top-width: 0.15pt; padding-bottom: 4pt; padding-left: 2pt; padding-right: 8pt; padding-top: 0pt; vertical-align: top">
            <div class="TT_-_Table_Text" style="color: #000000; font-family: &quot;Lucida Sans Typewriter&quot;; font-style: normal; font-variant: normal; font-weight: normal; margin-top: 3.0pt; text-transform: none; vertical-align: baseline"><span class="cvt_-_computer_voice_table"><a name="2710840">createScheduleNode</a></span></div>
          </td>
          <td style="border-bottom-color: #c0d1d1; border-bottom-style: solid; border-bottom-width: 0.15pt; border-top-color: #c0d1d1; border-top-style: solid; border-top-width: 0.15pt; padding-bottom: 4pt; padding-left: 2pt; padding-right: 8pt; padding-top: 0pt; vertical-align: top">
            <div class="TT_-_Table_Text"><a name="2710872">Creates a parent XML node and a list of child nodes. You specify a container name, a child element name, and a list of children elements. Specify the list of children elements as an iterable collection of </a><span class="cvt_-_computer_voice_table">String</span> values for the text value for each child node</div>
          </td>
        </tr>
        <tr>
          <td style="border-bottom-color: #000000; border-bottom-style: solid; border-bottom-width: 0.5pt; border-top-color: #c0d1d1; border-top-style: solid; border-top-width: 0.15pt; padding-bottom: 4pt; padding-left: 2pt; padding-right: 8pt; padding-top: 0pt; vertical-align: top">
            <div class="TT_-_Table_Text" style="color: #000000; font-family: &quot;Lucida Sans Typewriter&quot;; font-style: normal; font-variant: normal; font-weight: normal; margin-top: 3.0pt; text-transform: none; vertical-align: baseline"><span class="cvt_-_computer_voice_table"><a name="2710844">mapArrayToSet</a></span></div>
          </td>
          <td style="border-bottom-color: #000000; border-bottom-style: solid; border-bottom-width: 0.5pt; border-top-color: #c0d1d1; border-top-style: solid; border-top-width: 0.15pt; padding-bottom: 4pt; padding-left: 2pt; padding-right: 8pt; padding-top: 0pt; vertical-align: top">
            <div class="TT_-_Table_Text"><a name="2710891">Given an array, a filter (a Gosu block) and a mapping operation (a Gosu block), this method produces a set as the output. The set contains the result of the mapping applied to every element in the array for which filter returns </a><span class="cvt_-_computer_voice_table">true</span>. If that filter argument is <span class="cvt_-_computer_voice_table">null</span> instead of a block, PolicyCenter processes all elements. If you pass an array workers’ compensation exposures, you can use this method to produce a set of states that have exposure for a given class code. To do this, use the filter argument to accept only exposures with the given class code and write a mapping block to extract the state from the exposure.</div>
          </td>
        </tr>
      </table>
      <div class="B_-_Body"><a name="2711559">Additionally, several useful generic inference classes are defined in the package </a><span class="cv_-_computer_voice">gw.forms.generic</span> that might help in your form design. The following table lists helper classes in this package.</div>
      <div class="T_-_Table"><a name="2712308">&nbsp;</a></div>
      <table class="withHeading" style="text-align: left" border="0" cellpadding="10" cellspacing="0" summary="">
        <caption></caption>
        <tr>
          <td style="border-bottom-color: #000000; border-bottom-style: solid; border-bottom-width: 0.5pt; border-top-color: #000000; border-top-style: solid; border-top-width: 0.5pt; padding-bottom: 4pt; padding-left: 2pt; padding-right: 8pt; padding-top: 0pt; vertical-align: bottom">
            <div class="TH_-_Table_Heading"><a name="2712368">Class</a></div>
          </td>
          <td style="border-bottom-color: #000000; border-bottom-style: solid; border-bottom-width: 0.5pt; border-top-color: #000000; border-top-style: solid; border-top-width: 0.5pt; padding-bottom: 4pt; padding-left: 2pt; padding-right: 8pt; padding-top: 0pt; vertical-align: bottom">
            <div class="TH_-_Table_Heading"><a name="2712370">Description</a></div>
          </td>
        </tr>
        <tr>
          <td style="border-bottom-color: #c0d1d1; border-bottom-style: solid; border-bottom-width: 0.15pt; border-top-color: #000000; border-top-style: solid; border-top-width: 0.5pt; padding-bottom: 4pt; padding-left: 2pt; padding-right: 8pt; padding-top: 0pt; vertical-align: top">
            <div class="TT_-_Table_Text" style="color: #000000; font-family: &quot;Lucida Sans Typewriter&quot;; font-style: normal; font-variant: normal; font-weight: normal; margin-top: 3.0pt; text-transform: none; vertical-align: baseline"><span class="cvt_-_computer_voice_table"><a name="2712372">AbstractSimpleAvailabilityForm</a></span></div>
          </td>
          <td style="border-bottom-color: #c0d1d1; border-bottom-style: solid; border-bottom-width: 0.15pt; border-top-color: #000000; border-top-style: solid; border-top-width: 0.5pt; padding-bottom: 4pt; padding-left: 2pt; padding-right: 8pt; padding-top: 0pt; vertical-align: top">
            <div class="TT_-_Table_Text"><a name="2712407">Base class for any form that does not need any data to be gathered and packaged, but needs a simple availability script. Subclassing classes must implement the </a><span class="cvt_-_computer_voice_table">isAvailable</span> method to indicate whether or not to add the form.</div>
          </td>
        </tr>
        <tr>
          <td style="border-bottom-color: #c0d1d1; border-bottom-style: solid; border-bottom-width: 0.15pt; border-top-color: #c0d1d1; border-top-style: solid; border-top-width: 0.15pt; padding-bottom: 4pt; padding-left: 2pt; padding-right: 8pt; padding-top: 0pt; vertical-align: top">
            <div class="TT_-_Table_Text" style="color: #000000; font-family: &quot;Lucida Sans Typewriter&quot;; font-style: normal; font-variant: normal; font-weight: normal; margin-top: 3.0pt; text-transform: none; vertical-align: baseline"><span class="cvt_-_computer_voice_table"><a name="2712376">GenericAlwaysAddedForm</a></span></div>
          </td>
          <td style="border-bottom-color: #c0d1d1; border-bottom-style: solid; border-bottom-width: 0.15pt; border-top-color: #c0d1d1; border-top-style: solid; border-top-width: 0.15pt; padding-bottom: 4pt; padding-left: 2pt; padding-right: 8pt; padding-top: 0pt; vertical-align: top">
            <div class="TT_-_Table_Text"><a name="2712442">Base class for any form to always add to a policy whenever the form is available. Using this class with no further subclassing directly leads to a form with no data populated. However, you can extend this class and override the </a><span class="cvt_-_computer_voice_table">addDataToContentNodeForExport</span> method to output your data.</div>
          </td>
        </tr>
        <tr>
          <td style="border-bottom-color: #c0d1d1; border-bottom-style: solid; border-bottom-width: 0.15pt; border-top-color: #c0d1d1; border-top-style: solid; border-top-width: 0.15pt; padding-bottom: 4pt; padding-left: 2pt; padding-right: 8pt; padding-top: 0pt; vertical-align: top">
            <div class="TT_-_Table_Text" style="color: #000000; font-family: &quot;Lucida Sans Typewriter&quot;; font-style: normal; font-variant: normal; font-weight: normal; margin-top: 3.0pt; text-transform: none; vertical-align: baseline"><span class="cvt_-_computer_voice_table"><a name="2712380">GenericRemovalEndorsementForm</a></span></div>
          </td>
          <td style="border-bottom-color: #c0d1d1; border-bottom-style: solid; border-bottom-width: 0.15pt; border-top-color: #c0d1d1; border-top-style: solid; border-top-width: 0.15pt; padding-bottom: 4pt; padding-left: 2pt; padding-right: 8pt; padding-top: 0pt; vertical-align: top">
            <div class="TT_-_Table_Text"><a name="2712452">Base class for a generic removal endorsement form. It checks if any forms were completely invalidated and that also set this form as their removal endorsement form number. If such a form is found, it creates a form that contains a parent </a><span class="cvt_-_computer_voice_table">RemovedForms</span> node with a child <span class="cvt_-_computer_voice_table">RemovedForm</span> node for each form that became completely invalidated. Underneath each of those nodes are <span class="cvt_-_computer_voice_table">Description</span>, <span class="cvt_-_computer_voice_table">EndorsementNumber</span>, and <span class="cvt_-_computer_voice_table">FormNumber</span> nodes with the actual data about the form that became invalidated.</div>
          </td>
        </tr>
        <tr>
          <td style="border-bottom-color: #c0d1d1; border-bottom-style: solid; border-bottom-width: 0.15pt; border-top-color: #c0d1d1; border-top-style: solid; border-top-width: 0.15pt; padding-bottom: 4pt; padding-left: 2pt; padding-right: 8pt; padding-top: 0pt; vertical-align: top">
            <div class="TT_-_Table_Text"><span class="cvt_-_computer_voice_table"><a name="2714659">GenericRemovalAndReplacementEndorsementForm</a></span> </div>
          </td>
          <td style="border-bottom-color: #c0d1d1; border-bottom-style: solid; border-bottom-width: 0.15pt; border-top-color: #c0d1d1; border-top-style: solid; border-top-width: 0.15pt; padding-bottom: 4pt; padding-left: 2pt; padding-right: 8pt; padding-top: 0pt; vertical-align: top">
            <div class="TT_-_Table_Text"><a name="2714661">Base class for removal and replacement endorsement form. It checks if any forms were completely invalidated or replaced and that also set this form as their removal endorsement form number. If such a form is found, PolicyCenter creates a form that contains a parent </a><span class="cvt_-_computer_voice_table">RemovedForms</span> node with a child <span class="cvt_-_computer_voice_table">RemovedForm</span> node for each form completely invalidated. Underneath that node are nodes for <span class="cvt_-_computer_voice_table">Description</span>, <span class="cvt_-_computer_voice_table">EndorsementNumber</span>, and <span class="cvt_-_computer_voice_table">FormNumber</span> nodes that describe the removed form. This class creates a comparable structure for forms replaced by a new copy of the same form.</div>
          </td>
        </tr>
        <tr>
          <td style="border-bottom-color: #000000; border-bottom-style: solid; border-bottom-width: 0.5pt; border-top-color: #c0d1d1; border-top-style: solid; border-top-width: 0.15pt; padding-bottom: 4pt; padding-left: 2pt; padding-right: 8pt; padding-top: 0pt; vertical-align: top">
            <div class="TT_-_Table_Text" style="color: #000000; font-family: &quot;Lucida Sans Typewriter&quot;; font-style: normal; font-variant: normal; font-weight: normal; margin-top: 3.0pt; text-transform: none; vertical-align: baseline"><span class="cvt_-_computer_voice_table"><a name="2712384">AbstractMultipleCopiesForm</a></span></div>
          </td>
          <td style="border-bottom-color: #000000; border-bottom-style: solid; border-bottom-width: 0.5pt; border-top-color: #c0d1d1; border-top-style: solid; border-top-width: 0.15pt; padding-bottom: 4pt; padding-left: 2pt; padding-right: 8pt; padding-top: 0pt; vertical-align: top">
            <div class="TT_-_Table_Text"><a name="2712464">Abstract class that you can subclass to easily deal with forms with multiple instances of the same form attached to the policy. This class assumes that the forms have a one-to-one relationship with some entity on the policy. The class also assumes there is a corresponding </a><span class="cvt_-_computer_voice_table">FormAssociation</span> entity subtype that tracks which form points to which entity. See <a href="javascript:WWHClickedPopup('integration', 'formsintegration.28.3.html#2714505', '');" title="Forms Inferences Classes">“Handling Multiple Instances of One Form”</a>.</div>
          </td>
        </tr>
      </table>
      <div class="B_-_Body"><a name="2712301">The usage of the term “generic” in the package and class naming of the preceding classes means the classes include common functionality that you can subclass as desired. They do not necessarily use Gosu generics features. However, the </a><span class="cv_-_computer_voice">AbstractMultipleCopiesForm</span> class does use Gosu generics.</div>
      <h6 class="HS_-_Head_Sub"><a name="2740479">See also</a></h6>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><a href="javascript:WWHClickedPopup('gosu', 'generics.19.1.html#1455314', '');" title="Gosu Generics" name="2740481">“Gosu Generics” in the </a><span class="bt_-_book_title"><a href="javascript:WWHClickedPopup('gosu', 'generics.19.1.html#1455314', '');" title="Gosu Generics">Gosu Reference Guide</a></span></div>
            </td>
          </tr>
        </table>
      </div>
      <h4 class="H2_-_Heading_2"><a name="2714505">Handling Multiple Instances of One Form</a></h4>
      <div class="B_-_Body"><a name="2711560">In many business cases, each form (as defined by a </a><span class="cv_-_computer_voice">FormPattern</span>) has either zero or one instances of the forms valid on the policy at any given time. For example, the personal auto line of business forms in the reference implementation include various forms, but no more than one of each form. For multiple vehicles, a single form lists all the vehicles. However, sometimes your business case might require multiple instances of the same form, such as listing one form multiple times for each vehicle. PolicyCenter supports this feature, which is referred to as <span class="e_-_emphasis">multiplicity</span>.</div>
      <div class="B_-_Body"><a name="2711591">The most important part of handling multiplicity is associating a certain object in the policy graph with a given instance of your inference class, which is your </a><span class="cv_-_computer_voice">FormData</span> subclass. PolicyCenter implements this link through an intermediate business entity called <span class="cv_-_computer_voice">FormAssociation</span>. You must create a subtype of <span class="cv_-_computer_voice">FormAssociation</span> and add a single property on it that is a foreign key to the object that it represents. For example, for a personal auto form associated with single personal vehicle, create a new subtype of <span class="cv_-_computer_voice">FormAssociation</span> called <span class="cv_-_computer_voice">PAVehicleFormAssociation</span>. Add a property to it called <span class="cv_-_computer_voice">Vehicle</span> that links to the <span class="cv_-_computer_voice">PersonalVehicle</span> entity.</div>
      <div class="B_-_Body"><a name="2711891">If you have multiple instances of the form, your </a><span class="cv_-_computer_voice">Form</span> has multiple instances, each with its own instance of your inference class. </div>
      <h6 class="HS_-_Head_Sub"><a name="2711592">To support form multiplicity</a></h6>
      <div class="LS_-_List_Start_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="LS_-_List_Start_inner" style="width: 15pt; white-space: nowrap">
                <span class="ri_-_run_in_header">	1.	</span>
              </div>
            </td>
            <td width="100%">
              <div class="LS_-_List_Start_inner"><a name="2711637">In the data model, create a subtype of </a><span class="cv_-_computer_voice">FormAssociation</span>. To continue the earlier example, perhaps a new entity called <span class="cv_-_computer_voice">PAVehicleFormAssociation</span>.</div>
            </td>
          </tr>
        </table>
      </div>
      <div class="LI_-_List_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="LI_-_List_Item_inner" style="width: 15pt; white-space: nowrap">
                <span class="ri_-_run_in_header">	2.	</span>
              </div>
            </td>
            <td width="100%">
              <div class="LI_-_List_Item_inner"><a name="2715373">On that entity, add property with a foreign key link to the desired type, such as a personal vehicle. For this example, suppose the property is called </a><span class="cv_-_computer_voice">Vehicle</span>.</div>
            </td>
          </tr>
        </table>
      </div>
      <div class="LI_-_List_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="LI_-_List_Item_inner" style="width: 15pt; white-space: nowrap">
                <span class="ri_-_run_in_header">	3.	</span>
              </div>
            </td>
            <td width="100%">
              <div class="LI_-_List_Item_inner"><a name="2715374">In your inference class, extend the </a><span class="cv_-_computer_voice">AbstractMultipleCopiesForm</span> class instead of the extending the <span class="cv_-_computer_voice">FormData</span> class. This class uses Gosu generics features (see <a href="javascript:WWHClickedPopup('gosu', 'generics.19.1.html#1455314', '');" title="Gosu Generics">“Gosu Generics” in the </a><span class="bt_-_book_title"><a href="javascript:WWHClickedPopup('gosu', 'generics.19.1.html#1455314', '');" title="Gosu Generics">Gosu Reference Guide</a></span>) to abstract this class for your linked-to type. In this example, use the following syntax to define the inference class:</div>
            </td>
          </tr>
        </table>
      </div>
      <div class="CS_-_Code_Single_Line"><a name="2711713">class MyPAVehicleForm extends AbstractMultipleCopiesForm&lt;PersonalVehicle&gt;</a></div>
      <div class="LI_-_List_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="LI_-_List_Item_inner" style="width: 15pt; white-space: nowrap">
                <span class="ri_-_run_in_header">	4.	</span>
              </div>
            </td>
            <td width="100%">
              <div class="LI_-_List_Item_inner"><a name="2711790">In your inference class, do not implement the </a><span class="cv_-_computer_voice">populateInferenceData</span> method. That method is only used if you do not use form multiplicity.</div>
            </td>
          </tr>
        </table>
      </div>
      <div class="LI_-_List_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="LI_-_List_Item_inner" style="width: 15pt; white-space: nowrap">
                <span class="ri_-_run_in_header">	5.	</span>
              </div>
            </td>
            <td width="100%">
              <div class="LI_-_List_Item_inner"><a name="2711750">Instead of the </a><span class="cv_-_computer_voice">populateInferenceData</span> method, add to your inference class the <span class="cv_-_computer_voice">getEntities</span> method, which must return a list containing one or more entities of your desired type. For this example, it would be a list of all personal vehicles on the policy. If there is more than one entity returned, PolicyCenter knows that there are multiple instances of the form, each linked to one of the items in this list.</div>
            </td>
          </tr>
        </table>
      </div>
      <div class="LI_-_List_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="LI_-_List_Item_inner" style="width: 15pt; white-space: nowrap">
                <span class="ri_-_run_in_header">	6.	</span>
              </div>
            </td>
            <td width="100%">
              <div class="LI_-_List_Item_inner"><a name="2711759">Add to your inference class the </a><span class="cv_-_computer_voice">FormAssociationPropertyName</span> method, which simply returns the name of the property in your <span class="cv_-_computer_voice">FormAssociation</span> subtype, as a <span class="cv_-_computer_voice">String</span>. For the earlier example, pass the <span class="cv_-_computer_voice">String</span> value <span class="cv_-_computer_voice">"Vehicle"</span> because the property name is <span class="cv_-_computer_voice">Vehicle</span>.</div>
            </td>
          </tr>
        </table>
      </div>
      <div class="LI_-_List_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="LI_-_List_Item_inner" style="width: 15pt; white-space: nowrap">
                <span class="ri_-_run_in_header">	7.	</span>
              </div>
            </td>
            <td width="100%">
              <div class="LI_-_List_Item_inner"><a name="2711957">In your inference class XML generation method </a><span class="cv_-_computer_voice">addDataToContentNodeForExport</span>, export the data for only one entity in your generated list of entities. Your code refers to the current one using the special private variable called <span class="cv_-_computer_voice">_entity</span>, which is set up automatically for you by the <span class="cv_-_computer_voice">AbstractMultipleCopiesForm</span>. In this example, the <span class="cv_-_computer_voice">_entity</span> variable contains one <span class="cv_-_computer_voice">PersonalVehicle</span> from the list returned in your <span class="cv_-_computer_voice">getEntities</span> method. Your <span class="cv_-_computer_voice">addDataToContentNodeForExport</span> would add child XML nodes for that vehicle only.</div>
            </td>
          </tr>
        </table>
      </div>
      <div class="LI_-_List_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="LI_-_List_Item_inner" style="width: 15pt; white-space: nowrap">
                <span class="ri_-_run_in_header">	8.	</span>
              </div>
            </td>
            <td width="100%">
              <div class="LI_-_List_Item_inner"><a name="2711958">In your inference class create the </a><span class="cv_-_computer_voice">createFormAssociation</span> method to instantiate one version of your form association subtype. It can use simple code such as:</div>
            </td>
          </tr>
        </table>
      </div>
      <PRE class="CM_-_Code_Middle_Line"><a name="2712004">override protected function createFormAssociation( form : Form) : FormAssociation {</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2712113">    return new PAVehicleFormAssociation(form.Branch)  </a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2712114">  }</a></PRE>
      <div class="B_-_Body"><a name="2712135">Remember that in your messaging code, you must access </a><span class="cv_-_computer_voice">Form.FormAssociations</span> to get form associations that link to the associated entity. See <a href="javascript:WWHClickedPopup('integration', 'formsintegration.28.4.html#2711561', '');" title="Forms Messaging">“Forms Messaging”</a> for related information.</div>
      <h6 class="HS_-_Head_Sub"><a name="2712115">Advanced Multiplicity With Multiple Form Associations Per Form</a></h6>
      <div class="B_-_Body"><a name="2712118">In the earlier multiplicity example, one </a><span class="cv_-_computer_voice">FormPattern</span> created multiple form instances each with one inference class instance and a single form association. The form was duplicated for each entity returned from <span class="cv_-_computer_voice">getEntities</span>, but each form linked to only one vehicle. This approach works for most cases in which you might need multiplicity on a form.</div>
      <div class="B_-_Body"><a name="2712124">In the data model, the </a><span class="cv_-_computer_voice">Form</span> entity supports multiple form associations by having form associations on the <span class="cv_-_computer_voice">Form</span> entity stored in an array (not a single property) called <span class="cv_-_computer_voice">FormAssociations</span>. However, in the reference implementation the <span class="cv_-_computer_voice">FormData</span> and <span class="cv_-_computer_voice">AbstractMultipleCopiesForm</span> classes support only a one-to-one mapping of <span class="cv_-_computer_voice">Form</span> instance to <span class="cv_-_computer_voice">FormAssociation</span>. It is possible to support one-to-many mappings of <span class="cv_-_computer_voice">Form</span> to <span class="cv_-_computer_voice">FormAssociation</span>. Supporting one-to-many mappings requires subclassing the built-in Gosu classes to manage multiple <span class="cv_-_computer_voice">FormAssociation</span> objects. Your subclasses set their values and set the <span class="cv_-_computer_voice">_entity</span> variable before calling the XML export method. Refer to the source code for the <span class="cv_-_computer_voice">AbstractMultipleCopiesForm</span> class to see how the multiplicity code is implemented.</div>
      <h4 class="H2_-_Heading_2"><a name="2723379">Reference Dates on a Form</a></h4>
      <div class="B_-_Body"><a name="2723413">There is now a protected method in </a><span class="cv_-_computer_voice">FormData</span> called <span class="cv_-_computer_voice">getLookupDate</span> that determines the reference date to use for that form. The built-in class defines the standard implementation.</div>
      <div class="B_-_Body"><a name="2723414">Individual form patterns can add their own implementation of the </a><span class="cv_-_computer_voice">getLookupDate</span> method in their forms inference class. For example, if a particular form is directly related to a particular coverage, the <span class="cv_-_computer_voice">getLookupDate</span> implementation for that form must return the reference date from the related coverage. In other words, you do not need to necessarily use the generic period-level reference date.</div>
      <div class="B_-_Body"><a name="2723415">The built-in </a><span class="cv_-_computer_voice">FormData.getLookupDate()</span> implementation gets the lookup date from coverages, which calls the <span class="cv_-_computer_voice">IReferenceDatePlugin</span> plugin implementation to get reference dates. However, <span class="cv_-_computer_voice">IReferenceDatePlugin</span> does not do anything specific to forms. </div>
      <script type="text/javascript" language="JavaScript1.2">
        <!--
          // Clear related topics
          //
          WWHClearRelatedTopics();

          document.writeln(WWHRelatedTopicsInlineHTML());
        // -->
      </script>
    </blockquote>
    <script type="text/javascript" language="JavaScript1.2">
      <!--
        document.write(WWHRelatedTopicsDivTag() + WWHPopupDivTag() + WWHALinksDivTag());
      // -->
    </script>
  </body>
</html>