<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xml:lang="en" lang="en" xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
    <meta http-equiv="Content-Style-Type" content="text/css" />
    <!-- MOTW-DISABLED saved from url=(0014)about:internet -->
    <title>Checklist for Relationship Changes in Cost Data Objects</title>
    <link rel="StyleSheet" href="css/rating-external.css" type="text/css" media="all" />
    <link rel="StyleSheet" href="css/webworks.css" type="text/css" media="all" />
    <link rel="StyleSheet" href="css/css-guidewire-extra.css" type="text/css" media="all" />
    <script type="text/javascript" language="JavaScript1.2" src="wwhdata/common/context.js"></script>
    <script type="text/javascript" language="JavaScript1.2" src="wwhdata/common/towwhdir.js"></script>
    <script type="text/javascript" language="JavaScript1.2" src="wwhdata/common/wwhpagef.js"></script>
    <script type="text/javascript" language="JavaScript1.2">
      <!--
        var  WebWorksRootPath = "";
      // -->
    </script>
    <script type="text/javascript" language="JavaScript1.2">
      <!--
        // Set reference to top level help frame
        //
        var  WWHFrame = WWHGetWWHFrame("", true);
      // -->
    </script>
    <script type="text/javascript" language="JavaScript1.2" src="scripts/expand.js"></script>
    <!-- THE FOLLOWING IS A GUIDEWIRE STYLE DEFINITION FOR THE LINK TO THIS FEATURE -->
    <link rel="StyleSheet" href="css/css-guidewire-extra.css" type="text/css" media="all" />
    <!-- THE FOLLOWING IS A GUIDEWIRE GSCRIPT FUNCTION FOR THE LINK TO THIS FEATURE -->
    <script type="text/javascript">
function guidewire_selectall()
{
var text_val=eval("document.linktothisurlform.urlfield");
text_val.focus();
text_val.select();
}
</script>
  </head>
  <body onLoad="WWHUpdate();" onUnload="WWHUnload();" onKeyDown="WWHHandleKeyDown((document.all||document.getElementById||document.layers)?event:null);" onKeyPress="WWHHandleKeyPress((document.all||document.getElementById||document.layers)?event:null);" onKeyUp="WWHHandleKeyUp((document.all||document.getElementById||document.layers)?event:null);">
    <!-- THE FOLLOWING IS A GUIDEWIRE DIV FOR THE 'LINK TO THIS' FEATURE -->
    <div id="linkToThisPage" class="popup" style="display: none;">
      <div class="popupTitle">Link Directly to This Page 
           <a href="#" onclick="var thePopup = getElementById('linkToThisPage');thePopup.style.display='none';return false;"><img class="popupClosebox" src="wwhelp/wwhimpl/common/images/close.gif" /></a></div>
      <div style="padding:6px;">
        <div class="popupText" id="linkToThisPageBookmark">An error has occurred if you see this messsage.</div>
        <form name="linktothisurlform" method="post" action="" style="width:275px;margin:0px">
          <input type="text" class="popupURLText" id="linkToThisPageURL" name="urlfield" rows="1" cols="55" onClick="guidewire_selectall();" onFocus="guidewire_selectall();"></input>
        </form>
      </div>
    </div>
    <br />
    <div class="WebWorks_Breadcrumbs" style="text-align: left;">
      <span>PolicyCenter Integration Guide</span> : 
    <span class="WebWorks_Breadcrumbs" style="text-align: left;"><a class="WebWorks_Breadcrumb_Link" href="p-forms.html#3048568">Policy-related Integrations</a> : <a class="WebWorks_Breadcrumb_Link" href="rating-external.26.01.html#3048568">Rating Integration</a> : <a class="WebWorks_Breadcrumb_Link" href="rating-external.26.08.html#3048568">Implementing Rating for a New Line of Business</a> : Checklist for Relationship Changes in Cost Data Objects</span></div>
    <hr align="left" />
    <blockquote>
      <h4 class="H2B_-_Heading_2_Break"><a name="3048568">Checklist for Relationship Changes in Cost Data Objects</a></h4>
      <div class="B_-_Body"><a name="3048569">For new cost data subclasses, there are multiple things you must do carefully to ensure that your cost data works with the default rating engine. This topic summaries changes for a cost data subclasses, either for new subclasses or modifications to add links to policy graph objects. This topic contains links to earlier topics that discuss some subjects in more detail.</a></div>
      <div class="B_-_Body"><a name="3048570">The most important thing to add to a </a><span class="cv_-_computer_voice">CostData</span> subclass is an extra relationship (foreign key) to indicate where the cost links within the policy graph. For example, for a vehicle-related cost, the cost might attach to the graph at the level of a vehicle and line-level coverage. Within the cost data object, the foreign keys are fixed ID values encapsulated in a <span class="cv_-_computer_voice">Key</span> object. See <a href="javascript:WWHClickedPopup('integration', 'rating-external.26.12.html#3066089', '');" title="Fixed ID Keys Link a Cost Data Object to Another Object">“Fixed ID Keys Link a Cost Data Object to Another Object”</a> for important details.</div>
      <div class="B_-_Body"><a name="3048574">To add another relationship (foreign key) to a cost data subclass, do the following steps:</a></div>
      <div class="LS_-_List_Start_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="LS_-_List_Start_inner" style="width: 15pt; white-space: nowrap">
                <span class="ri_-_run_in_header">	1.	</span>
              </div>
            </td>
            <td width="100%">
              <div class="LS_-_List_Start_inner"><a name="3048575">Add the foreign key as private variables on the </a><span class="cv_-_computer_voice">CostData</span> with the variable type <span class="cv_-_computer_voice">Key</span>. Prefix the name with an underscore, such as <span class="cv_-_computer_voice">_covID</span>. See <a href="javascript:WWHClickedPopup('integration', 'rating-external.26.12.html#3066089', '');" title="Fixed ID Keys Link a Cost Data Object to Another Object">“Fixed ID Keys Link a Cost Data Object to Another Object”</a> for related discussion.</div>
            </td>
          </tr>
        </table>
      </div>
      <div class="LI_-_List_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="LI_-_List_Item_inner" style="width: 15pt; white-space: nowrap">
                <span class="ri_-_run_in_header">	2.	</span>
              </div>
            </td>
            <td width="100%">
              <div class="LI_-_List_Item_inner"><a name="3048579">Add new arguments to the constructor for these new values. In the constructor, set your private variables based on the constructor arguments. See </a><a href="javascript:WWHClickedPopup('integration', 'rating-external.26.13.html#3037022', '');" title="Cost Data Object Methods and Constructors to Override">“Constructors for a Cost Data Subclass”</a> for related discussion.</div>
            </td>
          </tr>
        </table>
      </div>
      <div class="LI_-_List_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="LI_-_List_Item_inner" style="width: 15pt; white-space: nowrap">
                <span class="ri_-_run_in_header">	3.	</span>
              </div>
            </td>
            <td width="100%">
              <div class="LI_-_List_Item_inner"><a name="3048583">Override the cost data method </a><span class="cv_-_computer_voice">setSpecificFieldsOnCost</span>. Set your foreign key properties when creating a new cost. See <a href="javascript:WWHClickedPopup('integration', 'rating-external.26.13.html#3037061', '');" title="Cost Data Object Methods and Constructors to Override">“Copying Custom Properties from Cost Data Objects to Cost Entity Instances”</a> for related discussion.</div>
            </td>
          </tr>
        </table>
      </div>
      <div class="LI_-_List_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="LI_-_List_Item_inner" style="width: 15pt; white-space: nowrap">
                <span class="ri_-_run_in_header">	4.	</span>
              </div>
            </td>
            <td width="100%">
              <div class="LI_-_List_Item_inner"><a name="3048587">Override the cost data </a><span class="cv_-_computer_voice">property get</span> function for the <span class="cv_-_computer_voice">KeyValues</span> property. Add any new relationships to the list that this property get function returns. See <a href="javascript:WWHClickedPopup('integration', 'rating-external.26.13.html#3037569', '');" title="Cost Data Object Methods and Constructors to Override">“Key Values for Each Cost Data Subclass”</a> for related discussion. For example, for a vehicle-related cost, suppose there are two cost data objects that are otherwise the same but for <span class="e_-_emphasis">different vehicles</span> or a <span class="e_-_emphasis">different coverage</span>. By properly adding the key values for vehicle and coverage to the key values, the rating engine considers the costs different. The rating engine does not merge together or otherwise throw them away as duplicate.</div>
            </td>
          </tr>
        </table>
      </div>
      <div class="N_-_Note">
        <span class="n_-_note">Note: </span><a name="3048591">If you customize built-in entities or create entirely new cost data subclasses, remember to add entity relationships to the </a><span class="cv_-_computer_voice">KeyValues</span> return value. Otherwise, new costs disappear during the merging process.</div>
      <div class="LI_-_List_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="LI_-_List_Item_inner" style="width: 15pt; white-space: nowrap">
                <span class="ri_-_run_in_header">	5.	</span>
              </div>
            </td>
            <td width="100%">
              <div class="LI_-_List_Item_inner"><a name="3048594">Override the cost data method </a><span class="cv_-_computer_voice">getVersionedCosts</span>. See <a href="javascript:WWHClickedPopup('integration', 'rating-external.26.13.html#3037074', '');" title="Cost Data Object Methods and Constructors to Override">“Get Versioned Costs That Match This Cost Data Object”</a> for related discussion. Use the new foreign key properties in the cost data object to find the existing costs (in the database) that are for the same thing. For example, for a line-level vehicle cost, this method must return only the ones that are for a specific vehicle and coverage. </div>
            </td>
          </tr>
        </table>
      </div>
      <div class="N_-_Note">
        <span class="n_-_note">Note: </span><a name="3048596">If you customize built-in entities or create entirely new cost data subclasses, remember to consider your new entity relationships in your </a><span class="cv_-_computer_voice">getVersionedCosts</span> implementation. Otherwise, new costs disappear during the merging process.</div>
      <div class="B_-_Body"><a name="3048597">The other typical thing a cost data subclass must do is to add extra properties that distinguish between costs that are different but that connect at the same level. For example, suppose you have several possible line-level taxes, such as state tax, uninsured coverage surcharge, and so on. You would need a </a><span class="e_-_emphasis">tax&nbsp;type</span> field that explains which tax this represents. Like a foreign key property, add this information as a new private variable in the class, add it to the constructor, and do all steps in the previous numbered list.</div>
      <div class="B_-_Body"><a name="3048598">In some cases, you might need to add to cost data variables but not add them to the </a><span class="cv_-_computer_voice">KeyValues</span> return value or use them in the cost data method <span class="cv_-_computer_voice">getVersionedCosts</span>. For example, you might add something that is:</div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><a name="3048599">Useful information about the cost data, such as its rating tier.</a></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><a name="3048600">Information that does not uniquely identify the cost in the graph, for example the cost for state tax for vehicle&nbsp;1 and coverage&nbsp;B.</a></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="B_-_Body"><a name="3048601">A common mistake is to add new entity relationships but not add them to the </a><span class="cv_-_computer_voice">KeyValues</span> return value or add within your <span class="cv_-_computer_voice">getVersionedCosts</span> implementation. This makes new costs disappear during the merging process. Be careful to do all of these steps correctly.</div>
      <script type="text/javascript" language="JavaScript1.2">
        <!--
          // Clear related topics
          //
          WWHClearRelatedTopics();

          document.writeln(WWHRelatedTopicsInlineHTML());
        // -->
      </script>
    </blockquote>
    <script type="text/javascript" language="JavaScript1.2">
      <!--
        document.write(WWHRelatedTopicsDivTag() + WWHPopupDivTag() + WWHALinksDivTag());
      // -->
    </script>
  </body>
</html>