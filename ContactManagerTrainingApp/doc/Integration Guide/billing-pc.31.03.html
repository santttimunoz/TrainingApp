<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xml:lang="en" lang="en" xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
    <meta http-equiv="Content-Style-Type" content="text/css" />
    <!-- MOTW-DISABLED saved from url=(0014)about:internet -->
    <title>How Billing Data Flows Between Applications</title>
    <link rel="StyleSheet" href="css/billing-pc.css" type="text/css" media="all" />
    <link rel="StyleSheet" href="css/webworks.css" type="text/css" media="all" />
    <link rel="StyleSheet" href="css/css-guidewire-extra.css" type="text/css" media="all" />
    <script type="text/javascript" language="JavaScript1.2" src="wwhdata/common/context.js"></script>
    <script type="text/javascript" language="JavaScript1.2" src="wwhdata/common/towwhdir.js"></script>
    <script type="text/javascript" language="JavaScript1.2" src="wwhdata/common/wwhpagef.js"></script>
    <script type="text/javascript" language="JavaScript1.2">
      <!--
        var  WebWorksRootPath = "";
      // -->
    </script>
    <script type="text/javascript" language="JavaScript1.2">
      <!--
        // Set reference to top level help frame
        //
        var  WWHFrame = WWHGetWWHFrame("", true);
      // -->
    </script>
    <script type="text/javascript" language="JavaScript1.2" src="scripts/expand.js"></script>
    <!-- THE FOLLOWING IS A GUIDEWIRE STYLE DEFINITION FOR THE LINK TO THIS FEATURE -->
    <link rel="StyleSheet" href="css/css-guidewire-extra.css" type="text/css" media="all" />
    <!-- THE FOLLOWING IS A GUIDEWIRE GSCRIPT FUNCTION FOR THE LINK TO THIS FEATURE -->
    <script type="text/javascript">
function guidewire_selectall()
{
var text_val=eval("document.linktothisurlform.urlfield");
text_val.focus();
text_val.select();
}
</script>
  </head>
  <body onLoad="WWHUpdate();" onUnload="WWHUnload();" onKeyDown="WWHHandleKeyDown((document.all||document.getElementById||document.layers)?event:null);" onKeyPress="WWHHandleKeyPress((document.all||document.getElementById||document.layers)?event:null);" onKeyUp="WWHHandleKeyUp((document.all||document.getElementById||document.layers)?event:null);">
    <!-- THE FOLLOWING IS A GUIDEWIRE DIV FOR THE 'LINK TO THIS' FEATURE -->
    <div id="linkToThisPage" class="popup" style="display: none;">
      <div class="popupTitle">Link Directly to This Page 
           <a href="#" onclick="var thePopup = getElementById('linkToThisPage');thePopup.style.display='none';return false;"><img class="popupClosebox" src="wwhelp/wwhimpl/common/images/close.gif" /></a></div>
      <div style="padding:6px;">
        <div class="popupText" id="linkToThisPageBookmark">An error has occurred if you see this messsage.</div>
        <form name="linktothisurlform" method="post" action="" style="width:275px;margin:0px">
          <input type="text" class="popupURLText" id="linkToThisPageURL" name="urlfield" rows="1" cols="55" onClick="guidewire_selectall();" onFocus="guidewire_selectall();"></input>
        </form>
      </div>
    </div>
    <br />
    <div class="WebWorks_Breadcrumbs" style="text-align: left;">
      <span>PolicyCenter Integration Guide</span> : 
    <span class="WebWorks_Breadcrumbs" style="text-align: left;"><a class="WebWorks_Breadcrumb_Link" href="p-pc-suite.html#3466841">Billing, Claim, and Contact Integrations</a> : <a class="WebWorks_Breadcrumb_Link" href="billing-pc.31.01.html#3466841">Billing Integration</a> : How Billing Data Flows Between Applications</span></div>
    <hr align="left" />
    <blockquote>
      <h3 class="H1_-_Heading_1"><a name="3466841">How Billing Data Flows Between Applications</a></h3>
      <div class="B_-_Body"><a name="3444334">PolicyCenter provides limited access to billing information retrieved from BillingCenter. PolicyCenter provides billing information for users who work mostly in PolicyCenter or do not have access to BillingCenter. If you have a BillingCenter login, PolicyCenter displays links to view account and policy period information in BillingCenter. PolicyCenter has multiple examples of viewing BillingCenter data. For example, you can view billing data in PolicyCenter in the Account File and in Policy File in the </a><span class="ui_-_UI_element">Billing</span> tabs. </div>
      <div class="B_-_Body"><a name="3458242">In the built-in implementation, to make a midterm billing change, in general you must make changes directly in BillingCenter. However, agents generally cannot log into BillingCenter. An agent can see and edit some BillingCenter properties in PolicyCenter within </a><span class="ui_-_UI_element">Account File</span> → <span class="ui_-_UI_element">Billing</span>. In that user interface, the payment method is editable. You can switch between responsive billing (getting a bill, sending a check) to direct debit against a credit card or bank account. </div>
      <div class="B_-_Body"><a name="3458247">These are just the built-in places to view or edit billing information midterm within PolicyCenter. You may add additional PCF pages to show billing data or allow editing. If you want to add pages, follow the examples of these PCF pages. Copy the PCF code and integration code as needed.</a></div>
      <div class="B_-_Body"><a name="3463659">For requests that require information to display quickly in PolicyCenter, make the requests to the billing system synchronously. Similarly, if it is important to tell the user whether an action succeeded or failed, make the request synchronously. Synchronous requests are the built-in behavior for some editing requests, such as the account file payment method. However, if you just need to update information in the billing system eventually and the user does not need to see the results, use the asynchronous approach. Follow the pattern of the built-in asynchronous PolicyCenter to BillingCenter integrations. In other words, create a custom event that sends a message using the event messaging system, and asynchronously send that information to BillingCenter. For more information, see </a><a href="javascript:WWHClickedPopup('integration', 'billing-pc.31.03.html#3452139', '');" title="How Billing Data Flows Between Applications">“Asynchronous Communication”</a>.</div>
      <div class="B_-_Body"><a name="3463663">PolicyCenter can link directly to the billing application. For example, the PolicyCenter account billing screen has a button to view billing details directly in BillingCenter.</a></div>
      <h4 class="H2_-_Heading_2"><a name="3458212">Notifying a Billing System of Policy Changes and Premiums</a></h4>
      <div class="B_-_Body"><a name="3617475">PolicyCenter notifies your billing system of important changes to the policy itself and also changes that affect the premium. This affects the following policy transactions: submission, policy change, cancellation, reinstatement, renewal, rewrite, final audit, and premium report. PolicyCenter calculates premium transactions by charge type, charge group, and effective dates, then sends them to the billing system.</a></div>
      <div class="B_-_Body"><a name="3458123">If you use the PolicyCenter built-in integration to BillingCenter, the built-in plugin notifies BillingCenter. In response, BillingCenter internally creates what it calls </a><span class="e_-_emphasis">billing instructions</span>, represented by different subtypes of the <span class="cv_-_computer_voice">BillingInstruction</span> entity. BillingCenter has billing instruction variations for different transaction types for new policies, new policy periods, cancellation, reinstatement, and so on.</div>
      <div class="B_-_Body"><a name="3444516">Billing instructions are a BillingCenter concept embedded deeply in the BillingCenter data model. PolicyCenter does not directly have the concept of billing instructions. PolicyCenter notifies the billing system of policy transactions using more generalized concepts that roughly correspond to PolicyCenter transaction types.</a></div>
      <div class="B_-_Body"><a name="3443702">PolicyCenter also notifies the billing system for less common changes:</a></div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><a name="3443703">Midterm changes to period effective and expiration dates</a></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><a name="3443704">Midterm change to producer of service</a></div>
            </td>
          </tr>
        </table>
      </div>
      <h4 class="H2_-_Heading_2"><a name="3463796">Tracking Policies Term by Term</a></h4>
      <div class="B_-_Body"><a name="3466603">Within the PolicyCenter built-in integration to BillingCenter, both applications track policies term by term. A policy within PolicyCenter typically starts with one term, and creates additional terms with any renewal or rewrite. However, other PolicyCenter transactions, such as policy change, create a new policy period but not a new term. Within PolicyCenter, there are various IDs for a </a><span class="cv_-_computer_voice">PolicyPeriod</span>, such as policy number, model number, term number, and period ID. </div>
      <div class="B_-_Body"><a name="3466642">Your billing system must match a policy period by using both of the following IDs:</a></div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><a name="3497788">The policy number, which remains constant throughout the life cycle of a policy period</a></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><a name="3497789">The term number, which starts with 1 and increments by 1 for each renewal or rewrite</a></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="B_-_Body"><a name="3497790">PolicyCenter and BillingCenter correlate a common policy term between them by a common policy number and term number. The data models of each application differ, however. In BillingCenter, a policy number and term number uniquely identify a single entity instance. In PolicyCenter, a policy number and term number often identify multiple entity instances, due to the way that PolicyCenter implements policy revisioning. </a></div>
      <h4 class="H2_-_Heading_2"><a name="3452105">Some PolicyCenter Properties Are Mainly for Billing Systems</a></h4>
      <div class="B_-_Body"><a name="3452106">PolicyCenter initially creates producers, producer codes, accounts, policies, and policy periods. These entities contain a number of properties to initialize during creation although only BillingCenter uses these properties. </a></div>
      <div class="B_-_Body"><a name="3452107">PolicyCenter creates these objects with initial values for those properties so that additional setup in BillingCenter is unnecessary for simple cases. If you want to make additional billing changes (especially anything complicated), you must make those changes in BillingCenter. PolicyCenter does not show those properties in the user interface after creating the objects. </a></div>
      <div class="B_-_Body"><a name="3452108">For example, a producer code has a commission plan in BillingCenter. Whenever you create the producer code in PolicyCenter, you set a commission plan which PolicyCenter sends to BillingCenter as part of the producer code. After that, you must make any changes to the commission plan in BillingCenter. </a></div>
      <div class="B_-_Body"><a name="3452109">The billing integration offers the following approaches to select the property value on the PolicyCenter side, depending on the situation: </a></div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><a name="3452110">Collect nothing from the PolicyCenter user and BillingCenter automatically selects a default value. Typically PolicyCenter does this if there is one fairly likely value.</a></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><a name="3452112">Ask the billing system for a list of available plans. PolicyCenter does this because the availability logic is complex, subject to change, and only the billing system typically maintains this information.</a></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="B_-_Body"><a name="3489246">Similarly, PolicyCenter sets some properties on </a><span class="cv_-_computer_voice">Transaction</span> for the billing system. Before sending the transactions to the billing system, PolicyCenter sends the transaction property <span class="cv_-_computer_voice">Transaction.WrittenDate</span> to the appropriate written date. PolicyCenter calls the policy period plugin method <span class="cv_-_computer_voice">determineWrittenDate</span>. </div>
      <h6 class="HS_-_Head_Sub"><a name="3515009">See also</a></h6>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><a href="javascript:WWHClickedPopup('integration', 'plugins-policy.13.07.html#2388234', '');" title="Policy Period Plugin" name="3515011">“Policy Period Plugin”</a>.</div>
            </td>
          </tr>
        </table>
      </div>
      <h4 class="H2_-_Heading_2"><a name="3452139">Asynchronous Communication</a></h4>
      <div class="B_-_Body"><a name="3452140">The built-in billing integration uses both synchronous and asynchronous communication. </a></div>
      <div class="B_-_Body"><a name="3463692">Some communication must be synchronous. In some cases, PolicyCenter needs information in response to user actions. For example, PolicyCenter needs to get available payment plans from the billing system, whether it is BillingCenter or another system. PolicyCenter must call the external system synchronously to assure a responsive user interface.</a></div>
      <div class="B_-_Body"><a name="3463693">In other cases, the application needs information from the other application but the user is not waiting for a response or the application does not need a response. For example, temporary integration issues must not prevent binding a policy transaction. Because of this, the integration uses asynchronous communication in non-time-critical cases. This makes policy and billing integration robust but non-blocking to the user interface. PolicyCenter implements asynchronous communication using the system wide event and message system. </a></div>
      <div class="B_-_Body"><a name="3444613">The billing system plugin creates an event message, which triggers Event Fired rules, which create a message. In another thread, a message transport sends the message to the billing system and waits for confirmation from the billing system that it received the message.</a></div>
      <h6 class="HS_-_Head_Sub"><a name="3498327">See also</a></h6>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><a href="javascript:WWHClickedPopup('integration', 'eventsmessaging.24.01.html#4197044', '');" title="Messaging and Events" name="3451370">“Messaging and Events”</a></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="H3_-_Heading_3_outer" style="margin-left: 36pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <h5 class="H3_-_Heading_3_inner" style="width: 18pt; white-space: nowrap"></h5>
            </td>
            <td width="100%">
              <h5 class="H3_-_Heading_3_inner"><a name="3498345">High-level Asynchronous Communication Flow Between PolicyCenter and Billing Center</a></h5>
            </td>
          </tr>
        </table>
      </div>
      <div class="B_-_Body"><a name="3451467">The following is the high-level flow within PolicyCenter for asynchronous communication to BillingCenter. For example, for a new submission:</a></div>
      <div class="LS_-_List_Start_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="LS_-_List_Start_inner" style="width: 15pt; white-space: nowrap">
                <span class="ri_-_run_in_header">	1.	</span>
              </div>
            </td>
            <td width="100%">
              <div class="LS_-_List_Start_inner"><a name="3451387">A policy period binds.</a></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="LI_-_List_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="LI_-_List_Item_inner" style="width: 15pt; white-space: nowrap">
                <span class="ri_-_run_in_header">	2.	</span>
              </div>
            </td>
            <td width="100%">
              <div class="LI_-_List_Item_inner"><a name="3451514">The submission process adds </a><span class="cv_-_computer_voice">CREATEPERIOD</span> event to the database transaction. </div>
            </td>
          </tr>
        </table>
      </div>
      <div class="LP_-_List_Para"><a name="3451389">In the file </a><span class="cv_-_computer_voice">SubmissionProcess.gs</span>:</div>
      <div class="CS_-_Code_Single_Line"><a name="3451391">_branch.addEvent( BillingMessageTransport.CREATEPERIOD_MSG )</a></div>
      <div class="LI_-_List_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="LI_-_List_Item_inner" style="width: 15pt; white-space: nowrap">
                <span class="ri_-_run_in_header">	3.	</span>
              </div>
            </td>
            <td width="100%">
              <div class="LI_-_List_Item_inner"><a name="3654700">As PolicyCenter tries to commit the policy period’s bundle, the Event Fired rule set fires. </a></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="LI_-_List_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="LI_-_List_Item_inner" style="width: 15pt; white-space: nowrap">
                <span class="ri_-_run_in_header">	4.	</span>
              </div>
            </td>
            <td width="100%">
              <div class="LI_-_List_Item_inner"><a name="3654710">The </a><span class="uis_-_UI_element_Studio">Event Fired </span><span class="ui_-_UI_element">→ </span><span class="uis_-_UI_element_Studio">Billing System</span> → <span class="uis_-_UI_element_Studio">Policy Period</span> → <span class="uis_-_UI_element_Studio">Bind Period</span> rule detects this event and creates an event message.</div>
            </td>
          </tr>
        </table>
      </div>
      <div class="LI_-_List_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="LI_-_List_Item_inner" style="width: 15pt; white-space: nowrap">
                <span class="ri_-_run_in_header">	5.	</span>
              </div>
            </td>
            <td width="100%">
              <div class="LI_-_List_Item_inner"><a name="3654711">The event message is put into the messaging send queue in the same transaction as the change that triggered the event (the submission).</a></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="LI_-_List_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="LI_-_List_Item_inner" style="width: 15pt; white-space: nowrap">
                <span class="ri_-_run_in_header">	6.	</span>
              </div>
            </td>
            <td width="100%">
              <div class="LI_-_List_Item_inner"><a name="3451613">PolicyCenter in a separate thread pulls a message and delivers it to the </a><span class="cv_-_computer_voice">BillingMessageTransport</span> plugin, which is a <span class="cv_-_computer_voice">MessageTransport</span> plugin. </div>
            </td>
          </tr>
        </table>
      </div>
      <div class="LI_-_List_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="LI_-_List_Item_inner" style="width: 15pt; white-space: nowrap">
                <span class="ri_-_run_in_header">	7.	</span>
              </div>
            </td>
            <td width="100%">
              <div class="LI_-_List_Item_inner"><a name="3451655">The messaging transport (in </a><span class="cv_-_computer_voice">BillingMessageTransport.gs</span>) calls out to the billing plugin.</div>
            </td>
          </tr>
        </table>
      </div>
      <PRE class="CM_-_Code_Middle_Line"><a name="3451414">case CREATEPERIOD_MSG:</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3617678">&nbsp;&nbsp;&nbsp;&nbsp;...</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3451415">&nbsp;&nbsp;&nbsp;&nbsp;plugin.createPolicyPeriod(policyPeriod, getTransactionId(message) + "-2")</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3451416">&nbsp;&nbsp;&nbsp;&nbsp;break</a></PRE>
      <div class="LI_-_List_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="LI_-_List_Item_inner" style="width: 15pt; white-space: nowrap">
                <span class="ri_-_run_in_header">	8.	</span>
              </div>
            </td>
            <td width="100%">
              <div class="LI_-_List_Item_inner"><a name="3451420">The currently-registered implementation of the billing plugin (</a><span class="cvt_-_computer_voice_table">IBillingSystemPlugin</span>) handles the request. PolicyCenter includes two implementations of this interface:</div>
            </td>
          </tr>
        </table>
      </div>
      <div class="BI2_-_Bullet_Item_002c_Level_2_outer" style="margin-left: 67pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="BI2_-_Bullet_Item_002c_Level_2_inner" style="width: 15pt; white-space: nowrap">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI2_-_Bullet_Item_002c_Level_2_inner"><a name="3617726">For demonstration purposes whenever a billing system is unavailable, the class </a><span class="cv_-_computer_voice">StandAloneBillingSystemPlugin</span> implements this interface. This implementation does nothing with the billing information and pretends that a billing system is attached. </div>
            </td>
          </tr>
        </table>
      </div>
      <div class="BI2_-_Bullet_Item_002c_Level_2_outer" style="margin-left: 67pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="BI2_-_Bullet_Item_002c_Level_2_inner" style="width: 15pt; white-space: nowrap">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI2_-_Bullet_Item_002c_Level_2_inner"><a name="3463717">For the real integration with BillingCenter, the class </a><span class="cv_-_computer_voice">BCBillingSystemPlugin</span> implements this interface. See the Gosu file <span class="cv_-_computer_voice">BCBillingSystemPlugin.gs</span> for this code. Wherever this documentation refers to the PolicyCenter side of the built-in BillingCenter integration, this class and its related implementation typically implements this behavior. (However, this class does not handle everything. For example, PolicyCenter handles some behaviors using web services that PolicyCenter publishes.)</div>
            </td>
          </tr>
        </table>
      </div>
      <div class="LI_-_List_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="LI_-_List_Item_inner" style="width: 15pt; white-space: nowrap">
                <span class="ri_-_run_in_header">	9.	</span>
              </div>
            </td>
            <td width="100%">
              <div class="LI_-_List_Item_inner"><a name="3617783">In the </a><span class="cv_-_computer_voice">createPolicyPeriod</span> method, the plugin handles the request by calling web service (SOAP API) calls on BillingCenter:</div>
            </td>
          </tr>
        </table>
      </div>
      <PRE class="CM_-_Code_Middle_Line"><a name="3617805">override function createPolicyPeriod( period: PolicyPeriod, transactionID : String) : String</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3617806"> {</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3617807">   var issuePolicyInfo = new IssuePolicyInfo()</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3617808">   issuePolicyInfo.sync(period)</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3617812">var publicId = billingAPI.issuePolicyPeriod(issuePolicyInfo, transactionID)</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3617813">     </a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3617814">   return publicId</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3617815"> }</a></PRE>
      <div class="LI_-_List_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="LI_-_List_Item_inner" style="width: 15pt; white-space: nowrap">
                <span class="ri_-_run_in_header">	10.	</span>
              </div>
            </td>
            <td width="100%">
              <div class="LI_-_List_Item_inner"><a name="3451942">PolicyCenter calls its billing plugin method </a><span class="cv_-_computer_voice">createPolicyPeriod</span>, which would do different things for different billing systems. In the BillingCenter integration, PolicyCenter integration code constructs an <span class="cv_-_computer_voice">IssuePolicyInfo</span> object that is specific to web services that BillingCenter publishes. These SOAP objects are not Guidewire entities. The web service implementation on the BillingCenter side transforms this SOAP-specific object into what it calls a billing instruction. Internally, BillingCenter uses these billing instructions to track charges and instructions from the policy system. </div>
            </td>
          </tr>
        </table>
      </div>
      <h6 class="HS_-_Head_Sub"><a name="3498445">See also</a></h6>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><a href="javascript:WWHClickedPopup('integration', 'billing-pc.31.06.html#3425396', '');" title="Billing Instructions in BillingCenter" name="3498461">“Billing Instructions in BillingCenter”</a>.</div>
            </td>
          </tr>
        </table>
      </div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><a href="javascript:WWHClickedPopup('integration', 'eventsmessaging.24.01.html#4197044', '');" title="Messaging and Events" name="3498506">“Messaging and Events”</a></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="H3_-_Heading_3_outer" style="margin-left: 36pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <h5 class="H3_-_Heading_3_inner" style="width: 18pt; white-space: nowrap"></h5>
            </td>
            <td width="100%">
              <h5 class="H3_-_Heading_3_inner"><a name="3498499">Billing Center Sample Code to a Create Billing Instruction from a PolicyCenter Request</a></h5>
            </td>
          </tr>
        </table>
      </div>
      <div class="LP_-_List_Para"><a name="3452087">BillingCenter uses code like the following to handle the web service request from PolicyCenter and create the billing instruction:</a></div>
      <PRE class="CM_-_Code_Middle_Line"><a name="3451434">@Throws(AlreadyExecutedException, "if the SOAP request already executed")</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3451435"> @Throws(BadIdentifierException, "If a policy already exists with the given number")</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3451436"> function issuePolicyPeriod(issuePolicyInfo : IssuePolicyInfo, transactionId : String) : String{</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3451437">   var publicID = tryCatch( \ -&gt; {</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3451438">     var issuance = issuePolicyInfo.toIssuance()</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3451439">     var bi = BillingInstructionUtil.executeAndCommit(issuance) as Issuance</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3451440">     return bi.IssuancePolicyPeriod.PublicID </a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3451441">   }, transactionId)</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3451442">   return publicID</a></PRE>
      <PRE class="CL_-_Code_Last_Line"><a name="3451443"> }</a></PRE>
      <div class="H3_-_Heading_3_outer" style="margin-left: 36pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <h5 class="H3_-_Heading_3_inner" style="width: 18pt; white-space: nowrap"></h5>
            </td>
            <td width="100%">
              <h5 class="H3_-_Heading_3_inner"><a name="3461986">Retryability of Messages</a></h5>
            </td>
          </tr>
        </table>
      </div>
      <div class="B_-_Body"><a name="3463778">If there is an integration error, the message error is always retryable. There are no non-retryable errors in the built-in PolicyCenter/BillingCenter integration messaging. </a></div>
      <div class="B_-_Body"><a name="3463779">In some cases, an application creates an activity whenever there is an error, so you do not need to rely on event message administration user interface to see the problem. For example, if a line of business uses renewal offers, suppose the renewal is already non-renewed or otherwise not in a state that supports automatic renewal. If the billing system receives a payment and notifies PolicyCenter, a user must decide what to do. In this case, PolicyCenter creates an activity.</a></div>
      <h4 class="H2_-_Heading_2"><a name="3467058">Exit Points Between Applications</a></h4>
      <div class="B_-_Body"><a name="3467059">There are parts of the PolicyCenter user interface that can directly open a separate browser window to open BillingCenter to directly view and edit billing information for an account. The PCF feature called Exit Points implements these separate browser windows. To set the URL for the exit point to BillingCenter, configure the configuration parameter in </a><span class="cv_-_computer_voice">config.xml</span> called <span class="cv_-_computer_voice">BillingSystemURL</span>. Set this to the base URL for the server, such as:</div>
      <div class="CS_-_Code_Single_Line"><a name="3478066">http://server/bc</a></div>
      <div class="B_-_Body"><a name="3478194">If you want to integrate with billing systems other than BillingCenter and that system requires additional parameters, you can add them to the URL. If this parameter is absent or set to the empty string, the exit point buttons in the user interface are hidden. (If the URL entrypoint URL syntax is different enough from what BillingCenter uses, modify the PCF code for the Exit Point.)</a></div>
      <div class="B_-_Body"><a name="3478176">If you want to create additional Exit Points in either application, carefully consider how you want them to work before implementing them. For example, suppose you want BillingCenter to have a new Exit Point to PolicyCenter so that a BillingCenter user can view PolicyCenter policy file information. Some things to consider in your integrations:</a></div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><a name="3478251">How do you want this exit point to appear in the user interface?</a></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><a name="3478303">How do you want authentication to work between the applications? Are you using a single-sign-on authentication system? Do you have completely different sets of users for each application?</a></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><a name="3478304">How do you want to set permissions for BillingCenter users? For example, do you want to support BillingCenter users creating and editing PolicyCenter Policy File notes? Do you want to limit users to certain note types? </a></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="B_-_Body"><a name="3478149">For assistance designing and implementing exit points between applications and setting up permissions in each application, contact Guidewire Customer Support.</a></div>
      <h4 class="H2_-_Heading_2"><a name="3485454">Configuring Which System Receives Contact Updates</a></h4>
      <div class="B_-_Body"><a name="3513873">If a contact associated with billing information changes in PolicyCenter, PolicyCenter determines what system to notify by calling the billing system plugin method </a><span class="cv_-_computer_voice">getCompatibilityMode</span>. If you return <span class="cv_-_computer_voice">7.0.0</span>, PolicyCenter sends contact updates to the contact system, not to the billing system. If you return <span class="cv_-_computer_voice">4.0.0</span>, PolicyCenter sends contact updates directly to the billing system.</div>
      <div class="NI_-_Note_Important">
        <span class="n_-_note">IMPORTANT   </span><a name="3513874">The </a><span class="cv_-_computer_voice">getCompatibilityMode</span> method determines whether PolicyCenter sends contact updates to the billing system or the external contact system. Choose carefully how you want to configure this method.</div>
      <script type="text/javascript" language="JavaScript1.2">
        <!--
          // Clear related topics
          //
          WWHClearRelatedTopics();

          document.writeln(WWHRelatedTopicsInlineHTML());
        // -->
      </script>
    </blockquote>
    <script type="text/javascript" language="JavaScript1.2">
      <!--
        document.write(WWHRelatedTopicsDivTag() + WWHPopupDivTag() + WWHALinksDivTag());
      // -->
    </script>
  </body>
</html>