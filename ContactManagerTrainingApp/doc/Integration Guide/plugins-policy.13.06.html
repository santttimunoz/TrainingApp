<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xml:lang="en" lang="en" xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
    <meta http-equiv="Content-Style-Type" content="text/css" />
    <!-- MOTW-DISABLED saved from url=(0014)about:internet -->
    <title>Policy Term Plugin</title>
    <link rel="StyleSheet" href="css/plugins-policy.css" type="text/css" media="all" />
    <link rel="StyleSheet" href="css/webworks.css" type="text/css" media="all" />
    <link rel="StyleSheet" href="css/css-guidewire-extra.css" type="text/css" media="all" />
    <script type="text/javascript" language="JavaScript1.2" src="wwhdata/common/context.js"></script>
    <script type="text/javascript" language="JavaScript1.2" src="wwhdata/common/towwhdir.js"></script>
    <script type="text/javascript" language="JavaScript1.2" src="wwhdata/common/wwhpagef.js"></script>
    <script type="text/javascript" language="JavaScript1.2">
      <!--
        var  WebWorksRootPath = "";
      // -->
    </script>
    <script type="text/javascript" language="JavaScript1.2">
      <!--
        // Set reference to top level help frame
        //
        var  WWHFrame = WWHGetWWHFrame("", true);
      // -->
    </script>
    <script type="text/javascript" language="JavaScript1.2" src="scripts/expand.js"></script>
    <!-- THE FOLLOWING IS A GUIDEWIRE STYLE DEFINITION FOR THE LINK TO THIS FEATURE -->
    <link rel="StyleSheet" href="css/css-guidewire-extra.css" type="text/css" media="all" />
    <!-- THE FOLLOWING IS A GUIDEWIRE GSCRIPT FUNCTION FOR THE LINK TO THIS FEATURE -->
    <script type="text/javascript">
function guidewire_selectall()
{
var text_val=eval("document.linktothisurlform.urlfield");
text_val.focus();
text_val.select();
}
</script>
  </head>
  <body onLoad="WWHUpdate();" onUnload="WWHUnload();" onKeyDown="WWHHandleKeyDown((document.all||document.getElementById||document.layers)?event:null);" onKeyPress="WWHHandleKeyPress((document.all||document.getElementById||document.layers)?event:null);" onKeyUp="WWHHandleKeyUp((document.all||document.getElementById||document.layers)?event:null);">
    <!-- THE FOLLOWING IS A GUIDEWIRE DIV FOR THE 'LINK TO THIS' FEATURE -->
    <div id="linkToThisPage" class="popup" style="display: none;">
      <div class="popupTitle">Link Directly to This Page 
           <a href="#" onclick="var thePopup = getElementById('linkToThisPage');thePopup.style.display='none';return false;"><img class="popupClosebox" src="wwhelp/wwhimpl/common/images/close.gif" /></a></div>
      <div style="padding:6px;">
        <div class="popupText" id="linkToThisPageBookmark">An error has occurred if you see this messsage.</div>
        <form name="linktothisurlform" method="post" action="" style="width:275px;margin:0px">
          <input type="text" class="popupURLText" id="linkToThisPageURL" name="urlfield" rows="1" cols="55" onClick="guidewire_selectall();" onFocus="guidewire_selectall();"></input>
        </form>
      </div>
    </div>
    <br />
    <div class="WebWorks_Breadcrumbs" style="text-align: left;">
      <span>PolicyCenter Integration Guide</span> : 
    <span class="WebWorks_Breadcrumbs" style="text-align: left;"><a class="WebWorks_Breadcrumb_Link" href="p-plugins.html#2391418">Plugins</a> : <a class="WebWorks_Breadcrumb_Link" href="plugins-policy.13.01.html#2391418">Account and Policy Plugins</a> : Policy Term Plugin</span></div>
    <hr align="left" />
    <blockquote>
      <h3 class="H1_-_Heading_1"><a name="2391418">Policy Term Plugin</a></h3>
      <div class="B_-_Body"><a name="2391489">The policy term plugin (</a><span class="cv_-_computer_voice">IPolicyTermPlugin</span>) calculates values related to policy terms. PolicyCenter includes a built-in implementation of this plugin (<span class="cv_-_computer_voice">PolicyTermPlugin</span>). Find the built-in implementation in Studio in the <span class="cv_-_computer_voice">gw.plugin.policyterm.impl</span> package. You can modify this plugin to customize it. Or, implement your own instance of this plugin to customize PolicyCenter application logic.</div>
      <div class="H3_-_Heading_3_outer" style="margin-left: 36pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <h5 class="H3_-_Heading_3_inner" style="width: 18pt; white-space: nowrap"></h5>
            </td>
            <td width="100%">
              <h5 class="H3_-_Heading_3_inner"><a name="2391424">Calculating the Period End Date from a Term Type</a></h5>
            </td>
          </tr>
        </table>
      </div>
      <div class="B_-_Body"><a name="2391426">Implement the </a><span class="cv_-_computer_voice">calculatePeriodEnd</span> method which returns the default expiration date.</div>
      <div class="B_-_Body"><a name="2581266">The method signature is:</a></div>
      <PRE class="CF_-_Code_First_Line"><a name="2570468">override function calculatePeriodEnd( effDate : Date, term : TermType, policyPeriod : PolicyPeriod ):</a></PRE>
      <PRE class="CL_-_Code_Last_Line"><a name="2570538">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Date</a></PRE>
      <div class="B_-_Body"><a name="2570465">The input parameters to </a><span class="cv_-_computer_voice">calculatePeriodEnd</span> are:</div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><span class="cv_-_computer_voice"><a name="2570619">effDate</a></span> – The effective or start date (a <span class="cv_-_computer_voice">Date</span> object) of the policy period.</div>
            </td>
          </tr>
        </table>
      </div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><span class="cv_-_computer_voice"><a name="2580299">term</a></span> – The policy term type (a <span class="cv_-_computer_voice">TermType</span> typecode). This value must be the <span class="cv_-_computer_voice">policyPeriod.TermType</span> unless the <span class="cv_-_computer_voice">policyPeriod.TermType</span> is <span class="cv_-_computer_voice">null</span>.</div>
            </td>
          </tr>
        </table>
      </div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><span class="cv_-_computer_voice"><a name="2580374">policyPeriod</a></span> – The policy period (<span class="cv_-_computer_voice">PolicyPeriod</span> object). </div>
            </td>
          </tr>
        </table>
      </div>
      <div class="B_-_Body"><a name="2391427">This plugin method sets the expiration date for every </a><span class="cv_-_computer_voice">TermType</span> value. In the built-in implementation, term type possible values are <span class="cv_-_computer_voice">Annual</span>, <span class="cv_-_computer_voice">HalfYear</span>, and <span class="cv_-_computer_voice">Other</span>. You can extend this typelist as desired. </div>
      <div class="B_-_Body"><a name="2391440">Guidewire recommends you make the calculations in this method simple, such as adding a fixed number of years, months, or days. If you make the calculations too complex, you might need to check for edge case conditions in other PolicyCenter code. Consider explaining these conditions in the user interface so users understand how these values were calculated. </a></div>
      <h6 class="HS_-_Head_Sub"><a name="2583221">Date Reconciliation in the Built-in Implementation</a></h6>
      <div class="B_-_Body"><a name="2583324">Certain term types, such as half-year terms, have varying numbers of days. Date reconciliation ensures that, in the start month of the initial policy period, a new policy period starts on the same day of the month as the initial policy period. For example, date reconciliation ensures that two half-year terms provide coverage for one year exactly. You may need to implement date reconciliation for your custom term types.</a></div>
      <div class="B_-_Body"><a name="2585063">This topic describes how the </a><span class="cv_-_computer_voice">calculatePeriodEnd</span> method in the built-in plugin implementation (<span class="cv_-_computer_voice">PolicyTermPlugin</span>) does date reconciliation for half-year terms. In some calculations, the built-in implementation uses the <span class="e_-_emphasis">initial policy period start date</span>, the start date of the first policy period for this policy.</div>
      <div class="B_-_Body"><a name="2607049">Assume a policy with a half-year term where the first policy period starts on day </a><span class="p_-_parameter">X</span> of a month. The <span class="cv_-_computer_voice">calculatePeriodEnd</span> method provides date reconciliation for the policy period end date by finding the first matching condition:</div>
      <div class="T_-_Table"><a name="2607039">&nbsp;</a></div>
      <table class="withHeading" style="text-align: left" border="0" cellpadding="10" cellspacing="0" summary="">
        <caption></caption>
        <tr>
          <td style="border-bottom-color: #000000; border-bottom-style: solid; border-bottom-width: 0.5pt; border-top-color: #000000; border-top-style: solid; border-top-width: 0.5pt; padding-bottom: 4pt; padding-left: 2pt; padding-right: 8pt; padding-top: 0pt; vertical-align: bottom">
            <div class="TH_-_Table_Heading"><a name="2608068">Condition</a></div>
          </td>
          <td style="border-bottom-color: #000000; border-bottom-style: solid; border-bottom-width: 0.5pt; border-top-color: #000000; border-top-style: solid; border-top-width: 0.5pt; padding-bottom: 4pt; padding-left: 2pt; padding-right: 8pt; padding-top: 0pt; vertical-align: bottom">
            <div class="TH_-_Table_Heading"><a name="2608070">Period end</a></div>
          </td>
        </tr>
        <tr>
          <td style="border-bottom-color: #c0d1d1; border-bottom-style: solid; border-bottom-width: 0.15pt; border-top-color: #000000; border-top-style: solid; border-top-width: 0.5pt; padding-bottom: 4pt; padding-left: 2pt; padding-right: 8pt; padding-top: 0pt; vertical-align: top">
            <div class="LST_-_List_Start_Table_outer" style="margin-left: 0pt">
              <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
                <tr style="vertical-align: baseline">
                  <td>
                    <div class="LST_-_List_Start_Table_inner" style="width: 9.36pt; white-space: nowrap">
                      <span class="s_-_strong">1. 	</span>
                    </div>
                  </td>
                  <td width="100%">
                    <div class="LST_-_List_Start_Table_inner"><a name="2608072">If the initial policy period start date is day </a><span class="pt_-_parameter_in_table">X</span> of a month</div>
                  </td>
                </tr>
              </table>
            </div>
          </td>
          <td style="border-bottom-color: #c0d1d1; border-bottom-style: solid; border-bottom-width: 0.15pt; border-top-color: #000000; border-top-style: solid; border-top-width: 0.5pt; padding-bottom: 4pt; padding-left: 2pt; padding-right: 8pt; padding-top: 0pt; vertical-align: top">
            <div class="TT_-_Table_Text"><a name="2608075">Then the policy period end date is day </a><span class="pt_-_parameter_in_table">X</span> unless one of the following conditions is true</div>
          </td>
        </tr>
        <tr>
          <td style="border-bottom-color: #c0d1d1; border-bottom-style: solid; border-bottom-width: 0.15pt; border-top-color: #c0d1d1; border-top-style: solid; border-top-width: 0.15pt; padding-bottom: 4pt; padding-left: 2pt; padding-right: 8pt; padding-top: 0pt; vertical-align: top">
            <div class="LIT_-_List_Item_Table_outer" style="margin-left: 0pt">
              <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
                <tr style="vertical-align: baseline">
                  <td>
                    <div class="LIT_-_List_Item_Table_inner" style="width: 9.36pt; white-space: nowrap">
                      <span class="s_-_strong">2. 	</span>
                    </div>
                  </td>
                  <td width="100%">
                    <div class="LIT_-_List_Item_Table_inner"><a name="2608077"> If the initial policy period start date is day </a><span class="pt_-_parameter_in_table">X</span> of a month and the policy period end date is in a month with fewer than <span class="pt_-_parameter_in_table">X</span> days</div>
                  </td>
                </tr>
              </table>
            </div>
          </td>
          <td style="border-bottom-color: #c0d1d1; border-bottom-style: solid; border-bottom-width: 0.15pt; border-top-color: #c0d1d1; border-top-style: solid; border-top-width: 0.15pt; padding-bottom: 4pt; padding-left: 2pt; padding-right: 8pt; padding-top: 0pt; vertical-align: top">
            <div class="TT_-_Table_Text"><a name="2608080">Then the policy period end date is the last day of the month</a></div>
          </td>
        </tr>
        <tr>
          <td style="border-bottom-color: #000000; border-bottom-style: solid; border-bottom-width: 0.5pt; border-top-color: #c0d1d1; border-top-style: solid; border-top-width: 0.15pt; padding-bottom: 4pt; padding-left: 2pt; padding-right: 8pt; padding-top: 0pt; vertical-align: top">
            <div class="LIT_-_List_Item_Table_outer" style="margin-left: 0pt">
              <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
                <tr style="vertical-align: baseline">
                  <td>
                    <div class="LIT_-_List_Item_Table_inner" style="width: 9.36pt; white-space: nowrap">
                      <span class="s_-_strong">3. 	</span>
                    </div>
                  </td>
                  <td width="100%">
                    <div class="LIT_-_List_Item_Table_inner"><a name="2608082"> If the initial policy period start date is day </a><span class="pt_-_parameter_in_table">X</span> of a month, and <span class="pt_-_parameter_in_table">X</span> is the last day of the month</div>
                  </td>
                </tr>
              </table>
            </div>
          </td>
          <td style="border-bottom-color: #000000; border-bottom-style: solid; border-bottom-width: 0.5pt; border-top-color: #c0d1d1; border-top-style: solid; border-top-width: 0.15pt; padding-bottom: 4pt; padding-left: 2pt; padding-right: 8pt; padding-top: 0pt; vertical-align: top">
            <div class="TT_-_Table_Text"><a name="2608085">Then subsequent policy period end dates are the last day of the month. </a></div>
          </td>
        </tr>
      </table>
      <div class="B_-_Body"><a name="2585097">For example, the month of August has 31 days. The first half-year term of a policy starts on August 30, 2014. Date reconciliation ensures two half-year terms provide coverage for a full year:</a></div>
      <div class="T_-_Table"><a name="2583894">&nbsp;</a></div>
      <table class="withHeading" style="text-align: left" border="0" cellpadding="10" cellspacing="0" summary="">
        <caption></caption>
        <tr>
          <td style="border-bottom-color: #000000; border-bottom-style: solid; border-bottom-width: 0.5pt; border-top-color: #000000; border-top-style: solid; border-top-width: 0.5pt; padding-bottom: 4pt; padding-left: 2pt; padding-right: 8pt; padding-top: 0pt; vertical-align: bottom">
            <div class="TH_-_Table_Heading"><a name="2584673">Period start</a></div>
          </td>
          <td style="border-bottom-color: #000000; border-bottom-style: solid; border-bottom-width: 0.5pt; border-top-color: #000000; border-top-style: solid; border-top-width: 0.5pt; padding-bottom: 4pt; padding-left: 2pt; padding-right: 8pt; padding-top: 0pt; vertical-align: bottom">
            <div class="TH_-_Table_Heading"><a name="2584675">Period end</a></div>
          </td>
          <td style="border-bottom-color: #000000; border-bottom-style: solid; border-bottom-width: 0.5pt; border-top-color: #000000; border-top-style: solid; border-top-width: 0.5pt; padding-bottom: 4pt; padding-left: 2pt; padding-right: 8pt; padding-top: 0pt; vertical-align: bottom">
            <div class="TH_-_Table_Heading"><a name="2584677">Description</a></div>
          </td>
        </tr>
        <tr>
          <td style="border-bottom-color: #c0d1d1; border-bottom-style: solid; border-bottom-width: 0.15pt; border-top-color: #000000; border-top-style: solid; border-top-width: 0.5pt; padding-bottom: 4pt; padding-left: 2pt; padding-right: 8pt; padding-top: 0pt; vertical-align: top">
            <div class="TT_-_Table_Text"><a name="2584679"> August 30, 2014</a></div>
          </td>
          <td style="border-bottom-color: #c0d1d1; border-bottom-style: solid; border-bottom-width: 0.15pt; border-top-color: #000000; border-top-style: solid; border-top-width: 0.5pt; padding-bottom: 4pt; padding-left: 2pt; padding-right: 8pt; padding-top: 0pt; vertical-align: top">
            <div class="TT_-_Table_Text"><a name="2584681">February 28, 2015</a></div>
          </td>
          <td style="border-bottom-color: #c0d1d1; border-bottom-style: solid; border-bottom-width: 0.15pt; border-top-color: #000000; border-top-style: solid; border-top-width: 0.5pt; padding-bottom: 4pt; padding-left: 2pt; padding-right: 8pt; padding-top: 0pt; vertical-align: top">
            <div class="TT_-_Table_Text"><a name="2584683">Meets condition 2. The period end month, February, has fewer than 30 days, so the period ends on the last day of February.</a></div>
          </td>
        </tr>
        <tr>
          <td style="border-bottom-color: #000000; border-bottom-style: solid; border-bottom-width: 0.5pt; border-top-color: #c0d1d1; border-top-style: solid; border-top-width: 0.15pt; padding-bottom: 4pt; padding-left: 2pt; padding-right: 8pt; padding-top: 0pt; vertical-align: top">
            <div class="TT_-_Table_Text"><a name="2584685"> February 28, 2015</a></div>
          </td>
          <td style="border-bottom-color: #000000; border-bottom-style: solid; border-bottom-width: 0.5pt; border-top-color: #c0d1d1; border-top-style: solid; border-top-width: 0.15pt; padding-bottom: 4pt; padding-left: 2pt; padding-right: 8pt; padding-top: 0pt; vertical-align: top">
            <div class="TT_-_Table_Text"><a name="2584687">August 30, 2015</a></div>
          </td>
          <td style="border-bottom-color: #000000; border-bottom-style: solid; border-bottom-width: 0.5pt; border-top-color: #c0d1d1; border-top-style: solid; border-top-width: 0.15pt; padding-bottom: 4pt; padding-left: 2pt; padding-right: 8pt; padding-top: 0pt; vertical-align: top">
            <div class="TT_-_Table_Text"><a name="2584689">Conditions 2 and 3 do not apply, therefore it meets condition 1. August is the same month that the initial policy period started, so the period ends on the same day.</a></div>
          </td>
        </tr>
      </table>
      <div class="B_-_Body"><a name="2583297">The built-in plugin uses the </a><span class="cv_-_computer_voice">policyPeriod</span> parameter for date reconciliation. The <span class="cv_-_computer_voice">calculatePeriodEnd</span> method uses the <span class="cv_-_computer_voice">PolicyPeriod.Job.shouldPerformDateReconciliation</span> flag to determine whether to reconcile the date. By default, the flag is <span class="cv_-_computer_voice">false</span>. However, the <span class="cv_-_computer_voice">SubmissionImpl</span> and <span class="cv_-_computer_voice">RenewalImpl</span> classes set the flag to <span class="cv_-_computer_voice">true</span>.</div>
      <div class="H3_-_Heading_3_outer" style="margin-left: 36pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <h5 class="H3_-_Heading_3_inner" style="width: 18pt; white-space: nowrap"></h5>
            </td>
            <td width="100%">
              <h5 class="H3_-_Heading_3_inner"><a name="2391443">Calculating a Term Type from Period Start and End Dates</a></h5>
            </td>
          </tr>
        </table>
      </div>
      <div class="B_-_Body"><a name="2391444">Implement the </a><span class="cv_-_computer_voice">calculatePolicyTerm</span> method to determine the term type of a policy term given its start date, a period end date, and a <span class="cv_-_computer_voice">Product</span>. The method must return a <span class="cv_-_computer_voice">TermType</span> typecode. </div>
      <div class="B_-_Body"><a name="2553215">To make date calculations time-insensitive, consider using the </a><span class="cv_-_computer_voice">PolicyPeriod</span> method <span class="cv_-_computer_voice">trimToMidnight</span> to trim excess time values backward to midnight.</div>
      <div class="B_-_Body"><a name="2553320">Some lines of business allow extra days of coverage at the end of an annual policy term (</a><span class="cv_-_computer_voice">TermType</span> is <span class="cv_-_computer_voice">Annual</span>) just in case the policy has not yet been renewed. You can add additional days to an annual term by implementing the <span class="cv_-_computer_voice">AdditionalDaysInAnnualTerm</span> property in the <span class="cv_-_computer_voice">PolicyLineMethods</span> implementation class for one or more lines of business. These classes have names with the LOB prefix with the pattern <span class="p_-_parameter">LOB</span><span class="cv_-_computer_voice">PolicyLineMethods</span>. In the base configuration, an annual workers’ compensation policy provides coverage for one year plus 16 days by defining this property in the <span class="cv_-_computer_voice">WCPolicyLineMethods</span> class:</div>
      <PRE class="CF_-_Code_First_Line"><a name="2554013">override property get AdditionalDaysInAnnualTerm() : int {</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2554014">&nbsp;&nbsp;&nbsp;&nbsp;return 16</a></PRE>
      <PRE class="CL_-_Code_Last_Line"><a name="2554009">}</a></PRE>
      <script type="text/javascript" language="JavaScript1.2">
        <!--
          // Clear related topics
          //
          WWHClearRelatedTopics();

          document.writeln(WWHRelatedTopicsInlineHTML());
        // -->
      </script>
    </blockquote>
    <script type="text/javascript" language="JavaScript1.2">
      <!--
        document.write(WWHRelatedTopicsDivTag() + WWHPopupDivTag() + WWHALinksDivTag());
      // -->
    </script>
  </body>
</html>