<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xml:lang="en" lang="en" xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
    <meta http-equiv="Content-Style-Type" content="text/css" />
    <!-- MOTW-DISABLED saved from url=(0014)about:internet -->
    <title>Starting the Server to Begin Automatic Database Upgrade</title>
    <link rel="StyleSheet" href="css/procedure-db-e.css" type="text/css" media="all" />
    <link rel="StyleSheet" href="css/webworks.css" type="text/css" media="all" />
    <link rel="StyleSheet" href="css/css-guidewire-extra.css" type="text/css" media="all" />
    <script type="text/javascript" language="JavaScript1.2" src="wwhdata/common/context.js"></script>
    <script type="text/javascript" language="JavaScript1.2" src="wwhdata/common/towwhdir.js"></script>
    <script type="text/javascript" language="JavaScript1.2" src="wwhdata/common/wwhpagef.js"></script>
    <script type="text/javascript" language="JavaScript1.2">
      <!--
        var  WebWorksRootPath = "";
      // -->
    </script>
    <script type="text/javascript" language="JavaScript1.2">
      <!--
        // Set reference to top level help frame
        //
        var  WWHFrame = WWHGetWWHFrame("", true);
      // -->
    </script>
    <script type="text/javascript" language="JavaScript1.2" src="scripts/expand.js"></script>
    <!-- THE FOLLOWING IS A GUIDEWIRE STYLE DEFINITION FOR THE LINK TO THIS FEATURE -->
    <link rel="StyleSheet" href="css/css-guidewire-extra.css" type="text/css" media="all" />
    <!-- THE FOLLOWING IS A GUIDEWIRE GSCRIPT FUNCTION FOR THE LINK TO THIS FEATURE -->
    <script type="text/javascript">
function guidewire_selectall()
{
var text_val=eval("document.linktothisurlform.urlfield");
text_val.focus();
text_val.select();
}
</script>
  </head>
  <body onLoad="WWHUpdate();" onUnload="WWHUnload();" onKeyDown="WWHHandleKeyDown((document.all||document.getElementById||document.layers)?event:null);" onKeyPress="WWHHandleKeyPress((document.all||document.getElementById||document.layers)?event:null);" onKeyUp="WWHHandleKeyUp((document.all||document.getElementById||document.layers)?event:null);">
    <!-- THE FOLLOWING IS A GUIDEWIRE DIV FOR THE 'LINK TO THIS' FEATURE -->
    <div id="linkToThisPage" class="popup" style="display: none;">
      <div class="popupTitle">Link Directly to This Page 
           <a href="#" onclick="var thePopup = getElementById('linkToThisPage');thePopup.style.display='none';return false;"><img class="popupClosebox" src="wwhelp/wwhimpl/common/images/close.gif" /></a></div>
      <div style="padding:6px;">
        <div class="popupText" id="linkToThisPageBookmark">An error has occurred if you see this messsage.</div>
        <form name="linktothisurlform" method="post" action="" style="width:275px;margin:0px">
          <input type="text" class="popupURLText" id="linkToThisPageURL" name="urlfield" rows="1" cols="55" onClick="guidewire_selectall();" onFocus="guidewire_selectall();"></input>
        </form>
      </div>
    </div>
    <br />
    <div class="WebWorks_Breadcrumbs" style="text-align: left;">
      <span>PolicyCenter Upgrade Guide</span> : 
    <span class="WebWorks_Breadcrumbs" style="text-align: left;"><a class="WebWorks_Breadcrumb_Link" href="p-upgrade-e.html#1914534">Upgrading from 8.0.x</a> : <a class="WebWorks_Breadcrumb_Link" href="procedure-db-e.07.01.html#1914534">Upgrading the PolicyCenter 8.0.x Database</a> : Starting the Server to Begin Automatic Database Upgrade</span></div>
    <hr align="left" />
    <blockquote>
      <h3 class="H1_-_Heading_1"><a name="1914534">Starting the Server to Begin Automatic Database Upgrade</a></h3>
      <div class="B_-_Body"><a name="1914535">The database upgrade is an automatic process that occurs as you start the server with the upgraded configuration of a new PolicyCenter version. The database upgrade normally completes in a few hours or less.</a></div>
      <div class="B_-_Body"><a name="1914539">If the database upgrade stops before completing, then restore your database from the backup, correct any issues reported, and repeat the database upgrade.</a></div>
      <div class="NI_-_Note_Important">
        <span class="n_-_note">IMPORTANT   </span><a name="1914540">Before starting the upgrade, update database server software and operating systems as needed to meet the installation requirements of PolicyCenter 8.0.4. See the </a><span class="e_-_emphasis">Guidewire Platform Support Matrix</span> for current system and patch level requirements. The <span class="e_-_emphasis">Guidewire Platform Support Matrix </span>is available from the Guidewire Resource Portal at <span class="cv_-_computer_voice" style="color: #0a947f; font-weight: bold"><a href="https://guidewire.custhelp.com/app/resources/products/platform" target="external_window">https://guidewire.custhelp.com/app/resources/products/platform</a></span>.</div>
      <div class="NW_-_Note_Warning">
        <span class="w_-_warning">WARNING  </span><a name="1914548">Except for your first database upgrade trials, do not start the server until you have upgraded all rules. Otherwise, default validation rules execute. This could strand objects at a high validation level and make it impossible to edit parts of the object.</a></div>
      <div class="NW_-_Note_Warning">
        <span class="w_-_warning">WARNING  </span><a name="1914549">The database upgrade runs a series of version checks prior to making any changes. If any of these checks fail, the upgrade aborts and reports an error message. You can fix the issue, create an updated backup of the database and attempt the upgrade again without restoring from a backup. However, if you experience a failure during the version triggers or upgrade steps portion of the upgrade, refresh the database from a backup before attempting the upgrade again.</a></div>
      <div class="B_-_Body"><a name="1914550">Guidewire requires that you use a separate mirror database for reporting. If you did not do so, then you can experience problems during a database upgrade that are severe enough to prevent the upgrade. </a></div>
      <div class="B_-_Body"><a name="1914551">In particular, the Premium Accounting extension package SQL scripts create special tables in the reporting database that reporting uses for storing premium accounting accrual data. The reporting scripts use these tables, but the PolicyCenter application does not. If you created these tables in a production database, then any attempt to upgrade that production database will fail.</a></div>
      <div class="B_-_Body"><a name="1914552">If you encounter this situation, move data from all </a><span class="cv_-_computer_voice">pcrt_</span> prefixed tables to another schema. Then, drop all <span class="cv_-_computer_voice">pcrt_</span> prefixed tables from the database that you want to upgrade before starting the server to launch the upgrade.</div>
      <h4 class="H2_-_Heading_2"><a name="1914553">Test the Database Upgrade</a></h4>
      <div class="B_-_Body"><a name="1914554">Prior to attempting the database upgrade on a full-production database clone, test the database upgrade.</a></div>
      <h6 class="HS_-_Head_Sub"><a name="1914555">To test the database upgrade</a></h6>
      <div class="LS_-_List_Start_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="LS_-_List_Start_inner" style="width: 15pt; white-space: nowrap">
                <span class="ri_-_run_in_header">	1.	</span>
              </div>
            </td>
            <td width="100%">
              <div class="LS_-_List_Start_inner"><a name="1914556">Connected to the built-in Quickstart database, successfully start the built-in Quickstart application server with a merged configuration data model, including merged extensions, data types, field validators, and so forth.</a></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="LI_-_List_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="LI_-_List_Item_inner" style="width: 15pt; white-space: nowrap">
                <span class="ri_-_run_in_header">	2.	</span>
              </div>
            </td>
            <td width="100%">
              <div class="LI_-_List_Item_inner"><a name="1914557">Connected to an empty database on an Oracle or SQL Server database server, successfully start the Quickstart application server from the preceding step.</a></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="LI_-_List_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="LI_-_List_Item_inner" style="width: 15pt; white-space: nowrap">
                <span class="ri_-_run_in_header">	3.	</span>
              </div>
            </td>
            <td width="100%">
              <div class="LI_-_List_Item_inner"><a name="1914558">Connected to a restored backup of a production clone, start either the same Quickstart server from the preceding step or a supported third-party application server with your custom configuration.</a></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="B_-_Body"><a name="1914559">In a development environment the database upgrade process records checkpoints of upgrade triggers that complete successfully. You can restart a failed database upgrade, and it resumes with the upgrade trigger that failed. This restart feature helps you test the upgrade with realistically large data sets. You avoid time spent to restore the database and rerun upgrade triggers that worked successfully. </a></div>
      <div class="B_-_Body"><a name="1914560">Guidewire provides this feature for convenience while testing. However, it does not work for all failure scenarios. Even in development mode, under certain scenarios, you will have to restore a backup of the database taken prior to the upgrade attempts and then run the upgrade.</a></div>
      <div class="B_-_Body"><a name="1914561">The database upgrade writes SQL executed by the failed trigger to the console. To restart a test database upgrade from a checkpoint reached in an earlier upgrade, manually roll back any database changes that occurred during the upgrade trigger that failed. Resolve the problem that caused the trigger to fail. Then start the server again to restart the upgrade. The upgrade skips successful upgrade triggers and continues by rerunning the trigger that failed. </a></div>
      <div class="B_-_Body"><a name="1914562">A test run of your upgrade is successful only when it runs from start to finish without a restart. </a></div>
      <div class="NW_-_Note_Warning">
        <span class="w_-_warning">WARNING  </span><a name="1914563">Never use the restart feature of database upgrade in a production environment. </a></div>
      <h4 class="H2_-_Heading_2"><a name="1914564">Integrations and Starting the Server</a></h4>
      <div class="B_-_Body"><a name="1914565">Disable all integrations during the automatic database upgrade. Integration points might require updates due to changes in Guidewire APIs. See the </a><span class="bt_-_book_title">PolicyCenter New and Changed Guide</span> for specifics.</div>
      <div class="B_-_Body"><a name="1914569">It is not necessary to have completely migrated integrations before attempting to start the server for the first time. If you have integrations that rely on non-Guidewire applications, do not expect these integrations to work the first time you start the server.</a></div>
      <h4 class="H2_-_Heading_2"><a name="1914570">Understanding the Automatic Database Upgrade</a></h4>
      <div class="B_-_Body"><a name="1914571">As the database upgrade proceeds, it logs messages to the console as well as the log file describing its progress. The database upgrade process requires thousands of steps, divided into three phases. Due to the relational nature of a database, these phases must execute in a specific order for the upgrade to succeed. </a></div>
      <div class="B_-_Body"><a name="1914572">During the first phase, the upgrader first executes custom </a><span class="cv_-_computer_voice">BeforeUpgradeVersionTrigger</span> version checks and triggers defined in the <span class="cv_-_computer_voice">IDatamodelUpgrade</span> plugin. The upgrader next runs version checks defined by Guidewire. Then, the upgrader uses a set of version triggers defined by Guidewire to determine the actions that are required. The database upgrader requires version triggers in order to perform the following types of tasks:</div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><a name="1914573">changing a datatype (other than just length)</a></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><a name="1914574">migrating data</a></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><a name="1914575">dropping a column</a></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><a name="1914576">dropping a table</a></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><a name="1914577">renaming a column</a></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><a name="1914578">renaming a table</a></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="B_-_Body"><a name="1914579">Specific version triggers are described in this topic.</a></div>
      <div class="B_-_Body"><a name="1914580">Many version triggers have version checks associated with them. These checks ensure that the database is ready for the associated version trigger. The database upgrade runs all checks before running any version triggers. If a check detects a problem, it reports the issue, including a sample SQL query to find specific problematic records. If a version check discovers an issue, the database upgrade stops before any version triggers are run. Therefore, it is not necessary to restore the database from a backup if a version check reports an error. Correct the issue and then create a new backup of the database. Then, if you encounter errors after the version check stage, you can restore a version of your database with the issue reported by the version check resolved.</a></div>
      <div class="B_-_Body"><a name="1914581">In the second phase, the upgrader compares the target data model and the current database to determine how they differ. The upgrader makes changes to the database that do not require a version trigger during this phase.</a></div>
      <div class="B_-_Body"><a name="1914582">Following this process, the third phase runs a subsequent set of version triggers. These triggers create actions that must be run last due to a dependency on an earlier phase. </a></div>
      <div class="B_-_Body"><a name="1914583">After the database upgrade concludes, it reports issues that the upgrader encountered and did not complete. </a></div>
      <div class="B_-_Body"><a name="1914584">You are responsible for correcting these issues. This might involve modifying the data model or altering the table manually. If you do not correct them, the next time you start the server you do </a><span class="e_-_emphasis">not</span> see a message that the database and the data model are out of sync. You must then use the <span class="cv_-_computer_voice">system_tools</span> command to verify the database schema. </div>
      <div class="N_-_Note">
        <span class="n_-_note">Note: </span><a name="1914585">Given the complexity of database upgrade, Guidewire does not expose specific upgrade actions/steps to clients either in SQL or Java form. Any manual attempts to recreate or control the upgrade process can result in problems in the PolicyCenter database. Recovery from such attempts is not supported.</a></div>
      <h4 class="H2_-_Heading_2"><a name="1914589">Version Trigger Descriptions</a></h4>
      <div class="B_-_Body"><a name="1914590">The database upgrade uses version triggers to perform the actions described by sections within this topic. If a version trigger has an associated version check, the check is described with the trigger. Review these descriptions to familiarize yourself with some of the changes and to understand version checks. If a version check reports an issue, review the error message and consult the description of the relevant version trigger for more information.</a></div>
      <div class="H3_-_Heading_3_outer" style="margin-left: 36pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <h5 class="H3_-_Heading_3_inner" style="width: 18pt; white-space: nowrap"></h5>
            </td>
            <td width="100%">
              <h5 class="H3_-_Heading_3_inner"><a name="1914921">Renaming Deferred Upgrade Batch Process</a></h5>
            </td>
          </tr>
        </table>
      </div>
      <div class="B_-_Body"><a name="1914922">The upgrade renames the </a><span class="cv_-_computer_voice">DeferredUpgrade</span> batch process type to <span class="cv_-_computer_voice">DeferredUpgradeTasks</span>.</div>
      <div class="H3_-_Heading_3_outer" style="margin-left: 36pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <h5 class="H3_-_Heading_3_inner" style="width: 18pt; white-space: nowrap"></h5>
            </td>
            <td width="100%">
              <h5 class="H3_-_Heading_3_inner"><a name="1914926">Truncating </a><span class="cvh_-_computer_voice_in_heading">pc_Dynamic_Assign</span></h5>
            </td>
          </tr>
        </table>
      </div>
      <div class="B_-_Body"><a name="1914930">The upgrade truncates the </a><span class="cv_-_computer_voice">pc_Dynamic_Assign</span> table.</div>
      <div class="H3_-_Heading_3_outer" style="margin-left: 36pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <h5 class="H3_-_Heading_3_inner" style="width: 18pt; white-space: nowrap"></h5>
            </td>
            <td width="100%">
              <h5 class="H3_-_Heading_3_inner"><a name="1914934">Dropping </a><span class="cvh_-_computer_voice_in_heading">pc_tl_Template</span></h5>
            </td>
          </tr>
        </table>
      </div>
      <div class="B_-_Body"><a name="1914938">The upgrade drops the </a><span class="cv_-_computer_voice">pc_tl_Template</span> table.</div>
      <div class="H3_-_Heading_3_outer" style="margin-left: 36pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <h5 class="H3_-_Heading_3_inner" style="width: 18pt; white-space: nowrap"></h5>
            </td>
            <td width="100%">
              <h5 class="H3_-_Heading_3_inner"><a name="1914939">Dropping Columns from </a><span class="cvh_-_computer_voice_in_heading">WorkItem</span> Tables</h5>
            </td>
          </tr>
        </table>
      </div>
      <div class="B_-_Body"><a name="1914943">The upgrade drops the </a><span class="cv_-_computer_voice">AvailableSince</span> and <span class="cv_-_computer_voice">LastUpdateTime</span> columns from all <span class="cv_-_computer_voice">pc_WorkItem</span> tables.</div>
      <div class="H3_-_Heading_3_outer" style="margin-left: 36pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <h5 class="H3_-_Heading_3_inner" style="width: 18pt; white-space: nowrap"></h5>
            </td>
            <td width="100%">
              <h5 class="H3_-_Heading_3_inner"><a name="1914944">Upgrading Shared Typekey Data </a></h5>
            </td>
          </tr>
        </table>
      </div>
      <div class="B_-_Body"><a name="1914945">The upgrade checks for subtypes with typekeys that have the same field name, different column names, and only one column exists in the database. If any such records exist, the upgrade moves the data to the correct column.</a></div>
      <div class="T_-_Table" style="color: #387dab; font-family: Calibri; font-style: normal; font-variant: normal; font-weight: normal; text-transform: none; vertical-align: baseline"><a name="1915046">&nbsp;</a></div>
      <div class="H3_-_Heading_3_outer" style="margin-left: 36pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <h5 class="H3_-_Heading_3_inner" style="width: 18pt; white-space: nowrap"></h5>
            </td>
            <td width="100%">
              <h5 class="H3_-_Heading_3_inner"><a name="1915103">Dropping </a><span class="cvh_-_computer_voice_in_heading">Contact.CityKanjiDenorm</span></h5>
            </td>
          </tr>
        </table>
      </div>
      <div class="B_-_Body"><a name="1915107">The upgrade drops the </a><span class="cv_-_computer_voice">pc_Contact.CityKanjiDenorm</span> column if it exists.</div>
      <div class="H3_-_Heading_3_outer" style="margin-left: 36pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <h5 class="H3_-_Heading_3_inner" style="width: 18pt; white-space: nowrap"></h5>
            </td>
            <td width="100%">
              <h5 class="H3_-_Heading_3_inner"><a name="1915108">Creating </a><span class="cvh_-_computer_voice_in_heading">AgencyBillPlan</span> Records</h5>
            </td>
          </tr>
        </table>
      </div>
      <div class="B_-_Body"><a name="1915112">For each record in </a><span class="cv_-_computer_voice">pc_Organization</span> with a non-null <span class="cv_-_computer_voice">AgencyBillPlanID</span>, the upgrade creates a record in <span class="cv_-_computer_voice">pc_AgencyBillPlan</span> with the organization <span class="cv_-_computer_voice">ID</span> and <span class="cv_-_computer_voice">AgencyBillPlanID</span>.</div>
      <div class="H3_-_Heading_3_outer" style="margin-left: 36pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <h5 class="H3_-_Heading_3_inner" style="width: 18pt; white-space: nowrap"></h5>
            </td>
            <td width="100%">
              <h5 class="H3_-_Heading_3_inner"><a name="1915116">Dropping Rating Worksheet Tables</a></h5>
            </td>
          </tr>
        </table>
      </div>
      <div class="B_-_Body"><a name="1915120">The upgrade drops tables and entities that store </a><span class="cv_-_computer_voice">RatingWorksheets</span> directly. As of PolicyCenter 8.0.1, rating worksheets are stored on a <span class="cv_-_computer_voice">WorksheetContainer</span> stored on a policy. The <span class="cv_-_computer_voice">RatingWorksheet</span> delegate has been removed.</div>
      <div class="H3_-_Heading_3_outer" style="margin-left: 36pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <h5 class="H3_-_Heading_3_inner" style="width: 18pt; white-space: nowrap"></h5>
            </td>
            <td width="100%">
              <h5 class="H3_-_Heading_3_inner"><a name="1915121">Moving </a><span class="cvh_-_computer_voice_in_heading">CommissionPlanID</span> from <span class="cvh_-_computer_voice_in_heading">ProducerCode</span> to <span class="cvh_-_computer_voice_in_heading">ProducerCodeCurrency</span></h5>
            </td>
          </tr>
        </table>
      </div>
      <div class="B_-_Body"><a name="1915125">The upgrade copies the </a><span class="cv_-_computer_voice">pc_ProducerCode.CommissionPlanID</span> to <span class="cv_-_computer_voice">pc_ProducerCodeCurrency.CommissionPlanID</span> and then deletes <span class="cv_-_computer_voice">pc_ProducerCode.CommissionPlanID</span>.</div>
      <div class="H3_-_Heading_3_outer" style="margin-left: 36pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <h5 class="H3_-_Heading_3_inner" style="width: 18pt; white-space: nowrap"></h5>
            </td>
            <td width="100%">
              <h5 class="H3_-_Heading_3_inner"><a name="1915132">Deleting Checksums for Product Model Lookups</a></h5>
            </td>
          </tr>
        </table>
      </div>
      <div class="B_-_Body"><a name="1915136">The upgrade deletes checksums for product model lookups and checksums from </a><span class="cv_-_computer_voice">pc_parameter</span> from the database. This forces PolicyCenter to resynchronize the database with product model files.</div>
      <div class="H3_-_Heading_3_outer" style="margin-left: 36pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <h5 class="H3_-_Heading_3_inner" style="width: 18pt; white-space: nowrap"></h5>
            </td>
            <td width="100%">
              <h5 class="H3_-_Heading_3_inner"><a name="1915140">Moving </a><span class="cvh_-_computer_voice_in_heading">PolicyPeriod.NewInvoiceStream.Selected</span> to <span class="cvh_-_computer_voice_in_heading">PolicyPeriod.CustomBilling</span></h5>
            </td>
          </tr>
        </table>
      </div>
      <div class="B_-_Body"><a name="1915141">The upgrade moves and renames the </a><span class="cv_-_computer_voice">Selected</span> column from <span class="cv_-_computer_voice">PolicyPeriod.NewInvoiceStream.Selected</span> to <span class="cv_-_computer_voice">PolicyPeriod.CustomBilling</span>. The <span class="cv_-_computer_voice">Selected</span> column did not indicate that the user selected to send a new invoice stream to BillingCenter. Instead, the user indicated custom billing and PolicyCenter either sends an invoice stream or modifies an existing one. PolicyCenter did not send any invoice stream information otherwise. Therefore the column has been renamed to <span class="cv_-_computer_voice">PolicyPeriod.CustomBilling</span> to better reflect its purpose.</div>
      <div class="H3_-_Heading_3_outer" style="margin-left: 36pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <h5 class="H3_-_Heading_3_inner" style="width: 18pt; white-space: nowrap"></h5>
            </td>
            <td width="100%">
              <h5 class="H3_-_Heading_3_inner"><a name="1915148">Creating the </a><span class="cvh_-_computer_voice_in_heading">SelectedPaymentPlan</span> <span class="cvh_-_computer_voice_in_heading">PaymentPlanSummary</span></h5>
            </td>
          </tr>
        </table>
      </div>
      <div class="B_-_Body"><a name="1915149">In PolicyCenter 8.0.2, the relationship between </a><span class="cv_-_computer_voice">PolicyPeriod</span> and <span class="cv_-_computer_voice">PaymentPlanSummary</span> was changed to a one-to-one relationship. The upgrade first checks that each non-retired <span class="cv_-_computer_voice">PaymentPlanSummary</span> record has a unique combination of <span class="cv_-_computer_voice">PolicyPeriod</span> and <span class="cv_-_computer_voice">BillingId</span>. The upgrade reports an error if it finds <span class="cv_-_computer_voice">PaymentPlanSummary</span> records with matching <span class="cv_-_computer_voice">PolicyPeriod</span> and <span class="cv_-_computer_voice">BillingId</span>. If the upgrade reports this error, either retire or remove the duplicate rows and restart the upgrade. When a record is restored from the archive it is upgraded to the current version. If a duplicate <span class="cv_-_computer_voice">PaymentPlanSummary</span> is detected during restoration, PolicyCenter marks the duplicate <span class="cv_-_computer_voice">PaymentPlanSummary</span> as retired.</div>
      <div class="B_-_Body"><a name="1915153">If the upgrade finds no errors, it creates a new </a><span class="cv_-_computer_voice">SelectedPaymentPlan</span> <span class="cv_-_computer_voice">PaymentPlanSummary</span> for all <span class="cv_-_computer_voice">PolicyPeriods</span> and removes obsolete <span class="cv_-_computer_voice">PaymentPlanSummary</span> types.</div>
      <div class="H3_-_Heading_3_outer" style="margin-left: 36pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <h5 class="H3_-_Heading_3_inner" style="width: 18pt; white-space: nowrap"></h5>
            </td>
            <td width="100%">
              <h5 class="H3_-_Heading_3_inner"><a name="1915154">Deleting Checksums for Product Model Lookups and Lookup Rows</a></h5>
            </td>
          </tr>
        </table>
      </div>
      <div class="B_-_Body"><a name="1915158">PolicyCenter 8.0.3 has a restructured product model. The upgrade deletes checksums for product model lookups and lookup rows from the database to allow resynchronization of product model files when the server starts.</a></div>
      <div class="B_-_Body"><a name="1915159">The upgrade deletes all rows from the following tables:</a></div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><span class="cv_-_computer_voice"><a name="1915163">pc_CondLookup</a></span> </div>
            </td>
          </tr>
        </table>
      </div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><span class="cv_-_computer_voice"><a name="1915167">pc_CovLookup</a></span> </div>
            </td>
          </tr>
        </table>
      </div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><span class="cv_-_computer_voice"><a name="1915171">pc_CovTermLookup</a></span> </div>
            </td>
          </tr>
        </table>
      </div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><span class="cv_-_computer_voice"><a name="1915175">pc_CovTermOptLookup</a></span> </div>
            </td>
          </tr>
        </table>
      </div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><span class="cv_-_computer_voice"><a name="1915179">pc_CovTermPackLookup</a></span> </div>
            </td>
          </tr>
        </table>
      </div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><span class="cv_-_computer_voice"><a name="1915183">pc_ExclLookup</a></span> </div>
            </td>
          </tr>
        </table>
      </div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><span class="cv_-_computer_voice"><a name="1915187">pc_ModifierLookup</a></span> </div>
            </td>
          </tr>
        </table>
      </div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><span class="cv_-_computer_voice"><a name="1915191">pc_OfferingLookup</a></span> </div>
            </td>
          </tr>
        </table>
      </div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><span class="cv_-_computer_voice"><a name="1915195">pc_ProductLookup</a></span> </div>
            </td>
          </tr>
        </table>
      </div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><span class="cv_-_computer_voice"><a name="1915199">pc_ProductModifierLookup</a></span> </div>
            </td>
          </tr>
        </table>
      </div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><span class="cv_-_computer_voice"><a name="1915203">pc_ProdRateFactorLookup</a></span> </div>
            </td>
          </tr>
        </table>
      </div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><span class="cv_-_computer_voice"><a name="1915207">pc_RatingFactorLookup</a></span> </div>
            </td>
          </tr>
        </table>
      </div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><span class="cv_-_computer_voice"><a name="1915211">pc_QuestionLookup</a></span> </div>
            </td>
          </tr>
        </table>
      </div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><span class="cv_-_computer_voice"><a name="1915215">pc_QuestionSetLookup</a></span> </div>
            </td>
          </tr>
        </table>
      </div>
      <div class="H3_-_Heading_3_outer" style="margin-left: 36pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <h5 class="H3_-_Heading_3_inner" style="width: 18pt; white-space: nowrap"></h5>
            </td>
            <td width="100%">
              <h5 class="H3_-_Heading_3_inner"><a name="1915216">Resetting </a><span class="cvh_-_computer_voice_in_heading">BasedOnID</span> </h5>
            </td>
          </tr>
        </table>
      </div>
      <div class="B_-_Body"><a name="1915217">The upgrade resets the </a><span class="cv_-_computer_voice">BasedOnID</span> column value to <span class="cv_-_computer_voice">null</span> for every effective-dated table row where the <span class="cv_-_computer_voice">BasedOn</span> record has a <span class="cv_-_computer_voice">BranchID</span> that is not equal to its branch's <span class="cv_-_computer_voice">BasedOnID</span>. This upgrade trigger fixes a data issue introduced in 7.0.5 patch 6.</div>
      <div class="H3_-_Heading_3_outer" style="margin-left: 36pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <h5 class="H3_-_Heading_3_inner" style="width: 18pt; white-space: nowrap"></h5>
            </td>
            <td width="100%">
              <h5 class="H3_-_Heading_3_inner"><a name="1915218">Setting </a><span class="cvh_-_computer_voice_in_heading">CascadedLookup</span> on <span class="cvh_-_computer_voice_in_heading">RateBook</span></h5>
            </td>
          </tr>
        </table>
      </div>
      <div class="B_-_Body"><a name="1915219">The upgrade adds a new column </a><span class="cv_-_computer_voice">CascadedLookup</span> to the <span class="cv_-_computer_voice">RateBook</span> table. For existing <span class="cv_-_computer_voice">RateBook</span> records the upgrade sets <span class="cv_-_computer_voice">CascadedLookup</span> to <span class="cv_-_computer_voice">false</span> to ensure consistent behavior.</div>
      <div class="H3_-_Heading_3_outer" style="margin-left: 36pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <h5 class="H3_-_Heading_3_inner" style="width: 18pt; white-space: nowrap"></h5>
            </td>
            <td width="100%">
              <h5 class="H3_-_Heading_3_inner"><a name="1915221">Setting Default Rate Table Argument Source Sets</a></h5>
            </td>
          </tr>
        </table>
      </div>
      <div class="B_-_Body"><a name="1915222">As of version 8.0.4, all rate table definitions must have an argument source set. The upgrade modifies existing rate table definitions and rate table lookups in rate routines that do not specify an argument source set.</a></div>
      <div class="B_-_Body"><a name="1915223">The upgrade creates an </a><span class="cv_-_computer_voice">EmptyParameterSet</span> parameter set that applies to all policy lines. This parameter set contains no parameters. </div>
      <div class="B_-_Body"><a name="1915224">For all rate table definitions that do not specify an argument source set, the upgrade:</a></div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><a name="1915225">Sets </a><span class="cv_-_computer_voice">EmptyParameterSet</span> as the source of argument objects. The <span class="ui_-_UI_element">Source of Argument Objects</span> appears on the <span class="ui_-_UI_element">Argument Sources</span> tab. <span class="cv_-_computer_voice">EmptyParameterSet</span> is both the name and code of this parameter set.</div>
            </td>
          </tr>
        </table>
      </div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><a name="1915226">Adds a </a><span class="cv_-_computer_voice">&lt;system default&gt;</span> argument source set. The argument source for each parameter is set to null. <span class="cv_-_computer_voice">&lt;system default&gt;</span> is both the name and code of this argument source set.</div>
            </td>
          </tr>
        </table>
      </div>
      <div class="B_-_Body"><a name="1915227">For all rate table lookups in rate routines that do not specify an argument source set, the version trigger sets the argument source set to </a><span class="cv_-_computer_voice">&lt;system default&gt;</span>. </div>
      <script type="text/javascript" language="JavaScript1.2">
        <!--
          // Clear related topics
          //
          WWHClearRelatedTopics();

          document.writeln(WWHRelatedTopicsInlineHTML());
        // -->
      </script>
    </blockquote>
    <script type="text/javascript" language="JavaScript1.2">
      <!--
        document.write(WWHRelatedTopicsDivTag() + WWHPopupDivTag() + WWHALinksDivTag());
      // -->
    </script>
  </body>
</html>