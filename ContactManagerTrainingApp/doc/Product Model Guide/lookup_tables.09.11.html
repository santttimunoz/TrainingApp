<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xml:lang="en" lang="en" xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
    <meta http-equiv="Content-Style-Type" content="text/css" />
    <!-- MOTW-DISABLED saved from url=(0014)about:internet -->
    <title>Reloading Availability Data</title>
    <link rel="StyleSheet" href="css/lookup_tables.css" type="text/css" media="all" />
    <link rel="StyleSheet" href="css/webworks.css" type="text/css" media="all" />
    <link rel="StyleSheet" href="css/css-guidewire-extra.css" type="text/css" media="all" />
    <script type="text/javascript" language="JavaScript1.2" src="wwhdata/common/context.js"></script>
    <script type="text/javascript" language="JavaScript1.2" src="wwhdata/common/towwhdir.js"></script>
    <script type="text/javascript" language="JavaScript1.2" src="wwhdata/common/wwhpagef.js"></script>
    <script type="text/javascript" language="JavaScript1.2">
      <!--
        var  WebWorksRootPath = "";
      // -->
    </script>
    <script type="text/javascript" language="JavaScript1.2">
      <!--
        // Set reference to top level help frame
        //
        var  WWHFrame = WWHGetWWHFrame("", true);
      // -->
    </script>
    <script type="text/javascript" language="JavaScript1.2" src="scripts/expand.js"></script>
    <!-- THE FOLLOWING IS A GUIDEWIRE STYLE DEFINITION FOR THE LINK TO THIS FEATURE -->
    <link rel="StyleSheet" href="css/css-guidewire-extra.css" type="text/css" media="all" />
    <!-- THE FOLLOWING IS A GUIDEWIRE GSCRIPT FUNCTION FOR THE LINK TO THIS FEATURE -->
    <script type="text/javascript">
function guidewire_selectall()
{
var text_val=eval("document.linktothisurlform.urlfield");
text_val.focus();
text_val.select();
}
</script>
  </head>
  <body onLoad="WWHUpdate();" onUnload="WWHUnload();" onKeyDown="WWHHandleKeyDown((document.all||document.getElementById||document.layers)?event:null);" onKeyPress="WWHHandleKeyPress((document.all||document.getElementById||document.layers)?event:null);" onKeyUp="WWHHandleKeyUp((document.all||document.getElementById||document.layers)?event:null);">
    <!-- THE FOLLOWING IS A GUIDEWIRE DIV FOR THE 'LINK TO THIS' FEATURE -->
    <div id="linkToThisPage" class="popup" style="display: none;">
      <div class="popupTitle">Link Directly to This Page 
           <a href="#" onclick="var thePopup = getElementById('linkToThisPage');thePopup.style.display='none';return false;"><img class="popupClosebox" src="wwhelp/wwhimpl/common/images/close.gif" /></a></div>
      <div style="padding:6px;">
        <div class="popupText" id="linkToThisPageBookmark">An error has occurred if you see this messsage.</div>
        <form name="linktothisurlform" method="post" action="" style="width:275px;margin:0px">
          <input type="text" class="popupURLText" id="linkToThisPageURL" name="urlfield" rows="1" cols="55" onClick="guidewire_selectall();" onFocus="guidewire_selectall();"></input>
        </form>
      </div>
    </div>
    <br />
    <div class="WebWorks_Breadcrumbs" style="text-align: left;">
      <span>PolicyCenter Product Model Guide</span> : 
    <span class="WebWorks_Breadcrumbs" style="text-align: left;"><a class="WebWorks_Breadcrumb_Link" href="p-productmodel.html#4821226">PolicyCenter Product Model</a> : <a class="WebWorks_Breadcrumb_Link" href="lookup_tables.09.01.html#4821226">Configuring Availability</a> : Reloading Availability Data</span></div>
    <hr align="left" />
    <blockquote>
      <h3 class="H1_-_Heading_1"><a name="4821226">Reloading Availability Data</a></h3>
      <div class="B_-_Body"><a name="4825461">You can make changes to availability data in Product Designer and upload these changes to a running PolicyCenter production server or clustered group of servers. The types of availability data you can upload are:</a></div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><a name="4827866">Lookup tables</a></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><a name="4827878">Availability scripts</a></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><a name="4827886">Grandfather states</a></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="B_-_Body"><a name="4896945">For example, you want to discontinue the personal auto product in Alaska one month from now, or you want to grandfather collision coverage in Texas. You can make these changes to the product model in Product Designer, and then upload the changes dynamically to PolicyCenter without taking the server off line.</a></div>
      <div class="NI_-_Note_Important">
        <span class="n_-_note">IMPORTANT   </span><a name="4896946">Changes in Studio other than availability changes are not uploaded to PolicyCenter. For example, if you change availability references, PolicyCenter cannot reload availability.</a></div>
      <div class="B_-_Body"><a name="4827934">To reload availability, you must copy the product model files to an external directory that is accessible to the application server. Then in PolicyCenter, use the </a><span class="ui_-_UI_element">Server Tools</span> → <span class="ui_-_UI_element">Product Model Info</span> screen to access the <span class="ui_-_UI_element">Reload Availability</span> command. Alternatively, you can restart the PolicyCenter server to read the new availability data from the external directory. </div>
      <div class="B_-_Body"><a name="4827938">PolicyCenter loads availability data from the directory specified by the </a><span class="cv_-_computer_voice">ExternalProductModelDirectory</span> parameter in <span class="cv_-_computer_voice">config.xml</span> at both server startup time and when a reload is requested. However, it does so only if all of the following are true:</div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><a name="4827929">The parameter specifies a directory accessible to the application server.</a></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><a name="4827200">The directory is not in the deployment directory tree.</a></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><a name="4827180">The directory contains a complete product model definition that only defines existing patterns.</a></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><a name="4827094">The directory contains at least one lookup XML file ending in </a><span class="cv_-_computer_voice">-lookups.xml</span>.</div>
            </td>
          </tr>
        </table>
      </div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><a name="4827102">The files in the directory are valid.</a></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="B_-_Body"><a name="4827109">Otherwise, PolicyCenter loads availability data from the standard configuration directory at server startup time, and any attempt to reload fails.</a></div>
      <h4 class="H2_-_Heading_2"><a name="4827214">External Product Model Directory</a></h4>
      <div class="B_-_Body"><a name="4827264">The structure of the external product model directory must match that of the </a><span class="cv_-_computer_voice">productmodel</span> directory located in the <span class="cv_-_computer_voice">modules/configuration/config/resources</span> directory of your PolicyCenter installation directory. For example, the XML file containing lookups for the <span class="cv_-_computer_voice">PACollisionCov</span> coverage must be <span class="cv_-_computer_voice">PACollisionCov-lookups.xml</span> in the <span class="cv_-_computer_voice">coveragepatterns</span> subdirectory. </div>
      <div class="B_-_Body"><a name="4827241">The external directory you specify must contain a complete copy of the product model resources directory. Before reloading, PolicyCenter performs validations on the product model definitions in the external directory. These validations are the same validations that PolicyCenter performs on the product model at startup. The server loads only availability information from the external directory. The rest of the product model definition is taken from the </a><span class="cv_-_computer_voice">modules/configuration/config</span> directory of your PolicyCenter installation directory. Therefore, you cannot, for example, add a new coverage pattern to the product model on a running server. </div>
      <h4 class="H2_-_Heading_2"><a name="4827242">Availability Reload and Open Transactions</a></h4>
      <div class="B_-_Body"><a name="4827378">Reloading availability takes effect immediately and can affect open transactions. Changes may become apparent at quote, bind, or issuance. Changes may become apparent when moving between screens or making selections in a transaction.</a></div>
      <h4 class="H2_-_Heading_2"><a name="4827222">The Reload Availability Screen</a></h4>
      <div class="B_-_Body"><a name="4919592">In PolicyCenter, you can reload availability with the server running in either production or development mode. To do so, click </a><span class="ui_-_UI_element">Reload Availability</span> on the <span class="ui_-_UI_element">Server Tools</span> → <span class="ui_-_UI_element">Product Model Info</span> screen. The server attempts to synchronize the lookup entities and the existing product model availability data with the XML files stored in the external product model directory. If the reload is successful, PolicyCenter displays an informational message. If reload is not successful, PolicyCenter displays an error message. In either case, you can check the server log files for details of the reload operations or problems that occurred. </div>
      <div class="B_-_Body"><a name="4919596">You can access the </a><span class="ui_-_UI_element">Product Model Info</span> screen only if you belong to a user role with <span class="ui_-_UI_element">View ProductModelInfo tools page</span> [<span class="cv_-_computer_voice">toolsProductModelInfoview</span>] permission. In the base configuration, only the <span class="ui_-_UI_element">Superuser</span> role has this permission.</div>
      <div class="N_-_Note">
        <span class="n_-_note">Note: </span><a name="4919597">To reload availability when the server is in development mode, in addition to belonging to a role with the required permission, the </a><span class="cv_-_computer_voice">EnableInternalDebugTools</span> parameter in <span class="cv_-_computer_voice">config.xml</span> must be <span class="cv_-_computer_voice">true</span>. </div>
      <h4 class="H2_-_Heading_2"><a name="4827641">Reload Availability in a Clustered Environment</a></h4>
      <div class="B_-_Body"><a name="4827748">You can reload availability data in a clustered environment. In a cluster, only the batch server performs the actual reload. When you click </a><span class="ui_-_UI_element">Reload Availability</span>, PolicyCenter starts the reload on the batch server. It does not matter which server your user session is running in. </div>
      <div class="B_-_Body"><a name="4827668">After reloading lookup tables, the batch server sends a message to all other nodes across the cluster to update the availability data. </a></div>
      <div class="B_-_Body"><a name="4827761">All servers in the cluster must have access to the external product model directory. If the batch server cannot access the external directory, PolicyCenter displays an error message after clicking </a><span class="ui_-_UI_element">Reload Availability</span>. However, if other servers in the cluster cannot access the external directory, PolicyCenter sends an error message to the log file. If a server in the cluster cannot access the external product model directory, it can have different availability data than the batch server. Therefore, you must take care in making sure the external product model directory is available to all servers in a cluster.</div>
      <script type="text/javascript" language="JavaScript1.2">
        <!--
          // Clear related topics
          //
          WWHClearRelatedTopics();

          document.writeln(WWHRelatedTopicsInlineHTML());
        // -->
      </script>
    </blockquote>
    <script type="text/javascript" language="JavaScript1.2">
      <!--
        document.write(WWHRelatedTopicsDivTag() + WWHPopupDivTag() + WWHALinksDivTag());
      // -->
    </script>
  </body>
</html>