<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xml:lang="en" lang="en" xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
    <meta http-equiv="Content-Style-Type" content="text/css" />
    <!-- MOTW-DISABLED saved from url=(0014)about:internet -->
    <title>Archiving and the Domain Graph</title>
    <link rel="StyleSheet" href="css/archiving.css" type="text/css" media="all" />
    <link rel="StyleSheet" href="css/webworks.css" type="text/css" media="all" />
    <link rel="StyleSheet" href="css/css-guidewire-extra.css" type="text/css" media="all" />
    <script type="text/javascript" language="JavaScript1.2" src="wwhdata/common/context.js"></script>
    <script type="text/javascript" language="JavaScript1.2" src="wwhdata/common/towwhdir.js"></script>
    <script type="text/javascript" language="JavaScript1.2" src="wwhdata/common/wwhpagef.js"></script>
    <script type="text/javascript" language="JavaScript1.2">
      <!--
        var  WebWorksRootPath = "";
      // -->
    </script>
    <script type="text/javascript" language="JavaScript1.2">
      <!--
        // Set reference to top level help frame
        //
        var  WWHFrame = WWHGetWWHFrame("", true);
      // -->
    </script>
    <script type="text/javascript" language="JavaScript1.2" src="scripts/expand.js"></script>
    <!-- THE FOLLOWING IS A GUIDEWIRE STYLE DEFINITION FOR THE LINK TO THIS FEATURE -->
    <link rel="StyleSheet" href="css/css-guidewire-extra.css" type="text/css" media="all" />
    <!-- THE FOLLOWING IS A GUIDEWIRE GSCRIPT FUNCTION FOR THE LINK TO THIS FEATURE -->
    <script type="text/javascript">
function guidewire_selectall()
{
var text_val=eval("document.linktothisurlform.urlfield");
text_val.focus();
text_val.select();
}
</script>
  </head>
  <body onLoad="WWHUpdate();" onUnload="WWHUnload();" onKeyDown="WWHHandleKeyDown((document.all||document.getElementById||document.layers)?event:null);" onKeyPress="WWHHandleKeyPress((document.all||document.getElementById||document.layers)?event:null);" onKeyUp="WWHHandleKeyUp((document.all||document.getElementById||document.layers)?event:null);">
    <!-- THE FOLLOWING IS A GUIDEWIRE DIV FOR THE 'LINK TO THIS' FEATURE -->
    <div id="linkToThisPage" class="popup" style="display: none;">
      <div class="popupTitle">Link Directly to This Page 
           <a href="#" onclick="var thePopup = getElementById('linkToThisPage');thePopup.style.display='none';return false;"><img class="popupClosebox" src="wwhelp/wwhimpl/common/images/close.gif" /></a></div>
      <div style="padding:6px;">
        <div class="popupText" id="linkToThisPageBookmark">An error has occurred if you see this messsage.</div>
        <form name="linktothisurlform" method="post" action="" style="width:275px;margin:0px">
          <input type="text" class="popupURLText" id="linkToThisPageURL" name="urlfield" rows="1" cols="55" onClick="guidewire_selectall();" onFocus="guidewire_selectall();"></input>
        </form>
      </div>
    </div>
    <br />
    <div class="WebWorks_Breadcrumbs" style="text-align: left;">
      <span>PolicyCenter Configuration Guide</span> : 
    <span class="WebWorks_Breadcrumbs" style="text-align: left;"><a class="WebWorks_Breadcrumb_Link" href="p-PolicyCenter.html#2356340">Guidewire PolicyCenter Configuration</a> : <a class="WebWorks_Breadcrumb_Link" href="archiving.44.01.html#2356340">Configuring Policy Archiving</a> : Archiving and the Domain Graph</span></div>
    <hr align="left" />
    <blockquote>
      <h3 class="H1_-_Heading_1"><a name="2356340">Archiving and the Domain Graph</a></h3>
      <div class="B_-_Body"><a name="2356335">Guidewire PolicyCenter uses the domain graph to define the aggregate cluster of associated objects that it treats as a single unit for purposes of archiving. Each aggregate cluster has a root and a boundary. </a></div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><a name="2337299">The </a><span class="e_-_emphasis">root</span> is a single specific entity that the aggregate cluster contains. The root entity is the main entity in the graph. A root entity is application-specific. </div>
            </td>
          </tr>
        </table>
      </div>
      <div class="LP_-_List_Para"><a name="2503169">In PolicyCenter, the root entity is the </a><span class="cv_-_computer_voice">PolicyPeriod</span>. During the archiving of an instance of the domain graph, PolicyCenter leaves behind the <span class="cv_-_computer_voice">PolicyPeriod</span>, its related <span class="cv_-_computer_voice">EffectiveDatedFields</span>, and optionally other objects. For more information about the objects that remain in PolicyCenter, see <a href="javascript:WWHClickedPopup('app', 'archiving-pc.37.2.html#4753322', '');" title="Archiving Policy Terms">“Entities Retained After Archiving” in the </a><span class="bt_-_book_title"><a href="javascript:WWHClickedPopup('app', 'archiving-pc.37.2.html#4753322', '');" title="Archiving Policy Terms">Application Guide</a></span>.</div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><a name="2337301">The </a><span class="e_-_emphasis">boundary</span> defines what is inside the aggregate cluster of objects. Or, in other words, it identifies all of the entities that are part of the graph.</div>
            </td>
          </tr>
        </table>
      </div>
      <div class="LP_-_List_Para"><a name="2503180">In PolicyCenter, the boundary defines the entities that relate to a </a><span class="cv_-_computer_voice">PolicyPeriod</span>, such as jobs and effective dated fields.</div>
      <div class="B_-_Body"><a name="2503186">A domain graph defines the unit of work for object archiving. The unit of work for the archive process is a single instance of the domain graph. For example, a unit of work is a single policy period and all its associated entities. While the archiving process works on individual policy period graphs, higher level code considers the policy term as the logical unit of archiving for PolicyCenter.</a></div>
      <div class="B_-_Body"><a name="2337758">To enforce the boundaries of the domain graph, all objects participating in the archive process must implement one or more of the following delegates:</a></div>
      <div class="T_-_Table"><a name="2337533">&nbsp;</a></div>
      <table class="Shading" style="text-align: left" border="0" cellpadding="10" cellspacing="0" summary="">
        <caption></caption>
        <tr>
          <td style="border-bottom-color: #000000; border-bottom-style: solid; border-bottom-width: 0.5pt; border-top-color: #000000; border-top-style: solid; border-top-width: 0.5pt; padding-bottom: 2pt; padding-left: 2pt; padding-right: 8pt; padding-top: 2pt; vertical-align: bottom">
            <div class="TH_-_Table_Heading"><a name="2337547">Delegate</a></div>
          </td>
          <td style="border-bottom-color: #000000; border-bottom-style: solid; border-bottom-width: 0.5pt; border-top-color: #000000; border-top-style: solid; border-top-width: 0.5pt; padding-bottom: 2pt; padding-left: 2pt; padding-right: 8pt; padding-top: 2pt; vertical-align: bottom">
            <div class="TH_-_Table_Heading"><a name="2337549">Reason for use...</a></div>
          </td>
        </tr>
        <tr>
          <td style="border-bottom-color: #c0d1d1; border-bottom-style: solid; border-bottom-width: 0.15pt; border-top-color: #000000; border-top-style: solid; border-top-width: 0.5pt; padding-bottom: 2pt; padding-left: 2pt; padding-right: 8pt; padding-top: 2pt; vertical-align: top">
            <div class="TT_-_Table_Text" style="color: #000000; font-family: &quot;Lucida Sans Typewriter&quot;; font-style: normal; font-variant: normal; font-weight: normal; margin-top: 3.0pt; text-transform: none; vertical-align: baseline"><span class="cvt_-_computer_voice_table"><a name="2337551">RootInfo</a></span></div>
          </td>
          <td style="border-bottom-color: #c0d1d1; border-bottom-style: solid; border-bottom-width: 0.15pt; border-top-color: #000000; border-top-style: solid; border-top-width: 0.5pt; padding-bottom: 2pt; padding-left: 2pt; padding-right: 8pt; padding-top: 2pt; vertical-align: top">
            <div class="TT_-_Table_Text"><a name="2503624">During the archiving of an instance of the domain graph, PolicyCenter keeps the </a><span class="cvt_-_computer_voice_table">PolicyPeriod</span>, its related <span class="cvt_-_computer_voice_table">EffectiveDatedFields</span>, and optionally other objects in the main PolicyCenter database. For more information about the objects that remain in PolicyCenter, see <span style="font-family: &quot;Times New Roman&quot;; font-size: 10.0pt"><a href="javascript:WWHClickedPopup('app', 'archiving-pc.37.2.html#4753322', '');" title="Archiving Policy Terms">“Entities Retained After Archiving” in the </a></span><span class="bt_-_book_title"><a href="javascript:WWHClickedPopup('app', 'archiving-pc.37.2.html#4753322', '');" title="Archiving Policy Terms">Application Guide</a></span>.</div>
            <div class="TT_-_Table_Text"><a name="2503628">The </a><span class="cvt_-_computer_voice_table">PolicyPeriod</span> instance provides the following:</div>
            <div class="BIT_-_Bullet_Item_Table_outer" style="margin-left: 2.16pt">
              <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
                <tr style="vertical-align: baseline">
                  <td>
                    <div class="BIT_-_Bullet_Item_Table_inner" style="width: 7.199999999999999pt; white-space: nowrap">
                      <span class="but_-_bullet_in_table">•	</span>
                    </div>
                  </td>
                  <td width="100%">
                    <div class="BIT_-_Bullet_Item_Table_inner"><a name="2503629">Sufficient information to retrieve the data</a></div>
                  </td>
                </tr>
              </table>
            </div>
            <div class="BIT_-_Bullet_Item_Table_outer" style="margin-left: 2.16pt">
              <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
                <tr style="vertical-align: baseline">
                  <td>
                    <div class="BIT_-_Bullet_Item_Table_inner" style="width: 7.199999999999999pt; white-space: nowrap">
                      <span class="but_-_bullet_in_table">•	</span>
                    </div>
                  </td>
                  <td width="100%">
                    <div class="BIT_-_Bullet_Item_Table_inner"><a name="2503630">Sufficient information for a minimal search on archived data</a></div>
                  </td>
                </tr>
              </table>
            </div>
            <div class="TT_-_Table_Text"><a name="2369566">The policy period entity—and only this entity— implements the </a><span class="cvt_-_computer_voice_table">RootInfo</span> delegate. The policy period entity is the root object in the PolicyCenter domain graph. You cannot change which entity implements the <span class="cvt_-_computer_voice_table">RootInfo</span> delegate.</div>
          </td>
        </tr>
        <tr>
          <td style="border-bottom-color: #c0d1d1; border-bottom-style: solid; border-bottom-width: 0.15pt; border-top-color: #c0d1d1; border-top-style: solid; border-top-width: 0.15pt; padding-bottom: 2pt; padding-left: 2pt; padding-right: 8pt; padding-top: 2pt; vertical-align: top">
            <div class="TT_-_Table_Text" style="color: #000000; font-family: &quot;Lucida Sans Typewriter&quot;; font-style: normal; font-variant: normal; font-weight: normal; margin-top: 3.0pt; text-transform: none; vertical-align: baseline"><span class="cvt_-_computer_voice_table"><a name="2337555">Extractable</a></span></div>
          </td>
          <td style="border-bottom-color: #c0d1d1; border-bottom-style: solid; border-bottom-width: 0.15pt; border-top-color: #c0d1d1; border-top-style: solid; border-top-width: 0.15pt; padding-bottom: 2pt; padding-left: 2pt; padding-right: 8pt; padding-top: 2pt; vertical-align: top">
            <div class="TT_-_Table_Text"><a name="2337557">All entities in the domain graph must implement the </a><span class="cvt_-_computer_voice_table">Extractable</span> delegate. The converse is also true. No entity outside the domain graph can implement the <span class="cvt_-_computer_voice_table">Extractable</span> delegate. </div>
            <div class="TT_-_Table_Text"><a name="2415182">The use of the </a><span class="cvt_-_computer_voice_table">Extractable</span> delegate ensures the creation of the <span class="cvt_-_computer_voice_table">ArchivePartition</span> column that PolicyCenter uses during the archive process.</div>
          </td>
        </tr>
        <tr>
          <td style="border-bottom-color: #000000; border-bottom-style: solid; border-bottom-width: 0.5pt; border-top-color: #c0d1d1; border-top-style: solid; border-top-width: 0.15pt; padding-bottom: 2pt; padding-left: 2pt; padding-right: 8pt; padding-top: 2pt; vertical-align: top">
            <div class="TT_-_Table_Text" style="color: #000000; font-family: &quot;Lucida Sans Typewriter&quot;; font-style: normal; font-variant: normal; font-weight: normal; margin-top: 3.0pt; text-transform: none; vertical-align: baseline"><span class="cvt_-_computer_voice_table"><a name="2337559">OverlapTable</a></span></div>
          </td>
          <td style="border-bottom-color: #000000; border-bottom-style: solid; border-bottom-width: 0.5pt; border-top-color: #c0d1d1; border-top-style: solid; border-top-width: 0.15pt; padding-bottom: 2pt; padding-left: 2pt; padding-right: 8pt; padding-top: 2pt; vertical-align: top">
            <div class="TT_-_Table_Text"><a name="2337697">Overlap tables are tables in which each individual table row is either in the domain graph or outside of it (part of reference data), but not both. Entity types corresponding to overlap tables must implement the </a><span class="cvt_-_computer_voice_table">OverlapTable</span> delegate. Implementing the <span class="cvt_-_computer_voice_table">OverlapTable</span> delegate creates an additional <span class="cvt_-_computer_voice_table">Admin</span> column that PolicyCenter uses to determine which individual rows belong to the domain graph, and which do not. As these objects are both inside and outside the domain graph, they must also implement the <span class="cvt_-_computer_voice_table">Extractable</span> delegate.</div>
          </td>
        </tr>
      </table>
      <div class="B_-_Body"><span class="ri_-_run_in_header"><a name="2337415">Data model delegate objects.</a></span> A <span class="cv_-_computer_voice">Delegate</span> is a reusable type that defines database columns, an interface, and a default implementation of that interface. A delegate permits an entity to implement an interface while delegating the implementation of that interface to another class, that of the delegate. Each delegate type provides additional columns on the affected tables. </div>
      <h6 class="HS_-_Head_Sub"><a name="2337798">See also</a></h6>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><a name="2503193">For a discussion of object related to archiving, see </a><a href="javascript:WWHClickedPopup('config', 'archiving.44.09.html#2503386', '');" title="Data Model for Archiving">“Data Model for Archiving”</a>.</div>
            </td>
          </tr>
        </table>
      </div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><a name="2396336">For a discussion of the Guidewire data model in general, see </a><a href="javascript:WWHClickedPopup('config', 'entities.21.01.html#2916107', '');" title="The PolicyCenter Data Model">“The PolicyCenter Data Model”</a>.</div>
            </td>
          </tr>
        </table>
      </div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><a name="2337423">For a discussion of delegate objects and how to work with them, see </a><a href="javascript:WWHClickedPopup('config', 'entities.21.05.html#2635205', '');" title="Delegate Data Objects">“Delegate Data Objects”</a>.</div>
            </td>
          </tr>
        </table>
      </div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><a name="2365417">For a discussion of the domain graph, see </a><a href="javascript:WWHClickedPopup('config', 'domain_graph.25.01.html#2479791', '');" title="The Archiving Domain Graph">“The Archiving Domain Graph”</a>.</div>
            </td>
          </tr>
        </table>
      </div>
      <h4 class="H2_-_Heading_2"><a name="2336955">The Root Info Entity </a></h4>
      <div class="B_-_Body"><a name="2503199">The </a><span class="cv_-_computer_voice">PolicyPeriod</span> entity is the root info entity instance that remains in the active database after PolicyCenter archives the policy term. Searches occur only in the active database and can find both active and archived policies. Search can only find archived policies if the search is based on fields retained in the active database.</div>
      <div class="B_-_Body"><a name="2503203">A </a><span class="cv_-_computer_voice">PolicyPeriod</span> instance retains some links to entities which are outside the domain graph and remain in the PolicyCenter database. For examples, see <span class="cv_-_computer_voice">Policy</span> and <span class="cv_-_computer_voice">PolicyTerm</span>.</div>
      <div class="BKN_-_Body_002c_Keep_Next"><a name="2503207">Because it implements the </a><span class="cv_-_computer_voice">RootInfo</span> delegate, the <span class="cv_-_computer_voice">PolicyPeriod</span> entity includes the <span class="cv_-_computer_voice">ArchiveState</span> column, which records the archive state. The <span class="cv_-_computer_voice">ArchiveState</span> value, from the <span class="cv_-_computer_voice">ArchiveState</span> typelist, is one of the following:</div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt; margin-bottom: 2.0pt; vertical-align: baseline">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap; color: #000000; font-style: normal; font-variant: normal; font-weight: normal; text-transform: none">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner" style="color: #000000; font-style: normal; font-variant: normal; font-weight: normal; text-transform: none"><span class="cv_-_computer_voice"><a name="2503208">archived</a></span></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt; margin-bottom: 2.0pt; vertical-align: baseline">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap; color: #000000; font-style: normal; font-variant: normal; font-weight: normal; text-transform: none">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner" style="color: #000000; font-style: normal; font-variant: normal; font-weight: normal; text-transform: none"><span class="cv_-_computer_voice"><a name="2503209">retrieving</a></span></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt; margin-bottom: 2.0pt; vertical-align: baseline">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap; color: #000000; font-style: normal; font-variant: normal; font-weight: normal; text-transform: none">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner" style="color: #000000; font-style: normal; font-variant: normal; font-weight: normal; text-transform: none"><span class="cv_-_computer_voice"><a name="2503210">null</a></span></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="B_-_Body"><a name="2503214">If </a><span class="cv_-_computer_voice">ArchiveState</span> is <span class="cv_-_computer_voice">null</span>, the policy is in the active PolicyCenter database, either because the policy has never been archived or because it was successfully retrieved from the archive.</div>
      <div class="B_-_Body"><a name="2503215">The logical unit of archiving is the policy term. Therefore, application and user interface code can check the </a><span class="cv_-_computer_voice">PolicyTerm.Archived</span> flag to determine if a given entity is archived or not.</div>
      <h4 class="H2_-_Heading_2"><a name="2503216">Archiving Objects Example</a></h4>
      <div class="B_-_Body"><a name="2503218">When you archive a policy, PolicyCenter archives the </a><span class="cv_-_computer_voice">PolicyTerm</span>. When the policy term is archived, internal code archives each <span class="cv_-_computer_voice">PolicyPeriod</span> in that term. In the usual case, all policy periods in that term are archived. However, an error can occur and one or more policy periods may not successfully complete archiving. PolicyCenter sets the <span class="cv_-_computer_voice">Archived</span> bit to true on <span class="cv_-_computer_voice">PolicyTerm</span> if at least one <span class="cv_-_computer_voice">PolicyPeriod</span> has the <span class="cv_-_computer_voice">Archived</span> bit set to <span class="cv_-_computer_voice">true</span>. After archiving, the <span class="cv_-_computer_voice">PolicyTerm</span> and <span class="cv_-_computer_voice">PolicyPeriod</span> entities remain in the PolicyCenter database.</div>
      <script type="text/javascript" language="JavaScript1.2">
        <!--
          // Clear related topics
          //
          WWHClearRelatedTopics();

          document.writeln(WWHRelatedTopicsInlineHTML());
        // -->
      </script>
    </blockquote>
    <script type="text/javascript" language="JavaScript1.2">
      <!--
        document.write(WWHRelatedTopicsDivTag() + WWHPopupDivTag() + WWHALinksDivTag());
      // -->
    </script>
  </body>
</html>