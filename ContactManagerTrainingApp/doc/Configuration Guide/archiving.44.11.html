<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xml:lang="en" lang="en" xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
    <meta http-equiv="Content-Style-Type" content="text/css" />
    <!-- MOTW-DISABLED saved from url=(0014)about:internet -->
    <title>Gosu Code and Archiving</title>
    <link rel="StyleSheet" href="css/archiving.css" type="text/css" media="all" />
    <link rel="StyleSheet" href="css/webworks.css" type="text/css" media="all" />
    <link rel="StyleSheet" href="css/css-guidewire-extra.css" type="text/css" media="all" />
    <script type="text/javascript" language="JavaScript1.2" src="wwhdata/common/context.js"></script>
    <script type="text/javascript" language="JavaScript1.2" src="wwhdata/common/towwhdir.js"></script>
    <script type="text/javascript" language="JavaScript1.2" src="wwhdata/common/wwhpagef.js"></script>
    <script type="text/javascript" language="JavaScript1.2">
      <!--
        var  WebWorksRootPath = "";
      // -->
    </script>
    <script type="text/javascript" language="JavaScript1.2">
      <!--
        // Set reference to top level help frame
        //
        var  WWHFrame = WWHGetWWHFrame("", true);
      // -->
    </script>
    <script type="text/javascript" language="JavaScript1.2" src="scripts/expand.js"></script>
    <!-- THE FOLLOWING IS A GUIDEWIRE STYLE DEFINITION FOR THE LINK TO THIS FEATURE -->
    <link rel="StyleSheet" href="css/css-guidewire-extra.css" type="text/css" media="all" />
    <!-- THE FOLLOWING IS A GUIDEWIRE GSCRIPT FUNCTION FOR THE LINK TO THIS FEATURE -->
    <script type="text/javascript">
function guidewire_selectall()
{
var text_val=eval("document.linktothisurlform.urlfield");
text_val.focus();
text_val.select();
}
</script>
  </head>
  <body onLoad="WWHUpdate();" onUnload="WWHUnload();" onKeyDown="WWHHandleKeyDown((document.all||document.getElementById||document.layers)?event:null);" onKeyPress="WWHHandleKeyPress((document.all||document.getElementById||document.layers)?event:null);" onKeyUp="WWHHandleKeyUp((document.all||document.getElementById||document.layers)?event:null);">
    <!-- THE FOLLOWING IS A GUIDEWIRE DIV FOR THE 'LINK TO THIS' FEATURE -->
    <div id="linkToThisPage" class="popup" style="display: none;">
      <div class="popupTitle">Link Directly to This Page 
           <a href="#" onclick="var thePopup = getElementById('linkToThisPage');thePopup.style.display='none';return false;"><img class="popupClosebox" src="wwhelp/wwhimpl/common/images/close.gif" /></a></div>
      <div style="padding:6px;">
        <div class="popupText" id="linkToThisPageBookmark">An error has occurred if you see this messsage.</div>
        <form name="linktothisurlform" method="post" action="" style="width:275px;margin:0px">
          <input type="text" class="popupURLText" id="linkToThisPageURL" name="urlfield" rows="1" cols="55" onClick="guidewire_selectall();" onFocus="guidewire_selectall();"></input>
        </form>
      </div>
    </div>
    <br />
    <div class="WebWorks_Breadcrumbs" style="text-align: left;">
      <span>PolicyCenter Configuration Guide</span> : 
    <span class="WebWorks_Breadcrumbs" style="text-align: left;"><a class="WebWorks_Breadcrumb_Link" href="p-PolicyCenter.html#2503496">Guidewire PolicyCenter Configuration</a> : <a class="WebWorks_Breadcrumb_Link" href="archiving.44.01.html#2503496">Configuring Policy Archiving</a> : <a class="WebWorks_Breadcrumb_Link" href="archiving.44.08.html#2503496">Configuring Archiving</a> : Gosu Code and Archiving</span></div>
    <hr align="left" />
    <blockquote>
      <h4 class="H2B_-_Heading_2_Break"><a name="2503496">Gosu Code and Archiving</a></h4>
      <div class="B_-_Body"><a name="2503497">After archiving, PolicyCenter deletes most of the </a><span class="cv_-_computer_voice">PolicyPeriod</span> subobjects, but keeps the <span class="cv_-_computer_voice">PolicyPeriod</span>, its associated <span class="cv_-_computer_voice">EffectiveDatedFields</span>, and optionally some other objects. The deleted subobjects are no longer accessible through Gosu code. For more information about the objects that remain in PolicyCenter, see <a href="javascript:WWHClickedPopup('app', 'archiving-pc.37.2.html#4753322', '');" title="Archiving Policy Terms">“Entities Retained After Archiving” in the </a><span class="bt_-_book_title"><a href="javascript:WWHClickedPopup('app', 'archiving-pc.37.2.html#4753322', '');" title="Archiving Policy Terms">Application Guide</a></span>.</div>
      <div class="B_-_Body"><a name="2503501">If archiving is enabled and your code accesses policy periods, your code needs to check whether that policy period is archived before attempting to traverse the subobjects. If your code attempts to traverse the subobjects in an archived </a><span class="cv_-_computer_voice">PolicyPeriod</span>, PolicyCenter throws an exception.</div>
      <div class="B_-_Body"><a name="2503502">If there is a need to change an archived policy period, it must first be retrieved from the archive.</a></div>
      <div class="B_-_Body"><a name="2503503">In the default configuration, PCF files and code checks for archiving before traversing a policy period. For example, you may see code checking for archiving in policy terms and policy periods such as:</a></div>
      <div class="B_-_Body"><a name="2503504">• </a><span class="p_-_parameter">aPolicyPeriod</span><span class="cv_-_computer_voice">.PolicyTerm.Archived</span> </div>
      <div class="B_-_Body"><a name="2503505">• </a><span class="p_-_parameter">aPolicyPeriod</span><span class="cv_-_computer_voice">.BasedOn.PolicyTerm.Archived</span> – If you are about to do a policy comparison, for example</div>
      <div class="B_-_Body"><a name="2503506">•</a><span class="p_-_parameter"> aJob</span><span class="cv_-_computer_voice">.SelectedVersion.PolicyTerm.Archived</span> </div>
      <div class="B_-_Body"><a name="2503507">A </a><span class="cv_-_computer_voice">PolicyPeriod</span> has been archived if the <span class="cv_-_computer_voice">Archived</span> bit is set to <span class="cv_-_computer_voice">true</span>.</div>
      <div class="B_-_Body"><a name="2503508">The </a><span class="cv_-_computer_voice">basedOn</span> property of a given <span class="cv_-_computer_voice">PolicyPeriod</span> might be in a prior term, so that based-on policy period must also be checked.</div>
      <div class="H3_-_Heading_3_outer" style="margin-left: 36pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <h5 class="H3_-_Heading_3_inner" style="width: 18pt; white-space: nowrap"></h5>
            </td>
            <td width="100%">
              <h5 class="H3_-_Heading_3_inner"><a name="2503509">Displaying Jobs or Policies</a></h5>
            </td>
          </tr>
        </table>
      </div>
      <div class="B_-_Body"><a name="2503510">In the default configuration, the </a><span class="cv_-_computer_voice">JobForward</span> and <span class="cv_-_computer_voice">PolicyFileForward</span> PCF files are used by other PCF files and Gosu code to display a single job or policy. These PCF files figure out, among other things, whether or not the user arrives at the wizard for a job or policy or the archived policy period page instead.</div>
      <div class="B_-_Body"><a name="2503511">A PCF file that displays or potentially modifies archivable entities calls this PCF file, which contains code to handle the display of an archived policy term or policy period. Care still needs to be taken with actions (such as calculating differences or starting jobs) whose success is dependent on other terms.</a></div>
      <div class="H3_-_Heading_3_outer" style="margin-left: 36pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <h5 class="H3_-_Heading_3_inner" style="width: 18pt; white-space: nowrap"></h5>
            </td>
            <td width="100%">
              <h5 class="H3_-_Heading_3_inner"><a name="2503512">Jobs and Archiving</a></h5>
            </td>
          </tr>
        </table>
      </div>
      <div class="B_-_Body"><a name="2503513">When writing Gosu code, be aware that PolicyCenter has the following restriction related to jobs and archiving:</a></div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><a name="2503514">You cannot start a job on an archived policy term.</a></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><a name="2503515">You cannot start a job if there is a future archived policy term. You cannot start a job because an out-of-sequence change may necessitate updates to future policy terms.</a></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><a name="2503516">You cannot archive a policy term if there is are open jobs in a previous term. </a></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="H3_-_Heading_3_outer" style="margin-left: 36pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <h5 class="H3_-_Heading_3_inner" style="width: 18pt; white-space: nowrap"></h5>
            </td>
            <td width="100%">
              <h5 class="H3_-_Heading_3_inner"><a name="2503517">Search and Archiving</a></h5>
            </td>
          </tr>
        </table>
      </div>
      <div class="B_-_Body"><a name="2503518">When writing Gosu code, be aware that search does not find properties on effective-dated objects removed from the database through archiving. The search simply fails to return those archived rows. Search screens may need to be aware of archiving and adjust the display when </a><span class="ui_-_UI_element">Include Archived</span> or the like is selected.</div>
      <div class="H3_-_Heading_3_outer" style="margin-left: 36pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <h5 class="H3_-_Heading_3_inner" style="width: 18pt; white-space: nowrap"></h5>
            </td>
            <td width="100%">
              <h5 class="H3_-_Heading_3_inner"><a name="2503520">Do Not Archive a Policy</a></h5>
            </td>
          </tr>
        </table>
      </div>
      <div class="B_-_Body"><a name="2503521">The </a><span class="cv_-_computer_voice">Policy</span> entity has a <span class="cv_-_computer_voice">DoNotArchive</span> property. You can manage this property through the <span class="cv_-_computer_voice">ArchiveAPI</span> web service. To set the <span class="cv_-_computer_voice">DoNotArchive</span> property, you must have the <span class="cv_-_computer_voice">archivedisable</span> and <span class="cv_-_computer_voice">archiveenable</span> privileges. In the default configuration, the user interface does not set or clear the <span class="cv_-_computer_voice">DoNotArchive</span> property.</div>
      <h6 class="HS_-_Head_Sub"><a name="2503522">See also</a></h6>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><a href="javascript:WWHClickedPopup('integration', 'webservices-policy.10.18.html#3512952', '');" title="Archiving Web Services" name="2503526">“Archiving Web Services” in the </a><span class="bt_-_book_title"><a href="javascript:WWHClickedPopup('integration', 'webservices-policy.10.18.html#3512952', '');" title="Archiving Web Services">Integration Guide</a></span> for more information on the <span class="cv_-_computer_voice">IArchiveAPI</span>.</div>
            </td>
          </tr>
        </table>
      </div>
      <script type="text/javascript" language="JavaScript1.2">
        <!--
          // Clear related topics
          //
          WWHClearRelatedTopics();

          document.writeln(WWHRelatedTopicsInlineHTML());
        // -->
      </script>
    </blockquote>
    <script type="text/javascript" language="JavaScript1.2">
      <!--
        document.write(WWHRelatedTopicsDivTag() + WWHPopupDivTag() + WWHALinksDivTag());
      // -->
    </script>
  </body>
</html>