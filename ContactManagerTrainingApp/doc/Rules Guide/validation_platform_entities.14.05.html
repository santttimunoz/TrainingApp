<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xml:lang="en" lang="en" xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
    <meta http-equiv="Content-Style-Type" content="text/css" />
    <!-- MOTW-DISABLED saved from url=(0014)about:internet -->
    <title>Traversing the Validation Graph</title>
    <link rel="StyleSheet" href="css/validation_platform_entities.css" type="text/css" media="all" />
    <link rel="StyleSheet" href="css/webworks.css" type="text/css" media="all" />
    <link rel="StyleSheet" href="css/css-guidewire-extra.css" type="text/css" media="all" />
    <script type="text/javascript" language="JavaScript1.2" src="wwhdata/common/context.js"></script>
    <script type="text/javascript" language="JavaScript1.2" src="wwhdata/common/towwhdir.js"></script>
    <script type="text/javascript" language="JavaScript1.2" src="wwhdata/common/wwhpagef.js"></script>
    <script type="text/javascript" language="JavaScript1.2">
      <!--
        var  WebWorksRootPath = "";
      // -->
    </script>
    <script type="text/javascript" language="JavaScript1.2">
      <!--
        // Set reference to top level help frame
        //
        var  WWHFrame = WWHGetWWHFrame("", true);
      // -->
    </script>
    <script type="text/javascript" language="JavaScript1.2" src="scripts/expand.js"></script>
    <!-- THE FOLLOWING IS A GUIDEWIRE STYLE DEFINITION FOR THE LINK TO THIS FEATURE -->
    <link rel="StyleSheet" href="css/css-guidewire-extra.css" type="text/css" media="all" />
    <!-- THE FOLLOWING IS A GUIDEWIRE GSCRIPT FUNCTION FOR THE LINK TO THIS FEATURE -->
    <script type="text/javascript">
function guidewire_selectall()
{
var text_val=eval("document.linktothisurlform.urlfield");
text_val.focus();
text_val.select();
}
</script>
  </head>
  <body onLoad="WWHUpdate();" onUnload="WWHUnload();" onKeyDown="WWHHandleKeyDown((document.all||document.getElementById||document.layers)?event:null);" onKeyPress="WWHHandleKeyPress((document.all||document.getElementById||document.layers)?event:null);" onKeyUp="WWHHandleKeyUp((document.all||document.getElementById||document.layers)?event:null);">
    <!-- THE FOLLOWING IS A GUIDEWIRE DIV FOR THE 'LINK TO THIS' FEATURE -->
    <div id="linkToThisPage" class="popup" style="display: none;">
      <div class="popupTitle">Link Directly to This Page 
           <a href="#" onclick="var thePopup = getElementById('linkToThisPage');thePopup.style.display='none';return false;"><img class="popupClosebox" src="wwhelp/wwhimpl/common/images/close.gif" /></a></div>
      <div style="padding:6px;">
        <div class="popupText" id="linkToThisPageBookmark">An error has occurred if you see this messsage.</div>
        <form name="linktothisurlform" method="post" action="" style="width:275px;margin:0px">
          <input type="text" class="popupURLText" id="linkToThisPageURL" name="urlfield" rows="1" cols="55" onClick="guidewire_selectall();" onFocus="guidewire_selectall();"></input>
        </form>
      </div>
    </div>
    <br />
    <div class="WebWorks_Breadcrumbs" style="text-align: left;">
      <span>PolicyCenter Rules Guide</span> : 
    <span class="WebWorks_Breadcrumbs" style="text-align: left;"><a class="WebWorks_Breadcrumb_Link" href="p-rules_advanced.html#4166360">Advanced Topics</a> : <a class="WebWorks_Breadcrumb_Link" href="validation_platform_entities.14.01.html#4166360">Performing Rule-based Validation</a> : <a class="WebWorks_Breadcrumb_Link" href="validation_platform_entities.14.04.html#4166360">The Validation Graph</a> : Traversing the Validation Graph</span></div>
    <hr align="left" />
    <blockquote>
      <h4 class="H2B_-_Heading_2_Break"><a name="4166360">Traversing the Validation Graph</a></h4>
      <div class="BKN_-_Body_002c_Keep_Next"><a name="4847461">If a entity is validatable, PolicyCenter applies the pre-update and validation rules any time that you modify the entity contents directly. Suppose, as described previously, you update an object linked to an object. For example, a foreign key links each of the following objects to the </a><span class="cv_-_computer_voice">User</span> object:</div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt; margin-bottom: 2.0pt; vertical-align: baseline">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap; color: #000000; font-style: normal; font-variant: normal; font-weight: normal; text-transform: none">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner" style="color: #000000; font-style: normal; font-variant: normal; font-weight: normal; text-transform: none"><span class="cv_-_computer_voice"><a name="4847462">Contact</a></span></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt; margin-bottom: 2.0pt; vertical-align: baseline">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap; color: #000000; font-style: normal; font-variant: normal; font-weight: normal; text-transform: none">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner" style="color: #000000; font-style: normal; font-variant: normal; font-weight: normal; text-transform: none"><span class="cv_-_computer_voice"><a name="4847463">Credential</a></span></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt; margin-bottom: 2.0pt; vertical-align: baseline">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap; color: #000000; font-style: normal; font-variant: normal; font-weight: normal; text-transform: none">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner" style="color: #000000; font-style: normal; font-variant: normal; font-weight: normal; text-transform: none"><span class="cv_-_computer_voice"><a name="4847464">UserSettings</a></span></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="B_-_Body"><a name="4847465">If you update a user's credential, you might reasonably expect the pre-update and validation rules to execute before PolicyCenter commits the updates to the database. However, updating a user’s credentials does not normally trigger rules to the container object (</a><span class="cv_-_computer_voice">User</span>, in this case). The reason, implementation (at the metadata level) of a user’s credential is a pointer (link) from a <span class="cv_-_computer_voice">User</span> entity to a <span class="cv_-_computer_voice">Credential</span> entity.</div>
      <div class="B_-_Body"><a name="4847466">The standard way to trigger the pre-update and validation rules on linked objects is by setting the </a><span class="cv_-_computer_voice">triggersValidation</span> pointer (foreign key) to the object in the metadata XML file. For example, in <span class="cv_-_computer_voice">User.eti</span>, you see the following:</div>
      <PRE class="CF_-_Code_First_Line"><a name="4847468">&lt;entity xmlns="http://guidewire.com/datamodel" ... entity="User"&gt;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="4847469">&nbsp;&nbsp;...</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="4847470">&nbsp;&nbsp;&lt;implementsEntity name="Validatable"/&gt;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="4847471">&nbsp;&nbsp;...</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="4847472">&nbsp;&nbsp;&lt;foreignkey columnName="ContactID"</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="4847473">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;desc="Contact entry related to the user."</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="4847474">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fkentity="UserContact"</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="4847475">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;name="Contact"</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="4847476">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;...</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="4847477">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;triggersValidation="true"/&gt;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="4847478">&nbsp;&nbsp;&lt;foreignkey columnName="CredentialID"</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="4847479">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;desc="Security credential for the user."</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="4847480">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fkentity="Credential"</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="4847481">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;name="Credential"</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="4847482">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;...</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="4847483">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;triggersValidation="true"/&gt;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="4847484">&nbsp;&nbsp;...</a></PRE>
      <PRE class="CL_-_Code_Last_Line"><a name="4847485">&lt;/entity&gt;</a></PRE>
      <div class="B_-_Body"><a name="4847486">Setting the </a><span class="cv_-_computer_voice">triggersValidation</span> attribute to <span class="cv_-_computer_voice">true</span> ensures that PolicyCenter runs the pre-update and validation rules on the linked object any time that you modify it. (This is only true if the container object implements the <span class="cv_-_computer_voice">Validatable</span> delegate.)</div>
      <div class="B_-_Body"><a name="4847491">In the base configuration, Guidewire sets the validation triggers so that modifying a validatable entity in a bundle causes PolicyCenter to validate that entity and all its revisioning parents.</a></div>
      <div class="B_-_Body"><a name="4970565">The </a><span class="cv_-_computer_voice">triggersValidation</span> attribute is also available on foreign keys and arrays that have been added to custom subtypes, custom entities, or to core entities using extensions. The attribute defaults to <span class="cv_-_computer_voice">false</span>. You must specifically change the attribute to <span class="cv_-_computer_voice">true</span> if adding a new foreign key or array that you want to trigger validation to a validatable object.</div>
      <h6 class="HS_-_Head_Sub"><a name="4847496">Owned Arrays</a></h6>
      <div class="B_-_Body"><a name="4847500">PolicyCenter treats owned arrays (arrays attached to a validatable entity) and marked as </a><span class="cv_-_computer_voice">triggersValidation</span> in a special fashion. PolicyCenter performs validation based on the validation graph. If an entity changes, PolicyCenter follows all the arrays and foreign keys that reference that entity and for which <span class="cv_-_computer_voice">triggersValidation=”true”</span>. It then walks up the graph to find the validatable entities that ultimately references the changed entity. In the case of owned arrays, changes to the array cause PolicyCenter to consider the parent entity to be changed. </div>
      <div class="BKN_-_Body_002c_Keep_Next"><a name="4847510">Consider, for example, the following data model: </a></div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><a name="4847511">Entity A has an foreign key to B</a></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><a name="4847512">Entity B has an owned array of C</a></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><a name="4847513">Array C has an foreign key to D</a></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="B_-_Body"><a name="4847514">Suppose that both A and B are validatable. Essentially, these relationships looks like: </a></div>
      <div class="CS_-_Code_Single_Line"><a name="4847524">A → B → C[] → D </a></div>
      <div class="B_-_Body"><a name="4847534">Suppose that you also mark both A → B and C → D as triggering validation. What happens with the B → C link? </a></div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><a name="4847541">If the B → C array is marked as </a><span class="cv_-_computer_voice">triggersValidation=”false”</span>, changes to C cause PolicyCenter to validate B and A. This is because PolicyCenter treats the change as a change to B directly. A change to D, however, does not cause PolicyCenter to validate anything, the graph stops at C. As C is not actually changed, PolicyCenter does not consider B to have changed, and performs no validation. </div>
            </td>
          </tr>
        </table>
      </div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><a name="4847557">If B → C is marked as </a><span class="cv_-_computer_voice">triggersValidation=”true”</span>, changes to either C or D cause PolicyCenter to validate both B and A. </div>
            </td>
          </tr>
        </table>
      </div>
      <script type="text/javascript" language="JavaScript1.2">
        <!--
          // Clear related topics
          //
          WWHClearRelatedTopics();

          document.writeln(WWHRelatedTopicsInlineHTML());
        // -->
      </script>
    </blockquote>
    <script type="text/javascript" language="JavaScript1.2">
      <!--
        document.write(WWHRelatedTopicsDivTag() + WWHPopupDivTag() + WWHALinksDivTag());
      // -->
    </script>
  </body>
</html>