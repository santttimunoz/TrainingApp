<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xml:lang="en" lang="en" xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
    <meta http-equiv="Content-Style-Type" content="text/css" />
    <!-- MOTW-DISABLED saved from url=(0014)about:internet -->
    <title>Preempted Jobs</title>
    <link rel="StyleSheet" href="css/policyrevisions.css" type="text/css" media="all" />
    <link rel="StyleSheet" href="css/webworks.css" type="text/css" media="all" />
    <link rel="StyleSheet" href="css/css-guidewire-extra.css" type="text/css" media="all" />
    <script type="text/javascript" language="JavaScript1.2" src="wwhdata/common/context.js"></script>
    <script type="text/javascript" language="JavaScript1.2" src="wwhdata/common/towwhdir.js"></script>
    <script type="text/javascript" language="JavaScript1.2" src="wwhdata/common/wwhpagef.js"></script>
    <script type="text/javascript" language="JavaScript1.2">
      <!--
        var  WebWorksRootPath = "";
      // -->
    </script>
    <script type="text/javascript" language="JavaScript1.2">
      <!--
        // Set reference to top level help frame
        //
        var  WWHFrame = WWHGetWWHFrame("", true);
      // -->
    </script>
    <script type="text/javascript" language="JavaScript1.2" src="scripts/expand.js"></script>
    <!-- THE FOLLOWING IS A GUIDEWIRE STYLE DEFINITION FOR THE LINK TO THIS FEATURE -->
    <link rel="StyleSheet" href="css/css-guidewire-extra.css" type="text/css" media="all" />
    <!-- THE FOLLOWING IS A GUIDEWIRE GSCRIPT FUNCTION FOR THE LINK TO THIS FEATURE -->
    <script type="text/javascript">
function guidewire_selectall()
{
var text_val=eval("document.linktothisurlform.urlfield");
text_val.focus();
text_val.select();
}
</script>
  </head>
  <body onLoad="WWHUpdate();" onUnload="WWHUnload();" onKeyDown="WWHHandleKeyDown((document.all||document.getElementById||document.layers)?event:null);" onKeyPress="WWHHandleKeyPress((document.all||document.getElementById||document.layers)?event:null);" onKeyUp="WWHHandleKeyUp((document.all||document.getElementById||document.layers)?event:null);">
    <!-- THE FOLLOWING IS A GUIDEWIRE DIV FOR THE 'LINK TO THIS' FEATURE -->
    <div id="linkToThisPage" class="popup" style="display: none;">
      <div class="popupTitle">Link Directly to This Page 
           <a href="#" onclick="var thePopup = getElementById('linkToThisPage');thePopup.style.display='none';return false;"><img class="popupClosebox" src="wwhelp/wwhimpl/common/images/close.gif" /></a></div>
      <div style="padding:6px;">
        <div class="popupText" id="linkToThisPageBookmark">An error has occurred if you see this messsage.</div>
        <form name="linktothisurlform" method="post" action="" style="width:275px;margin:0px">
          <input type="text" class="popupURLText" id="linkToThisPageURL" name="urlfield" rows="1" cols="55" onClick="guidewire_selectall();" onFocus="guidewire_selectall();"></input>
        </form>
      </div>
    </div>
    <br />
    <div class="WebWorks_Breadcrumbs" style="text-align: left;">
      <span>PolicyCenter Application&nbsp;Guide</span> : 
    <span class="WebWorks_Breadcrumbs" style="text-align: left;"><a class="WebWorks_Breadcrumb_Link" href="p-components.html#2695159">Additional Features of PolicyCenter</a> : <a class="WebWorks_Breadcrumb_Link" href="policyrevisions.52.01.html#2695159">Policy Revisioning</a> : Preempted Jobs</span></div>
    <hr align="left" />
    <blockquote>
      <h3 class="H1_-_Heading_1"><a name="2695159">Preempted Jobs</a></h3>
      <div class="B_-_Body"><a name="3172061">Although some PolicyCenter jobs start and finish quickly, other job take a long time to complete the entire lifecycle. Sometimes this delay is due to technical reasons such as contacting external systems.  There may also be legal reasons such as legally-enforced delays during cancellation. </a></div>
      <div class="B_-_Body"><a name="2698621">When jobs take a long time to complete, chances increase that multiple jobs started on the same branch and are in process at the same time.</a><span class="e_-_emphasis"> </span>For instance, two jobs are based on exactly the same <span class="cv_-_computer_voice">PolicyPeriod</span> entity instance and its subobjects. When the first job finishes there is no problem. When later jobs started at the same time complete, there may be challenges binding the new changes. The job that finishes second does <span class="s_-_strong">not</span> have the changes recently made and bound by the job that finished first.</div>
      <div class="B_-_Body"><a name="2707021">When two jobs run concurrently like this, this situation is called </a><span class="e_-_emphasis">preemption</span> when the second job to finish attempts to bind. When PolicyCenter tries to bind a preempted branch, initially the branch does not contain preempted changes. PolicyCenter must incorporate the changes from the preempting branch. Preemption applies to any PolicyCenter job, such as cancellation and reinstatement, not just policy change jobs. After the first job to finish is bound, any unfinished jobs are preempted. PolicyCenter attempts to fix these problems early, as soon as you view a preempted job rather than just waiting until the preempted job tries to bind.</div>
      <div class="B_-_Body"><a name="2698840">For example, suppose on a personal auto policy, two users start policy change jobs at the same time: </a></div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><a name="2698841">One policy change adds an additional vehicle, effective March 1, keeping coverage amounts the same</a></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><a name="2698738">One policy change increases the coverage amount on the original car, effective April 1. Remember that this policy was based on the original legally-enforced policy when the policy change started. PolicyCenter represents this policy change as a branch (a </a><span class="cv_-_computer_voice">PolicyPeriod</span> entity instance and its subobjects) that is a clone of the original branch before any of the recent changes.</div>
            </td>
          </tr>
        </table>
      </div>
      <div class="B_-_Body"><a name="2698929">PolicyCenter detects potential preemption when starting a job if it appears that another job is in progress. The second concurrent job to start displays a warning in the user interface:</a></div>
      <div class="F_-_Figure"><a name="3026541"><img class="Default" src="images/preemption-warning.png" style="display: inline; float: none; left: 0.0; top: 0.0" alt="" /></a></div>
      <div class="B_-_Body"><a name="3026542">This warning does not indicate that a preemption will necessarily occur, or that it already occurred. However, if both branches eventually bind, one of the two jobs will be preempted.</a></div>
      <div class="B_-_Body"><a name="2713461">Despite this warning, PolicyCenter lets the user start the policy change job or another job anyway. The complexity of preemption really takes place when the jobs finish or you try to handle the preempted job. The first change to finish preempts (takes precedence over) any concurrent changes not yet finalized. </a></div>
      <div class="N_-_Note">
        <span class="n_-_note">Note: </span><a name="2705534">The complexity of preemption occurs after the first branch is bound and the user tries to work with the preempted non-bound job. This can happen in any phase of the preempted job, not just in the bind phase. The finish time determines which branch needs special handling, not the start time of the two jobs.</a></div>
      <div class="B_-_Body"><a name="2701469">For example, if the policy change that adds the additional vehicle finalizes&nbsp;first, PolicyCenter makes that branch the legally enforced branch for this period. Nothing very unusual happens from a database or user interface perspective as part of binding this job. </a></div>
      <div class="B_-_Body"><a name="2944929">However, after the user binds this change, if there are open jobs on this policy, PolicyCenter displays a warning this job preempted another transaction. It offers a link to view that policy transaction immediately.</a></div>
      <div class="F_-_Figure"><a name="2944942"><img class="Default" src="images/preemption-justbound.png" style="display: inline; float: none; left: 0.0; top: 0.0" alt="" /></a></div>
      <div class="B_-_Body"><a name="2944903">At this point in the application, it is possible that the user might withdraw or ignore other non-bound branches. </a></div>
      <div class="B_-_Body"><a name="2698972">However, if any user attempts to bind the second change (the coverage increase change), that change was preempted. That change was originally based on a branch that is no longer the most recently bound branch. PolicyCenter displays special options to handle the preemption.</a></div>
      <div class="B_-_Body"><a name="2944986">Let us first consider the case in which the job that you bound first in real-world time had an earlier effective date than the second-to-bind change. This is a standard preemption. Before binding the coverage increase change, PolicyCenter must add the additional vehicle to the draft branch containing the coverage increase before attempting to bind the increased coverage. </a></div>
      <div class="N_-_Note">
        <span class="n_-_note">Note: </span><a name="2701559">PolicyCenter must merge changes like this during preemption. Otherwise, when you bind the coverage change, the additional vehicle would be missing. It would appear as if you removed the vehicle from the policy as of April 1 as part of the recent change even though that was not your intention.</a></div>
      <div class="B_-_Body"><a name="2701560">If you later view the preempted job, PolicyCenter warns you with a message at the top of the window. Also, the </a><span class="ui_-_UI_element">Handle Preemption</span> button appears if you have preemptions to handle on this job.</div>
      <div class="F_-_Figure"><a name="2945283"><img class="Default" src="images/preemption-preempted.png" style="display: inline; float: none; left: 0.0; top: 0.0" alt="" /></a></div>
      <div class="B_-_Body"><a name="2945284">You must choose to do one of the following:</a></div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><a name="2945285">Click </a><span class="ui_-_UI_element">Handle&nbsp;Preemption</span> to merge changes as appropriate from recently-bound jobs into the active job that is about to be bound.</div>
            </td>
          </tr>
        </table>
      </div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><a name="2698791">Click </a><span class="ui_-_UI_element">Withdraw</span> to withdraw (abort) the current job.</div>
            </td>
          </tr>
        </table>
      </div>
      <div class="B_-_Body"><a name="2945250">If you click the </a><span class="ui_-_UI_element">Handle Preemption</span> button to handle the preemption, you see the following screen.</div>
      <div class="F_-_Figure"><a name="2945344"><img class="Default" src="images/preemption-handle-standard.png" style="display: inline; float: none; left: 0.0; top: 0.0" alt="" /></a></div>
      <div class="B_-_Body"><a name="2707353">You can use the tree navigation (clicking on - and + signs) to hide or show parts of items in the hierarchy.</a></div>
      <div class="B_-_Body"><a name="2945452">Use the buttons at the bottom of the screen to choose among the following actions:</a></div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><a name="2707354">Click the </a><span class="ui_-_UI_element">Apply All Changes</span> button to apply all changes.</div>
            </td>
          </tr>
        </table>
      </div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><a name="2707315">Click the </a><span class="ui_-_UI_element">Withdraw</span> button to withdraw the job.</div>
            </td>
          </tr>
        </table>
      </div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><a name="2707318">Click the </a><span class="ui_-_UI_element">Decide Later</span> button to save the draft and return to the policy review screen. </div>
            </td>
          </tr>
        </table>
      </div>
      <h6 class="HS_-_Head_Sub"><a name="2701760">Effective Date Later</a></h6>
      <div class="B_-_Body"><a name="3171998">If you apply changes and the effective date of your draft branch is later than effective dates of other bound jobs for that period, PolicyCenter simply applies the changes. This is a standard preemption.</a></div>
      <h6 class="HS_-_Head_Sub"><a name="2945517">Effective Date Earlier</a></h6>
      <div class="B_-_Body"><a name="3172004">However, if the effective date of your draft branch is earlier than effective dates of any bound jobs for that period, this preempted job is also out of sequence. Because it is out of sequence, there might be out-of-sequence merge conflicts. If there are merge conflicts, they appear in the </a><span class="ui_-_UI_element">Change&nbsp;Conflicts</span> tab. You can review each conflict and determine whether to merge each change forward. For more information about the meaning of out-of-sequence in PolicyCenter, see <a href="javascript:WWHClickedPopup('app', 'policyrevisions.52.04.html#2708136', '');" title="Out-of-sequence Jobs">“Out-of-sequence Jobs”</a>.</div>
      <div class="NI_-_Note_Important">
        <span class="n_-_note">IMPORTANT   </span><a name="2945801">A job can be both preempted and out-of-sequence, depending on the effective date of the current branch compared to the effective date of other bound branches. If you apply changes to handle the preemption, there might be merge conflicts. If this happens, PolicyCenter displays the same change conflicts user interface (the </a><span class="ui_-_UI_element">Change Conflicts</span> tab) as a standard out-of-sequence job. </div>
      <h6 class="HS_-_Head_Sub"><a name="2945572">How PolicyCenter Actually Handles Preemptions</a></h6>
      <div class="B_-_Body"><a name="2707960">In the PolicyCenter interface for preemption handling, it appears as if PolicyCenter simply merges changes into the latest selected (draft) branch. However, from a database perspective, PolicyCenter actually creates a new branch to handle the preemption. </a></div>
      <div class="B_-_Body"><a name="2945613">The changes happen in the following order:</a></div>
      <div class="LS_-_List_Start_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="LS_-_List_Start_inner" style="width: 15pt; white-space: nowrap">
                <span class="ri_-_run_in_header">	1.	</span>
              </div>
            </td>
            <td width="100%">
              <div class="LS_-_List_Start_inner"><a name="2713413">PolicyCenter creates a new branch that is a copy of the most recently bound </a><span class="cv_-_computer_voice">PolicyPeriod</span> in that contractual period. By definition, this includes all changes from any preempting branch (or branches for multiple preemptions). This is the safest way to preserve consistency with a legally enforced branch.</div>
            </td>
          </tr>
        </table>
      </div>
      <div class="LI_-_List_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="LI_-_List_Item_inner" style="width: 15pt; white-space: nowrap">
                <span class="ri_-_run_in_header">	2.	</span>
              </div>
            </td>
            <td width="100%">
              <div class="LI_-_List_Item_inner"><a name="2713421">PolicyCenter then merges the changes you attempted to make in the preempted branch to this new branch. </a></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="NI_-_Note_Important">
        <span class="n_-_note">IMPORTANT   </span><a name="2896861">In rare cases, PolicyCenter cannot automatically reapply the changes. This can happen, for example, if you make a change to a vehicle that has been removed in a preempting branch. Because of the preempting branch, there is no longer a vehicle in the newly merged branch. If such rare cases occur, after PolicyCenter reapplies changes, PolicyCenter opens a worksheet to notify you about change conflicts. This is just a notification. It requires no action.</a></div>
      <div class="LI_-_List_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="LI_-_List_Item_inner" style="width: 15pt; white-space: nowrap">
                <span class="ri_-_run_in_header">	3.	</span>
              </div>
            </td>
            <td width="100%">
              <div class="LI_-_List_Item_inner"><a name="2896862">PolicyCenter discards the branch that the user was actively working on (the preempted branch) after handling the preemption. PolicyCenter replaces it with the new merged branch in the user interface and in the database.</a></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="LI_-_List_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="LI_-_List_Item_inner" style="width: 15pt; white-space: nowrap">
                <span class="ri_-_run_in_header">	4.	</span>
              </div>
            </td>
            <td width="100%">
              <div class="LI_-_List_Item_inner"><a name="2945782">You can customize application logic that occurs after handling a preemption but before discarding the draft branch and binding the new </a><span class="cv_-_computer_voice">PolicyPeriod</span>. For more on this topic, see <a href="javascript:WWHClickedPopup('integration', 'plugins-policy.13.07.html#2529225', '');" title="Policy Period Plugin">“Customizing Behavior After Handling a Preemption” in the </a><span class="bt_-_book_title"><a href="javascript:WWHClickedPopup('integration', 'plugins-policy.13.07.html#2529225', '');" title="Policy Period Plugin">Integration Guide</a></span>.</div>
            </td>
          </tr>
        </table>
      </div>
      <script type="text/javascript" language="JavaScript1.2">
        <!--
          // Clear related topics
          //
          WWHClearRelatedTopics();

          document.writeln(WWHRelatedTopicsInlineHTML());
        // -->
      </script>
    </blockquote>
    <script type="text/javascript" language="JavaScript1.2">
      <!--
        document.write(WWHRelatedTopicsDivTag() + WWHPopupDivTag() + WWHALinksDivTag());
      // -->
    </script>
  </body>
</html>